{
  "id": 5492,
  "name": "Generate & Send Spare Parts Price Quotes with Gmail, Sheets and Gemini AI",
  "totalViews": 2866,
  "price": 0,
  "purchaseUrl": null,
  "user": {
    "name": "berke",
    "username": "berke",
    "bio": "AI Automation Developer with 3+ years of industry experience, specializing in business workflow automation that drives operational efficiency and productivity across organizations.",
    "verified": false,
    "links": [
      "https://www.linkedin.com/in/berke-celik-a1466a136/"
    ],
    "avatar": "https://gravatar.com/avatar/d3e512056ae1863c93e81ce5590812ab4436e9fdfa9a0d7acd52a1c8883568e3?r=pg&d=retro&size=200"
  },
  "description": "## **Who's it for**\n\nThis workflow is perfect for **sales teams**, **customer service departments**, and **businesses** that frequently handle spare parts inquiries via email. It's especially valuable for companies managing **multiple products with complex pricing structures** who want to automate their quotation process while maintaining professional, multilingual communication.\n\n![Screenshot 20250630 214522.png](fileId:1653)\n\n---\n\n## **What it does**\n\nThis workflow:\n\n- **Monitors your Gmail inbox** for incoming spare parts requests  \n- **Automatically generates professional HTML price quotes** in the sender's language  \n- **Sends personalized replies**  \n- Uses **AI to detect the email language** (supports Turkish, English, German, and more)  \n- **Extracts project or part codes**  \n- **Fetches pricing data from Google Sheets**  \n- **Calculates totals accurately**  \n- **Formats everything** into a clean, professional quote that matches your brand  \n![ddd.png](fileId:1652)\n---\n\n## **How it works**\n\n1. **Schedule Trigger** runs every minutes to check for new emails  \n2. **Gmail node** fetches the latest unread email  \n3. **Keyword detection** filters for spare parts-related terms in multiple languages  \n4. **AI Agent** processes the request by:  \n   - Detecting the email's language  \n   - Extracting project/part codes  \n   - Querying three Google Sheets: CRM, Bill of Materials, Pricing  \n   - Calculating line totals and grand total  \n   - Generating a professional HTML quote in the sender's language  \n5. **Gmail reply** sends the quote and marks the original email as read  \n\n---\n\n## **Requirements**\n\n- n8n self-hosted or cloud instance  \n- Gmail account with OAuth2 authentication  \n- Google Sheets with proper structure (3 sheets for CRM, BoM, and Pricing data)  \n- Google Gemini API key for AI processing  \n- Basic understanding of Google Cloud Console for OAuth setup  \n\n---\n\n## **How to set up**\n\n1. **Import** the workflow into your n8n instance  \n2. **Create three Google Sheets** with the following column structure:\n\n   - *CRM Sheet*: `Email`, `ProjectCode`, `CustomerName`  \n   - *Bill of Materials*: `ProjectCode`, `PartCode`, `PartDescription`, `Quantity`  \n   - *Pricing Sheet*: `PartCode`, `UnitPriceEUR`, `PartDescription`  \n\n3. **Configure credentials**:\n   - Set up **Gmail OAuth2** in Google Cloud Console  \n   - Configure **Google Sheets OAuth2** (can use same project)  \n   - Get your **Google Gemini API key** from Google AI Studio  \n\n4. **Update the workflow**:\n   - Replace placeholder **Sheet IDs** in the CRM, BoM, and Pricing nodes  \n   - Adjust **company name** in the AI Agent‚Äôs system message  \n   - Modify **keyword detection** if needed  \n\n5. **Test with a sample email** before activating  \n\n---\n\n## **How to customize the workflow**\n\n- **Add more languages**: Update the keyword detection node with additional terms  \n- **Modify the quote template**: Edit the HTML in the AI Agent's message to match your branding  \n- **Change data sources**: Replace Google Sheets with PostgreSQL or MySQL nodes  \n- **Add approval steps**: Insert a manual approval node for quotes above a certain value  \n- **Include attachments**: Add PDF or product spec file nodes  \n- **Enhance notifications**: Add Slack or Teams notifications after quote is sent  \n- **Implement follow-ups**: Create a separate workflow for reminder emails  \n\n---\n\nThis template provides a **solid foundation** for automating your quotation process, while staying flexible to fit your specific business needs.\n\n*Feel free to contact me for further implementation guidelines:*\n[LinkedIn: Berke](https://www.linkedin.com/in/berke-celik-a1466a136/)",
  "createdAt": "2025-06-30T19:47:37.078Z",
  "nodes": [
    {
      "id": 20,
      "icon": "fa:map-signs",
      "name": "n8n-nodes-base.if",
      "codex": {
        "data": {
          "alias": [
            "Router",
            "Filter",
            "Condition",
            "Logic",
            "Boolean",
            "Branch"
          ],
          "details": "The IF node can be used to implement binary conditional logic in your workflow. You can set up one-to-many conditions to evaluate each item of data being inputted into the node. That data will either evaluate to TRUE or FALSE and route out of the node accordingly.\n\nThis node has multiple types of conditions: Bool, String, Number, and Date & Time.",
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                "icon": "üè≠",
                "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
              },
              {
                "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                "icon": "‚òÄÔ∏è",
                "label": "2021: The Year to Automate the New You with n8n"
              },
              {
                "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                "icon": "üß¨",
                "label": "Why business process automation with n8n can change your daily life"
              },
              {
                "url": "https://n8n.io/blog/create-a-toxic-language-detector-for-telegram/",
                "icon": "ü§¨",
                "label": "Create a toxic language detector for Telegram in 4 step"
              },
              {
                "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                "icon": "store",
                "label": "6 e-commerce workflows to power up your Shopify s"
              },
              {
                "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                "icon": "üîó",
                "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
              },
              {
                "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                "icon": "‚öôÔ∏è",
                "label": "Automate your data processing pipeline in 9 steps"
              },
              {
                "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                "icon": "üë•",
                "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
              },
              {
                "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                "icon": "‚ö°Ô∏è",
                "label": "5 tasks you can automate with the new Notion API "
              },
              {
                "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                "icon": "üí°",
                "label": "15 Google apps you can combine and automate to increase productivity"
              },
              {
                "url": "https://n8n.io/blog/automation-for-maintainers-of-open-source-projects/",
                "icon": "üè∑Ô∏è",
                "label": "How to automatically manage contributions to open-source projects"
              },
              {
                "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                "icon": " üï∏Ô∏è",
                "label": "How uProc scraped a multi-page website with a low-code workflow"
              },
              {
                "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                "icon": "ü§ñ",
                "label": "5 workflow automations for Mattermost that we love at n8n"
              },
              {
                "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                "icon": "üß†",
                "label": "Why this Product Manager loves workflow automation with n8n"
              },
              {
                "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                "icon": "üôå",
                "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
              },
              {
                "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                "icon": "üé°",
                "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
              },
              {
                "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                "icon": "üéñ",
                "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.if/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Flow"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "If",
        "color": "#408000"
      },
      "iconData": {
        "icon": "map-signs",
        "type": "icon"
      },
      "displayName": "If",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 356,
      "icon": "file:gmail.svg",
      "name": "n8n-nodes-base.gmail",
      "codex": {
        "data": {
          "alias": [
            "email",
            "human",
            "form",
            "wait",
            "hitl",
            "approval"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                "icon": "üß¨",
                "label": "Why business process automation with n8n can change your daily life"
              },
              {
                "url": "https://n8n.io/blog/supercharging-your-conference-registration-process-with-n8n/",
                "icon": "üé´",
                "label": "Supercharging your conference registration process with n8n"
              },
              {
                "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                "icon": "store",
                "label": "6 e-commerce workflows to power up your Shopify s"
              },
              {
                "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                "icon": "üë•",
                "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
              },
              {
                "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                "icon": "üí°",
                "label": "15 Google apps you can combine and automate to increase productivity"
              },
              {
                "url": "https://n8n.io/blog/your-business-doesnt-need-you-to-operate/",
                "icon": " üñ•Ô∏è",
                "label": "Hey founders! Your business doesn't need you to operate"
              },
              {
                "url": "https://n8n.io/blog/using-automation-to-boost-productivity-in-the-workplace/",
                "icon": "üí™",
                "label": "Using Automation to Boost Productivity in the Workplace"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.gmail/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/google/oauth-single-service/"
              }
            ]
          },
          "categories": [
            "Communication",
            "HITL"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "HITL": [
              "Human in the Loop"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Gmail"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMTkzIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PHBhdGggZmlsbD0iIzQyODVGNCIgZD0iTTU4LjE4MiAxOTIuMDVWOTMuMTRMMjcuNTA3IDY1LjA3NyAwIDQ5LjUwNHYxMjUuMDkxYzAgOS42NTggNy44MjUgMTcuNDU1IDE3LjQ1NSAxNy40NTV6Ii8+PHBhdGggZmlsbD0iIzM0QTg1MyIgZD0iTTE5Ny44MTggMTkyLjA1aDQwLjcyN2M5LjY1OSAwIDE3LjQ1NS03LjgyNiAxNy40NTUtMTcuNDU1VjQ5LjUwNWwtMzEuMTU2IDE3LjgzNy0yNy4wMjYgMjUuNzk4eiIvPjxwYXRoIGZpbGw9IiNFQTQzMzUiIGQ9Im01OC4xODIgOTMuMTQtNC4xNzQtMzguNjQ3IDQuMTc0LTM2Ljk4OUwxMjggNjkuODY4bDY5LjgxOC01Mi4zNjQgNC42NyAzNC45OTItNC42NyA0MC42NDRMMTI4IDE0NS41MDR6Ii8+PHBhdGggZmlsbD0iI0ZCQkMwNCIgZD0iTTE5Ny44MTggMTcuNTA0VjkzLjE0TDI1NiA0OS41MDRWMjYuMjMxYzAtMjEuNTg1LTI0LjY0LTMzLjg5LTQxLjg5LTIwLjk0NXoiLz48cGF0aCBmaWxsPSIjQzUyMjFGIiBkPSJtMCA0OS41MDQgMjYuNzU5IDIwLjA3TDU4LjE4MiA5My4xNFYxNy41MDRMNDEuODkgNS4yODZDMjQuNjEtNy42NiAwIDQuNjQ2IDAgMjYuMjN6Ii8+PC9zdmc+"
      },
      "displayName": "Gmail",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 6,
          "name": "Communication"
        },
        {
          "id": 28,
          "name": "HITL"
        }
      ]
    },
    {
      "id": 565,
      "icon": "fa:sticky-note",
      "name": "n8n-nodes-base.stickyNote",
      "codex": {
        "data": {
          "alias": [
            "Comments",
            "Notes",
            "Sticky"
          ],
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Sticky Note",
        "color": "#FFD233"
      },
      "iconData": {
        "icon": "sticky-note",
        "type": "icon"
      },
      "displayName": "Sticky Note",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 839,
      "icon": "fa:clock",
      "name": "n8n-nodes-base.scheduleTrigger",
      "codex": {
        "data": {
          "alias": [
            "Time",
            "Scheduler",
            "Polling",
            "Cron",
            "Interval"
          ],
          "resources": {
            "generic": [],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.scheduletrigger/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"trigger\",\"schedule\"]",
      "defaults": {
        "name": "Schedule Trigger",
        "color": "#31C49F"
      },
      "iconData": {
        "icon": "clock",
        "type": "icon"
      },
      "displayName": "Schedule Trigger",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 1119,
      "icon": "fa:robot",
      "name": "@n8n/n8n-nodes-langchain.agent",
      "codex": {
        "data": {
          "alias": [
            "LangChain",
            "Chat",
            "Conversational",
            "Plan and Execute",
            "ReAct",
            "Tools"
          ],
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Agents",
              "Root Nodes"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "AI Agent",
        "color": "#404040"
      },
      "iconData": {
        "icon": "robot",
        "type": "icon"
      },
      "displayName": "AI Agent",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1195,
      "icon": "fa:calculator",
      "name": "@n8n/n8n-nodes-langchain.toolCalculator",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.toolcalculator/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Tools"
            ],
            "Tools": [
              "Other Tools"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Calculator"
      },
      "iconData": {
        "icon": "calculator",
        "type": "icon"
      },
      "displayName": "Calculator",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1262,
      "icon": "file:google.svg",
      "name": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.lmchatgooglegemini/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Language Models",
              "Root Nodes"
            ],
            "Language Models": [
              "Chat Models (Recommended)"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Google Gemini Chat Model"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNDggNDgiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNNDQuNSAyMEgyNHY4LjVoMTEuOEMzNC43IDMzLjkgMzAuMSAzNyAyNCAzN2MtNy4yIDAtMTMtNS44LTEzLTEzczUuOC0xMyAxMy0xM2MzLjEgMCA1LjkgMS4xIDguMSAyLjlsNi40LTYuNEMzNC42IDQuMSAyOS42IDIgMjQgMiAxMS44IDIgMiAxMS44IDIgMjRzOS44IDIyIDIyIDIyYzExIDAgMjEtOCAyMS0yMiAwLTEuMy0uMi0yLjctLjUtNCIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBmaWxsPSIjRkJCQzA1IiBkPSJNMCAzN1YxMWwxNyAxM3oiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiNFQTQzMzUiIGQ9Im0wIDExIDE3IDEzIDctNi4xTDQ4IDE0VjBIMHoiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiMzNEE4NTMiIGQ9Im0wIDM3IDMwLTIzIDcuOSAxTDQ4IDB2NDhIMHoiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiM0Mjg1RjQiIGQ9Ik00OCA0OCAxNyAyNGwtNC0zIDM1LTEweiIgY2xpcC1wYXRoPSJ1cmwoI2IpIi8+PC9zdmc+"
      },
      "displayName": "Google Gemini Chat Model",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    }
  ],
  "views": 2866,
  "recentViews": 8,
  "workflow": {
    "id": "B3xq3cGwsIbeSRGd",
    "meta": {
      "instanceId": "843d4d5229a037453930997179f884195041f65c2aa51ee0bf20bfd5016e3a3b",
      "templateCredsSetupCompleted": true
    },
    "name": "Spare Parts Quote Generator",
    "tags": [],
    "nodes": [
      {
        "id": "a2278b8f-037c-4c94-a1cc-d5ab7df7351d",
        "name": "Welcome & Overview",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -2500,
          -600
        ],
        "parameters": {
          "color": 5,
          "width": 400,
          "height": 580,
          "content": "# üöÄ Automated Quote Generator Workflow\n\n## Overview\nThis workflow automatically:\n1. **Monitors Gmail** for spare parts requests\n2. **Identifies** requests using keyword detection\n3. **Generates** professional HTML quotes using AI\n4. **Replies** automatically with pricing\n\n## Setup Required:\n1. Configure Gmail OAuth2 credentials\n2. Set up Google Sheets with your data\n3. Configure Google Gemini API\n4. Update the sticky notes with your sheet IDs\n\n## Language Support:\nThe AI automatically detects and responds in the sender's language (Turkish, English, German, etc.)"
        },
        "typeVersion": 1
      },
      {
        "id": "52c6ee3a-5a2f-48b8-8f44-26e58ffed046",
        "name": "Google Sheets Structure",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -2060,
          0
        ],
        "parameters": {
          "color": 4,
          "width": 400,
          "height": 600,
          "content": "## üìä Required Google Sheets Structure\n\n### Sheet 1: CRM Data\n**Columns Required:**\n- `Email` - Customer email addresses\n- `ProjectCode` - Project codes\n- `CustomerName` - Customer names\n- Other customer data as needed\n\n### Sheet 2: Bill of Materials (BoM)\n**Columns Required:**\n- `ProjectCode` - Project code\n- `PartCode` - Part code\n- `PartDescription` - Part description\n- `Quantity` - Quantity\n\n### Sheet 3: Pricing Data\n**Columns Required:**\n- `PartCode` - Part code\n- `UnitPriceEUR` - Unit price in EUR\n- `PartDescription` - Part description"
        },
        "typeVersion": 1
      },
      {
        "id": "6100cf53-becc-46d5-b71b-40949c36db03",
        "name": "Configuration Steps",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -2060,
          -600
        ],
        "parameters": {
          "color": 6,
          "width": 400,
          "height": 580,
          "content": "## ‚öôÔ∏è Configuration Steps\n\n### 1. Gmail OAuth2\n- Go to Google Cloud Console\n- Create OAuth2 credentials\n- Add Gmail API scopes\n- Configure in n8n Credentials\n\n### 2. Google Sheets OAuth2\n- Use same Google Cloud project\n- Add Sheets API scopes\n- Configure in n8n Credentials\n\n### 3. Google Gemini API\n- Get API key from Google AI Studio\n- Configure in n8n Credentials\n\n### 4. Update Sheet IDs\n- Replace placeholder IDs in:\n  - CRM node\n  - BoM node\n  - Price node"
        },
        "typeVersion": 1
      },
      {
        "id": "8c96701c-e2b6-4fcb-ba7d-1713f2a20581",
        "name": "Keyword Detection Info",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -1200,
          -500
        ],
        "parameters": {
          "color": 3,
          "width": 320,
          "height": 580,
          "content": "## üîç Keyword Detection\n\nThis node checks for spare parts keywords:\n- **Turkish:** \"yedek par√ßa\"\n- **German:** \"Ersatzteile\", \"Ersatzteil\"\n- **English:** \"spare parts\"\n\nAdd more keywords as needed for your use case."
        },
        "typeVersion": 1
      },
      {
        "id": "529c5508-ecac-458c-aaa4-4ca2a168ab69",
        "name": "Email Reply Flow",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -160,
          -500
        ],
        "parameters": {
          "width": 480,
          "height": 520,
          "content": "## üìß Email Reply Flow\n\n1. **Gmail node** sends the HTML quote as a reply\n2. **Gmail2 node** marks the original email as read\n\nThis ensures clean inbox management and tracking."
        },
        "typeVersion": 1
      },
      {
        "id": "9548c3df-9a99-432e-a7eb-caf2ffa7ef87",
        "name": "IMPORTANT: Replace Sheet IDs",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -840,
          320
        ],
        "parameters": {
          "color": 7,
          "width": 600,
          "height": 280,
          "content": "## üìã Replace These IDs\n\n**CRM Sheet ID:**\n`YOUR_CRM_SHEET_ID_HERE`\n\n**BoM Sheet ID:**\n`YOUR_BOM_SHEET_ID_HERE`\n\n**Price Sheet ID:**\n`YOUR_PRICE_SHEET_ID_HERE`\n\nFind your Sheet ID in the URL:\n`docs.google.com/spreadsheets/d/[SHEET_ID]/edit`"
        },
        "typeVersion": 1
      },
      {
        "id": "b8baf40e-d608-4bea-9545-98a8e864812f",
        "name": "Schedule Trigger",
        "type": "n8n-nodes-base.scheduleTrigger",
        "position": [
          -1560,
          -100
        ],
        "parameters": {
          "rule": {
            "interval": [
              {
                "field": "minutes",
                "minutesInterval": 1
              }
            ]
          }
        },
        "typeVersion": 1.2
      },
      {
        "id": "0aae0d92-b5eb-4dee-be35-4af1f80a9d67",
        "name": "Gmail - Get Latest Email",
        "type": "n8n-nodes-base.gmail",
        "position": [
          -1360,
          -100
        ],
        "webhookId": "ad7b7fb3-2261-44b8-9911-6f517d30aac1",
        "parameters": {
          "limit": 1,
          "filters": {},
          "operation": "getAll"
        },
        "typeVersion": 2.1
      },
      {
        "id": "37e455aa-3869-43de-848d-ef118537b75c",
        "name": "Check Spare Parts Keywords",
        "type": "n8n-nodes-base.if",
        "position": [
          -1060,
          -100
        ],
        "parameters": {
          "options": {},
          "conditions": {
            "options": {
              "version": 1,
              "leftValue": "",
              "caseSensitive": true,
              "typeValidation": "strict"
            },
            "combinator": "or",
            "conditions": [
              {
                "id": "c1d2e3f4-a5b6-7c8d-9e0f-1a2b3c4d5e6f",
                "operator": {
                  "type": "string",
                  "operation": "contains"
                },
                "leftValue": "={{ $json.snippet || $json.text || $json.html || '' }}",
                "rightValue": "yedek par√ßa"
              },
              {
                "id": "0d5115f9-1c10-4c00-a82f-a8a3de8a8152",
                "operator": {
                  "type": "string",
                  "operation": "contains"
                },
                "leftValue": "={{ $json.snippet || $json.text || $json.html || '' }}",
                "rightValue": "Ersatzteil"
              },
              {
                "id": "91bfaac9-c400-4413-9a8e-a6613add9684",
                "operator": {
                  "type": "string",
                  "operation": "contains"
                },
                "leftValue": "={{ $json.snippet || $json.text || $json.html || '' }}",
                "rightValue": "spare parts"
              },
              {
                "id": "1bca2708-9b93-4806-b379-1ef7f7b7b62d",
                "operator": {
                  "type": "string",
                  "operation": "contains"
                },
                "leftValue": "={{ $json.snippet || $json.text || $json.html || '' }}",
                "rightValue": "Ersatzteile"
              }
            ]
          }
        },
        "typeVersion": 2
      },
      {
        "id": "23f8304b-b324-476b-a95b-f94d3bd2a862",
        "name": "AI Agent - Quote Generator",
        "type": "@n8n/n8n-nodes-langchain.agent",
        "position": [
          -780,
          -240
        ],
        "parameters": {
          "text": "=Create a price quote based on the email below. Follow your primary goal and all rules.\n\nSender's Email: {{ $json.To }}\nSubject: {{ $json.Subject }}\nEmail Body: {{ $json.snippet }}\nDate: {{ $('Schedule Trigger').item.json['Readable date'] }}",
          "options": {
            "maxIterations": 100,
            "systemMessage": "**PRIMARY GOAL:** Create a price quote as a complete HTML document, in the EXACT SAME language as the user's email.\n\n**RULES:**\n1.  **DETECT LANGUAGE FIRST.** This is your first action.\n2.  **RESPOND IN DETECTED LANGUAGE.** All text you generate (greetings, table headers, notes, etc.) MUST be in the detected language.\n3.  **OUTPUT MUST BE HTML:** Your final output MUST be a complete HTML document, starting with `<!DOCTYPE html>` and ending with `</html>`. Use the provided HTML template below as a strict guide.\n4.  **TOOLS ARE LANGUAGE-AGNOSTIC:** Your tools (`CRM`, `BoM`, `Price`) fetch data from sheets with English column names (`ProjectCode`, `PartCode`). The data itself may be in any language. **DO NOT TRANSLATE THE DATA** like part descriptions. Just display it as is.\n5.  **CALCULATE EVERYTHING:** You must calculate sub-totals (Quantity * Unit Price) for each item and a final Grand Total. Do not forget this. Use Calculation Tool for every calculation needed!!\n6. **NO MARKDOWN:** Do not wrap your HTML output in Markdown code blocks like \\`\\`\\`html ... \\`\\`\\` . Your entire response must start DIRECTLY with <!DOCTYPE html>.\n7. **CRITICAL: DOUBLE-CHECK MATH:** You MUST calculate the sub-total for each line item (Quantity * Unit Price). Then, you MUST sum ALL sub-totals to get the final Grand Total. Verify your final sum before outputting the HTML. Mathematical accuracy is mandatory.\n8. **CRUCIAL: If mentioned project or Part code does not exist, do NOT provide any proposal. ONLY ask for the real Project Code or Part code!\n\n**EXECUTION FLOW:**\n1.  Find the project code or part codes in the user's email.\n2.  Use the `CRM`, `BoM`, and `Price` tools to get all necessary data.\n3.  Assemble a complete and professional quote by filling in the placeholders in the HTML template below. The entire response must be this HTML.\n\n**HTML TEMPLATE (Use this structure):**\n\n<!DOCTYPE html>\n<html lang=\"[Language Code: tr, en, de]\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>[Quote Title - E.g.: Price Offer]</title>\n    <style>\n        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }\n        .container { width: 100%; max-width: 800px; margin: 20px auto; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }\n        .header { text-align: left; padding-bottom: 20px; border-bottom: 2px solid #005A9C; }\n        .header h1 { color: #005A9C; margin: 0; }\n        .quote-table { width: 100%; border-collapse: collapse; margin-top: 20px; }\n        .quote-table th, .quote-table td { border: 1px solid #ddd; padding: 12px; text-align: left; }\n        .quote-table th { background-color: #f2f2f2; font-weight: bold; }\n        .quote-table tr:nth-child(even) { background-color: #f9f9f9; }\n        .text-right { text-align: right; }\n        .footer { margin-top: 30px; font-size: 0.9em; color: #777; }\n    </style>\n</head>\n<body>\n    <div class=\"container\">\n        <div class=\"header\">\n            <h1>[Quote Title]</h1>\n            <p><strong>[Date Label]:</strong> {{ $('Schedule Trigger').item.json['Readable date'] }}</p>\n        </div>\n\n        <p>[Greeting]</p>\n        <p>[Introduction paragraph about the quote]</p>\n\n        <table class=\"quote-table\">\n            <thead>\n                <tr>\n                    <th>[Part Code Column]</th>\n                    <th>[Description Column]</th>\n                    <th class=\"text-right\">[Quantity Column]</th>\n                    <th class=\"text-right\">[Unit Price Column]</th>\n                    <th class=\"text-right\">[Total Price Column]</th>\n                </tr>\n            </thead>\n            <tbody>\n                <!-- REPEAT FOR EACH ITEM -->\n                <tr>\n                    <td>[Part Code]</td>\n                    <td>[Part Description]</td>\n                    <td class=\"text-right\">[Quantity]</td>\n                    <td class=\"text-right\">[Unit Price] ‚Ç¨</td>\n                    <td class=\"text-right\">[Total Price] ‚Ç¨</td>\n                </tr>\n            </tbody>\n        </table>\n\n        <table style=\"width: 100%; margin-top: 20px;\">\n            <tr>\n                <td style=\"text-align: right; font-weight: bold; font-size: 1.2em;\">\n                    [Grand Total Label]: [Calculated Grand Total] ‚Ç¨\n                </td>\n            </tr>\n        </table>\n\n        <div class=\"footer\">\n            <p><strong>[Notes Title]:</strong></p>\n            <ul>\n                <li>[Validity period note]</li>\n                <li>[Delivery time note]</li>\n                <li>[Payment terms note]</li>\n            </ul>\n            <p>[Closing statement]<br>[Your Company Name]</p>\n        </div>\n    </div>\n</body>\n</html>"
          },
          "promptType": "define"
        },
        "typeVersion": 2
      },
      {
        "id": "42c482fc-bfea-460a-aec1-acb8784521ec",
        "name": "Google Gemini Chat Model",
        "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
        "position": [
          -820,
          0
        ],
        "parameters": {
          "options": {
            "temperature": 0.1,
            "maxOutputTokens": 509600
          },
          "modelName": "models/gemini-2.0-flash-exp"
        },
        "typeVersion": 1
      },
      {
        "id": "90ce437d-148b-4357-a60b-216386bf895f",
        "name": "CRM - Customer Data",
        "type": "n8n-nodes-base.googleSheetsTool",
        "position": [
          -600,
          140
        ],
        "parameters": {
          "options": {},
          "sheetName": {
            "__rl": true,
            "mode": "string",
            "value": "Sheet1"
          },
          "documentId": {
            "__rl": true,
            "mode": "string",
            "value": "YOUR_CRM_SHEET_ID_HERE"
          },
          "descriptionType": "manual",
          "toolDescription": "Fetches customer data. Searches the sheet using a column named `Email` or a column named `ProjectCode`."
        },
        "typeVersion": 4.6
      },
      {
        "id": "2ec1332d-ab34-481c-b142-16d6843495a2",
        "name": "BoM - Bill of Materials",
        "type": "n8n-nodes-base.googleSheetsTool",
        "position": [
          -480,
          140
        ],
        "parameters": {
          "options": {},
          "sheetName": {
            "__rl": true,
            "mode": "string",
            "value": "Sheet1"
          },
          "documentId": {
            "__rl": true,
            "mode": "string",
            "value": "YOUR_BOM_SHEET_ID_HERE"
          },
          "descriptionType": "manual",
          "toolDescription": "Fetches a list of all parts for a given project. Searches the sheet using a column named `ProjectCode`. Input a project ID (e.g., \"PRJ-001\") to this tool."
        },
        "typeVersion": 4.6
      },
      {
        "id": "91609c5b-55a1-4a9c-bb48-f1a239dd5d0d",
        "name": "Price - Pricing Data",
        "type": "n8n-nodes-base.googleSheetsTool",
        "position": [
          -360,
          140
        ],
        "parameters": {
          "options": {},
          "sheetName": {
            "__rl": true,
            "mode": "string",
            "value": "Sheet1"
          },
          "documentId": {
            "__rl": true,
            "mode": "string",
            "value": "YOUR_PRICE_SHEET_ID_HERE"
          },
          "descriptionType": "manual",
          "toolDescription": "Fetches the price for a single part. Searches the sheet using a column named `PartCode` and returns the price from the `UnitPriceEUR` column. You must call this for every part."
        },
        "typeVersion": 4.6
      },
      {
        "id": "a934e309-59d7-4c10-a522-6ef1daea4c08",
        "name": "Calculator Tool",
        "type": "@n8n/n8n-nodes-langchain.toolCalculator",
        "position": [
          -720,
          160
        ],
        "parameters": {},
        "typeVersion": 1
      },
      {
        "id": "a5c22593-8079-4254-b1e3-a977412140b8",
        "name": "Gmail - Send Reply",
        "type": "n8n-nodes-base.gmail",
        "position": [
          -100,
          -240
        ],
        "webhookId": "cdac6611-3404-4a23-ac06-81f76d19bfb0",
        "parameters": {
          "message": "={{ $json.output }}",
          "options": {},
          "messageId": "={{ $('Gmail - Get Latest Email').item.json.id }}",
          "operation": "reply"
        },
        "typeVersion": 2.1
      },
      {
        "id": "4033dcb4-31d7-403f-9f45-8adf6eeac8ac",
        "name": "Gmail - Mark as Read",
        "type": "n8n-nodes-base.gmail",
        "position": [
          120,
          -240
        ],
        "webhookId": "9fc68350-a953-43b7-bff9-81db55c433ce",
        "parameters": {
          "messageId": "={{ $('Gmail - Get Latest Email').item.json.id }}",
          "operation": "markAsRead"
        },
        "typeVersion": 2.1
      }
    ],
    "active": false,
    "pinData": {},
    "settings": {
      "executionOrder": "v1"
    },
    "versionId": "34a045ad-4fb3-48bd-b577-ac48959c92cd",
    "connections": {
      "Calculator Tool": {
        "ai_tool": [
          [
            {
              "node": "AI Agent - Quote Generator",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Schedule Trigger": {
        "main": [
          [
            {
              "node": "Gmail - Get Latest Email",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Gmail - Send Reply": {
        "main": [
          [
            {
              "node": "Gmail - Mark as Read",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "CRM - Customer Data": {
        "ai_tool": [
          [
            {
              "node": "AI Agent - Quote Generator",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Price - Pricing Data": {
        "ai_tool": [
          [
            {
              "node": "AI Agent - Quote Generator",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "BoM - Bill of Materials": {
        "ai_tool": [
          [
            {
              "node": "AI Agent - Quote Generator",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Gmail - Get Latest Email": {
        "main": [
          [
            {
              "node": "Check Spare Parts Keywords",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Google Gemini Chat Model": {
        "ai_languageModel": [
          [
            {
              "node": "AI Agent - Quote Generator",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "AI Agent - Quote Generator": {
        "main": [
          [
            {
              "node": "Gmail - Send Reply",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Check Spare Parts Keywords": {
        "main": [
          [
            {
              "node": "AI Agent - Quote Generator",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    }
  },
  "lastUpdatedBy": 29,
  "workflowInfo": {
    "nodeCount": 17,
    "nodeTypes": {
      "n8n-nodes-base.if": {
        "count": 1
      },
      "n8n-nodes-base.gmail": {
        "count": 3
      },
      "n8n-nodes-base.stickyNote": {
        "count": 6
      },
      "@n8n/n8n-nodes-langchain.agent": {
        "count": 1
      },
      "n8n-nodes-base.scheduleTrigger": {
        "count": 1
      },
      "n8n-nodes-base.googleSheetsTool": {
        "count": 3
      },
      "@n8n/n8n-nodes-langchain.toolCalculator": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.lmChatGoogleGemini": {
        "count": 1
      }
    }
  },
  "categories": [
    {
      "id": 39,
      "name": "CRM"
    },
    {
      "id": 51,
      "name": "Multimodal AI"
    }
  ],
  "image": [
    {
      "id": 1652,
      "url": "https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/ddd_d2045d3f37.png"
    },
    {
      "id": 1653,
      "url": "https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Screenshot_2025_06_30_214522_dbff5bad99.png"
    }
  ]
}