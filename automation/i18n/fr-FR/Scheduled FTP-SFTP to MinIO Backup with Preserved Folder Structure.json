{
  "id": 7377,
  "name": "Sauvegarde FTP/SFTP planifiée vers MinIO avec structure de dossier préservée",
  "views": 57,
  "recentViews": 0,
  "totalViews": 57,
  "createdAt": "2025-08-14T11:07:22.288Z",
  "description": "# Sauvegarde d'objets MinIO automatisée via FTP/SFTP avec planification\n\n$\\mapsto$ Peut fonctionner avec des serveurs FTP/SFTP comme votre site Web Wordpress ! \n\n## Que fait ce flux de travail ?\n\nCe flux de travail effectue des sauvegardes automatisées et périodiques de fichiers depuis un répertoire de serveur FTP ou SFTP vers un bucket S3 MinIO fonctionnant localement ou sur un conteneur/VM/serveur dédié. Il peut également fonctionner si le bucket MinIO est hébergé sur l'infrastructure d'un fournisseur de cloud distant ; il vous suffit de changer l'URL et les clés.\n\n## À qui cela s'adresse-t-il ?\n\nAdministrateurs de stockage, architectes cloud ou DevOps qui ont besoin d'une solution simple et évolutive pour récupérer des données d'un serveur FTP ou SFTP distant.\n\nCela peut également être pratique pour les développeurs Wordpress qui ont besoin de sauvegarder des données d'un serveur hébergeant un site Web Wordpress. \n\nDans ce cas, vous devrez simplement spécifier le dossier que vous souhaitez sauvegarder (cela pourrait être un dossier de wordpress/uploads ou même le dossier racine)\n\n## Comment ça fonctionne\n\nCe flux de travail utilise des commandes pour lister et télécharger des fichiers depuis un répertoire spécifique sur un serveur FTP-SFTP, puis les envoyer à MinIO en utilisant leur version de l'API S3.\n\nLe répertoire source peut être un répertoire spécifique ou l'ensemble du serveur (le répertoire racine)\n\n\n## Exigences\n\nAucune, juste un dossier/répertoire source sur un serveur FTP/SFTP et un bucket de destination sur MinIO. Vous devrez également faire fonctionner MinIO. Vous utilisez Proxmox VE ? Créez un conteneur LXC MinIO : https://community-scripts.github.io/ProxmoxVE/scripts?id=minio\n\n## Besoin d'une sauvegarde d'un autre fournisseur de stockage cloud ?\n\nBesoin d'une sauvegarde automatisée d'un autre fournisseur de stockage cloud ?\n\n$\\mapsto$ Consultez nos modèles, nous l'avons fait avec AWS, Azure et GCP, et nous avons même une version pour les serveurs FTP/SFTP !\n\n$\\odot$ Ces flux de travail peuvent être intégrés à des flux plus importants et modifiés pour mieux répondre à vos besoins ! Vous pouvez, par exemple, remplacer le nœud MinIO par un autre bucket S3 d'un autre fournisseur de stockage cloud (Backblaze, Wasabi, Scaleway, OVH, ...)\n",
  "workflow": {
    "id": "R3ogyLIzRhuYmZQW",
    "meta": {
      "instanceId": "d62d7a3fb314923e2cdedec19423e9669591b9c9c87901bc9332b7c59c101257"
    },
    "name": "Automatic FTP to MinIO Backup",
    "tags": [],
    "nodes": [
      {
        "id": "b8e287f9-e154-4bd3-b8bd-604295a18c38",
        "name": "Sticky Note32",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -960,
          -496
        ],
        "parameters": {
          "color": 5,
          "width": 272,
          "height": 256,
          "content": "## Configure this trigger"
        },
        "typeVersion": 1
      },
      {
        "id": "9c489554-f100-498b-8660-c13643972ee2",
        "name": "List FTP Folder contents",
        "type": "n8n-nodes-base.ftp",
        "position": [
          -640,
          -416
        ],
        "parameters": {
          "path": "/bitnami/wordpress/wp-content/uploads/2025/04",
          "protocol": "sftp",
          "operation": "list",
          "recursive": true
        },
        "credentials": {
          "sftp": {
            "id": "zoB9Ox6ewcWAPTby",
            "name": "SFTP account"
          }
        },
        "typeVersion": 1
      },
      {
        "id": "fcafdbd0-d5a7-47b4-900e-2aad25365ef7",
        "name": "Download content",
        "type": "n8n-nodes-base.ftp",
        "position": [
          -192,
          -416
        ],
        "parameters": {
          "path": "={{ $('List FTP Folder contents').item.json.path }}",
          "protocol": "sftp"
        },
        "credentials": {
          "sftp": {
            "id": "zoB9Ox6ewcWAPTby",
            "name": "SFTP account"
          }
        },
        "typeVersion": 1
      },
      {
        "id": "8b4f3a56-3310-49f5-ae1c-a4e83c19d080",
        "name": "Create Path for MinIO",
        "type": "n8n-nodes-base.set",
        "position": [
          -416,
          -416
        ],
        "parameters": {
          "options": {},
          "assignments": {
            "assignments": [
              {
                "id": "ddfd813d-d97d-42f6-ae21-8ff0e34ca8db",
                "name": "path",
                "type": "string",
                "value": "={{ $json.path.replace(/\\/[^\\/]+$/, '') }}"
              }
            ]
          }
        },
        "typeVersion": 3.4
      },
      {
        "id": "62fb915f-fc9c-4f38-85c9-42231e94cf4d",
        "name": "Upload on MinIO with correct Path",
        "type": "n8n-nodes-base.s3",
        "position": [
          32,
          -416
        ],
        "parameters": {
          "fileName": "=",
          "operation": "upload",
          "bucketName": "myMinIObucket",
          "additionalFields": {
            "parentFolderKey": "=ftpFilesFolder{{ $('Create Path for MinIO').item.json.path }}"
          }
        },
        "credentials": {
          "s3": {
            "id": "p1G9A4UuSXaIH0xy",
            "name": "MinIO S3"
          }
        },
        "typeVersion": 1
      },
      {
        "id": "023cd697-fc44-4cbe-a18f-5b50258deef6",
        "name": "Sticky Note",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -32,
          -496
        ],
        "parameters": {
          "color": 5,
          "width": 272,
          "height": 256,
          "content": "## Create and configure your MinIO Bucket"
        },
        "typeVersion": 1
      },
      {
        "id": "71440038-a34a-42e2-8962-4eedfdcfc832",
        "name": "Sticky Note33",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -960,
          -816
        ],
        "parameters": {
          "width": 1200,
          "height": 304,
          "content": "## Automated FTP-SFTP to MinIO Object Backup with Scheduling \n\nWant to automatically backup Files & Folder from any FTP-SFTP Server (Like your Wordpress Website !) ? You're at the right place \n\nConfigure the Schedule Trigger to best suit your needs, create a SFTP account on N8N and write the path to the files you want to backup (could be a simple folder or an entire server) and don't forget to check the Recursive Option (to get all files !)\n\nThen, simply deploy a MinIO service on your network (Using Proxmox VE ? create a LXC using https://community-scripts.github.io/ProxmoxVE/scripts?id=minio) and configure the path to the bucket where your FTP Files will be (like 192.168.1.123:9000 and your bucket)\n\n## -> Pro Tip, you can change the MinIO Node for an AWS S3, Azure Blob, GCP or any S3 Compatible Storage that you want !"
        },
        "typeVersion": 1
      },
      {
        "id": "d7aaa29e-9996-4802-a3c9-0a267dbcef85",
        "name": "Schedule Trigger",
        "type": "n8n-nodes-base.scheduleTrigger",
        "position": [
          -864,
          -416
        ],
        "parameters": {
          "rule": {
            "interval": [
              {
                "triggerAtHour": 2
              }
            ]
          }
        },
        "typeVersion": 1.2
      }
    ],
    "active": false,
    "pinData": {},
    "settings": {
      "executionOrder": "v1"
    },
    "versionId": "d462d16a-6269-42a3-8be7-849897e23756",
    "connections": {
      "Download content": {
        "main": [
          [
            {
              "node": "Upload on MinIO with correct Path",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Schedule Trigger": {
        "main": [
          [
            {
              "node": "List FTP Folder contents",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Create Path for MinIO": {
        "main": [
          [
            {
              "node": "Download content",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "List FTP Folder contents": {
        "main": [
          [
            {
              "node": "Create Path for MinIO",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    }
  },
  "lastUpdatedBy": 29,
  "workflowInfo": {
    "nodeCount": 8,
    "nodeTypes": {
      "n8n-nodes-base.s3": {
        "count": 1
      },
      "n8n-nodes-base.ftp": {
        "count": 2
      },
      "n8n-nodes-base.set": {
        "count": 1
      },
      "n8n-nodes-base.stickyNote": {
        "count": 3
      },
      "n8n-nodes-base.scheduleTrigger": {
        "count": 1
      }
    }
  },
  "user": {
    "name": "SIENNA",
    "username": "sienna",
    "bio": "French's leading data storage startup ! \n\nOffline Data Storage, Archival Storage, Cloud to Tape, Data Integrity assurance, multi-source backup, ... all automated with N8N ;)",
    "verified": true,
    "links": [
      "sienna.dev"
    ],
    "avatar": "https://gravatar.com/avatar/fd1bea5262825d79d809f0c9ac7b8511dad5825cbcfc5720b3374dbe227a8c35?r=pg&d=retro&size=200"
  },
  "nodes": [
    {
      "id": 38,
      "icon": "fa:pen",
      "name": "n8n-nodes-base.set",
      "codex": {
        "data": {
          "alias": [
            "Set",
            "JS",
            "JSON",
            "Filter",
            "Transform",
            "Map"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                "icon": "🏭",
                "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
              },
              {
                "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                "icon": "☀️",
                "label": "2021: The Year to Automate the New You with n8n"
              },
              {
                "url": "https://n8n.io/blog/automatically-pulling-and-visualizing-data-with-n8n/",
                "icon": "📈",
                "label": "Automatically pulling and visualizing data with n8n"
              },
              {
                "url": "https://n8n.io/blog/database-monitoring-and-alerting-with-n8n/",
                "icon": "📡",
                "label": "Database Monitoring and Alerting with n8n"
              },
              {
                "url": "https://n8n.io/blog/automatically-adding-expense-receipts-to-google-sheets-with-telegram-mindee-twilio-and-n8n/",
                "icon": "🧾",
                "label": "Automatically Adding Expense Receipts to Google Sheets with Telegram, Mindee, Twilio, and n8n"
              },
              {
                "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                "icon": "store",
                "label": "6 e-commerce workflows to power up your Shopify s"
              },
              {
                "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                "icon": "🔗",
                "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
              },
              {
                "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                "icon": "⚙️",
                "label": "Automate your data processing pipeline in 9 steps"
              },
              {
                "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                "icon": "👥",
                "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
              },
              {
                "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                "icon": "⚡️",
                "label": "5 tasks you can automate with the new Notion API "
              },
              {
                "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                "icon": "💡",
                "label": "15 Google apps you can combine and automate to increase productivity"
              },
              {
                "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                "icon": " 🕸️",
                "label": "How uProc scraped a multi-page website with a low-code workflow"
              },
              {
                "url": "https://n8n.io/blog/building-an-expense-tracking-app-in-10-minutes/",
                "icon": "📱",
                "label": "Building an expense tracking app in 10 minutes"
              },
              {
                "url": "https://n8n.io/blog/the-ultimate-guide-to-automate-your-video-collaboration-with-whereby-mattermost-and-n8n/",
                "icon": "📹",
                "label": "The ultimate guide to automate your video collaboration with Whereby, Mattermost, and n8n"
              },
              {
                "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                "icon": "🤖",
                "label": "5 workflow automations for Mattermost that we love at n8n"
              },
              {
                "url": "https://n8n.io/blog/learn-to-build-powerful-api-endpoints-using-webhooks/",
                "icon": "🧰",
                "label": "Learn to Build Powerful API Endpoints Using Webhooks"
              },
              {
                "url": "https://n8n.io/blog/how-a-membership-development-manager-automates-his-work-and-investments/",
                "icon": "📈",
                "label": "How a Membership Development Manager automates his work and investments"
              },
              {
                "url": "https://n8n.io/blog/a-low-code-bitcoin-ticker-built-with-questdb-and-n8n-io/",
                "icon": "📈",
                "label": "A low-code bitcoin ticker built with QuestDB and n8n.io"
              },
              {
                "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                "icon": "🎡",
                "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
              },
              {
                "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                "icon": "🎖",
                "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
              },
              {
                "url": "https://n8n.io/blog/how-goomer-automated-their-operations-with-over-200-n8n-workflows/",
                "icon": "🛵",
                "label": "How Goomer automated their operations with over 200 n8n workflows"
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.set/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Modifier les champs"
      },
      "iconData": {
        "icon": "pen",
        "type": "icon"
      },
      "displayName": "Edit Fields (Set)",
      "typeVersion": 3,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 350,
      "icon": "fa:server",
      "name": "n8n-nodes-base.ftp",
      "codex": {
        "data": {
          "alias": [
            "SFTP",
            "FTP",
            "Binary",
            "File",
            "Transfer"
          ],
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.ftp/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/ftp/"
              }
            ]
          },
          "categories": [
            "Core Nodes",
            "Data & Storage",
            "Development",
            "Utility"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Files",
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "FTP",
        "color": "#303050"
      },
      "iconData": {
        "icon": "server",
        "type": "icon"
      },
      "displayName": "FTP",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 3,
          "name": "Data & Storage"
        },
        {
          "id": 5,
          "name": "Development"
        },
        {
          "id": 7,
          "name": "Utility"
        },
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 365,
      "icon": "file:s3.png",
      "name": "n8n-nodes-base.s3",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.s3/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/s3/"
              }
            ]
          },
          "categories": [
            "Development",
            "Data & Storage"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"output\"]",
      "defaults": {
        "name": "S3"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAABDlBMVEUAAAATbrMSbbQTbbQSbbQTbrQTbrQUbrQTbrQSbrQTbbQSbbQSbbQTbrMSbbQTbrQTbrQTbbQSbbMTbbQSbbQSbbQSbbQTbrQTbbQTbrQSbrQSbrQSbbQSbbMTbrQUbrQTbbMSbbQSbbQSbbQTbLQTbbQTbbQTbrQSbbQTbbQSbbQTbrQTbrQTbbQSbbQSbbQOarITbbQUbrT///8KaLEQa7MNarISbbN3q9MFZa+81uqfxOFyqNIbc7cUbrWNudsvf7wkd7m10ehin81IjsUIZ7H7/f71+fzw9vvd6vTE2+x9r9VrpNBVlslOksfR4vCnyeORu9uCsdc+iMI8h8Ho8PfL4O+ry+SSvNxnoc6vyMA5AAAAMnRSTlMACARbK/r177Z20ZlGk1HYxb9oYiQVEPfyy41LHBnr6KtlQTsvDOPeraKBem43Hob+sqyldq4AAALoSURBVEjH7ZbndqJAFICHKh1EsPfek4ygbjZuYkmvm+3v/yILKgITiPhrz9mT7989zuctDlfAB/8QLE9WCTbbOVE4uVkqFktNmVNOOlmWqJJ5DITTqKkiI9MwBFpmRLXWCDJxgedicC8xjhdwtFqCg5HJEL769TY8iLbuunkeHghf2MmkcqiskO6wJPowNy15hyZkDnEzgkfFk9a4mVI0s8RYw066mZNEzu68wiuxPb+ywlfsbnNE0lN1WtTW30IKfZHhYimK8joUlYpxjNgXyLWj8Wlv3ck0pMuEhm27wAr1qkSofdairxJStV7AtnViGlGmYTrpbToOLYpMNlHLg1DytUSWKU6sk3HfDc3uumpl2mIvkauRQ72BWTT0IVnLJXpiO9PaTeQIeJGgBdJmiqbTaZpO2QNAkHxy/aBbQtd9sn7YJdGBjw5EMD45jN/IHeCHhQhP99MN9ysTIrCILCFDmXweOfw2EDclIbLWCpXPUbmlAQQluqwAFD66zAOURHQ5AVBIKqpMkQAFa0aVmxh4QzmqXAZvYcPkr4jMBsgC9DG9O91w94DcTyFA1pAF+MUBXYBagNyIw0jEA/8nxWiyCIJQvU+jGSqrgXJ1s6JMczW9X859UzIn7uquBsq6DC2O5y83o9HV86Nrm7PlfFeJrINAmPXBxWjNzcrYtfF0tdwFDAjmyPrs8mG0ZTHbZVuMnmcTZOuiSHZzL458893YJn60ojMndS5ELtBW1acjh9XltuM7K7jdTpAuhMg4B034y3Gv7cxuI6+biMNBCLx19MyRTzc9j+c/1+HtxRjdIug2ceu+ftykMqa+hysRKg8oy75YXNmJlnYiO/zhtPHNqoQahMp52a5z9vR6/ufCgFt5erZhastyPlTGy+vzxrFpuPdr7LDeIjgIpQv30AXhDON7nuUheAesEi+GmcV4BQPvg9crWYaLoS/KTLZSx0EUsAI5yBEq2+t2e6xK5AZkAQP/D38B/zR2KYIltgQAAAAASUVORK5CYII="
      },
      "displayName": "S3",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 3,
          "name": "Data & Storage"
        },
        {
          "id": 5,
          "name": "Development"
        }
      ]
    },
    {
      "id": 565,
      "icon": "fa:sticky-note",
      "name": "n8n-nodes-base.stickyNote",
      "codex": {
        "data": {
          "alias": [
            "Comments",
            "Notes",
            "Sticky"
          ],
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Note autocollante",
        "color": "#FFD233"
      },
      "iconData": {
        "icon": "sticky-note",
        "type": "icon"
      },
      "displayName": "Sticky Note",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 839,
      "icon": "fa:clock",
      "name": "n8n-nodes-base.scheduleTrigger",
      "codex": {
        "data": {
          "alias": [
            "Time",
            "Scheduler",
            "Polling",
            "Cron",
            "Interval"
          ],
          "resources": {
            "generic": [],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.scheduletrigger/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"trigger\",\"schedule\"]",
      "defaults": {
        "name": "Déclencheur de planification",
        "color": "#31C49F"
      },
      "iconData": {
        "icon": "clock",
        "type": "icon"
      },
      "displayName": "Schedule Trigger",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    }
  ],
  "categories": [
    {
      "id": 36,
      "name": "Gestion des fichiers"
    },
    {
      "id": 51,
      "name": "IA multimodale"
    }
  ],
  "image": []
}