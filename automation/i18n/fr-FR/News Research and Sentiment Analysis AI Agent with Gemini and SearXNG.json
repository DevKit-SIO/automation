{
  "id": 5286,
  "name": "Agent d'IA pour la recherche d'actualités et l'analyse de sentiment avec Gemini et SearXNG",
  "views": 5508,
  "recentViews": 9,
  "totalViews": 5508,
  "createdAt": "2025-06-25T07:04:57.738Z",
  "description": "Ce workflow n8n fonctionne comme un système à deux agents où chaque agent a une tâche spécialisée. Le processus s'écoule de l'entrée initiale de l'utilisateur à une analyse finale, avec un passage de relais fluide entre les agents.\n\n## Comment ça fonctionne\n1. Le Déclencheur de Chat\nL'ensemble du processus commence lorsque vous envoyez un message en utilisant l'interface de chat de n8n. Ce message sert de prompt ou de requête initiale pour le système.\n\n2. L'Agent de Recherche Prend le Relais\nLe message de l'utilisateur est d'abord envoyé à l'Agent de Recherche. Le travail de cet agent est de comprendre la requête et de rassembler des informations pertinentes. Pour ce faire, il a accès à :\n   * LLM : Google Gemini, qui agit comme le \"cerveau\" de l'agent pour traiter le langage et prendre des décisions.\nOutils :\n   * web_search : Il utilise cet outil (alimenté par votre instance SearXNG auto-hébergée) pour effectuer des recherches en direct sur Internet.\n   * get_current_date : Il peut accéder à la date actuelle, ce qui est utile pour des recherches contextuelles ou sensibles au temps.\n\n   L'Agent de Recherche utilise ces outils pour trouver les informations les plus pertinentes liées à votre requête et les compile ensuite en un résumé concis.\n\n3. Passage à l'Agent d'Analyse de Sentiment\nUne fois que l'Agent de Recherche a terminé sa tâche, il transmet directement ses conclusions à l'Agent d'Analyse de Sentiment.\n\n4. L'Analyse Finale\nL'Agent d'Analyse de Sentiment reçoit le texte de l'Agent de Recherche. Son seul but, tel que défini par son prompt système, est d'analyser le sentiment des informations fournies. Il détermine si le contenu est positif, négatif ou neutre et formule une réponse finale.\n\nCette analyse finale est ensuite renvoyée à vous dans le chat, complétant le workflow.\n\n## Étapes de configuration\n1.  **Sélectionnez le Modèle de Langage (LLM) :** Ce workflow est préconfiguré avec Google Gemini. Vous pouvez sélectionner un modèle différent pour les agents si nécessaire.\n2.  **Configurer les Identifiants LLM :** Assurez-vous que des identifiants valides pour votre LLM choisi sont correctement configurés dans votre instance n8n.\n3.  **Configurer la Connexion SearXNG :** Configurez le nœud pour se connecter à votre instance SearXNG auto-hébergée. Cela permet les capacités de recherche web de l'agent.\n4.  **Définir la Tâche de l'Agent de Recherche :** Personnalisez le prompt système pour l'\"Agent de Recherche\" afin de définir son rôle, ses instructions et comment il doit mener ses recherches.\n5.  **Définir la Tâche de l'Agent d'Analyse de Sentiment :** Ajustez le prompt système pour l'\"Agent d'Analyse de Sentiment\" afin de spécifier comment il doit analyser les informations fournies par l'Agent de Recherche.\n6.  **Tester le Workflow :** Utilisez l'interface de chat intégrée dans le canevas n8n pour envoyer un message et vérifier que les agents fonctionnent correctement.\n",
  "workflow": {
    "id": "1MSUwpnR1sroIquE",
    "meta": {
      "instanceId": "69133932b9ba8e1ef14816d0b63297bb44feb97c19f759b5d153ff6b0c59e18d",
      "templateCredsSetupCompleted": true
    },
    "name": "Stock Sentiment Analysis",
    "tags": [],
    "nodes": [
      {
        "id": "3a8dc8ac-01fb-4619-9193-238b44502f6f",
        "name": "When chat message received",
        "type": "@n8n/n8n-nodes-langchain.chatTrigger",
        "position": [
          100,
          -40
        ],
        "webhookId": "f5961754-ee99-49c0-819d-a50ce2daa5a6",
        "parameters": {
          "options": {}
        },
        "typeVersion": 1.1
      },
      {
        "id": "524ce176-1dfd-49ab-9141-ef5f23ac4823",
        "name": "get_current_date",
        "type": "n8n-nodes-base.dateTimeTool",
        "position": [
          720,
          220
        ],
        "parameters": {
          "options": {},
          "descriptionType": "manual",
          "toolDescription": "use this tool to find out the current date and time."
        },
        "typeVersion": 2
      },
      {
        "id": "b34db507-28b6-4336-8d49-19c5d9677596",
        "name": "web_search",
        "type": "@n8n/n8n-nodes-langchain.toolSearXng",
        "position": [
          540,
          220
        ],
        "parameters": {
          "options": {
            "language": "en"
          }
        },
        "credentials": {
          "searXngApi": {
            "id": "4cAQXGGcZt1s4VYp",
            "name": "SearXNG account"
          }
        },
        "typeVersion": 1
      },
      {
        "id": "7dcc25ea-62dc-4e9b-a3ca-3261c3bb2e82",
        "name": "Research Agent",
        "type": "@n8n/n8n-nodes-langchain.agent",
        "position": [
          360,
          -40
        ],
        "parameters": {
          "options": {
            "systemMessage": "You are a financial research assistant. Your task is to find and summarize the latest news for a given company name or stock ticker.\n\nInstructions:\n\nFirst, use the get_current_date tool to determine the date range for the last 7 days.\nPerform two separate web searches using the web_search tool: one with the company's full name and one with its stock ticker. Use the date range in your search queries to filter for news from the last week only.\n\nAfter reviewing the search results, provide a summary of each news article. The summary should cover the key events, announcements, and market sentiment discussed in the articles.\n"
          }
        },
        "typeVersion": 2
      },
      {
        "id": "955e2558-50e8-4619-87fd-f63c2a6d4171",
        "name": "Sentiment Analysis Agent",
        "type": "@n8n/n8n-nodes-langchain.agent",
        "position": [
          760,
          -40
        ],
        "parameters": {
          "text": "=User asked about: {{ $('When chat message received').item.json.chatInput }}\n\nLatest news:\n {{ $json.output }}\n",
          "options": {
            "systemMessage": "You are a Financial Sentiment Analyst. You will be provided with a news summary. Your task is to analyze this summary and categorize its sentiment from an investor's perspective.\n\nInstructions:\n1. Read all the news.\n2. Determine the overall sentiment (Positive, Negative, or Neutral) based on the potential impact on the company's financial performance, stock price, or market reputation.\n3. Write a justification that references specific points from the news summaries.\n\nOutput Format:\nSentiment: {sentiment_category}\nJustification: {Your detailed justification}"
          },
          "promptType": "define"
        },
        "typeVersion": 2
      },
      {
        "id": "1f875bfc-5a26-4a40-974f-56991ce695f4",
        "name": "Gemini 2.5 Flash",
        "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
        "position": [
          340,
          220
        ],
        "parameters": {
          "options": {},
          "modelName": "models/gemini-2.5-flash"
        },
        "credentials": {
          "googlePalmApi": {
            "id": "jLOqyTR4yTT1nYKi",
            "name": "Google Gemini(PaLM) Api account"
          }
        },
        "typeVersion": 1
      },
      {
        "id": "4cb25891-5df9-4949-b46c-116b17918148",
        "name": "Sticky Note",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -400,
          -160
        ],
        "parameters": {
          "width": 380,
          "height": 520,
          "content": "## **Set up steps**\n\n1.  **Select the Language Model (LLM):** This workflow is pre-configured with Google Gemini. You can select a different model for the agents as needed.\n2.  **Configure LLM Credentials:** Ensure that valid credentials for your chosen LLM are correctly set up within your n8n instance.\n3.  **Set Up the SearXNG Connection:** Configure the node to connect to your self-hosted SearXNG instance. This enables the agent's web search capabilities.\n4.  **Define the Research Agent's Task:** Customize the system prompt for the \"Research Agent\" to define its role, instructions, and how it should conduct its research.\n5.  **Define the Sentiment Analysis Agent's Task:** Adjust the system prompt for the \"Sentiment Analysis Agent\" to specify how it should analyze the information provided by the Research Agent.\n6.  **Test the Workflow:** Use the built-in chat interface in the n8n canvas to send a message and verify that the agents are functioning correctly."
        },
        "typeVersion": 1
      }
    ],
    "active": false,
    "pinData": {},
    "settings": {
      "executionOrder": "v1"
    },
    "versionId": "51d9d96d-7aa1-4202-875c-05b52ca675a5",
    "connections": {
      "web_search": {
        "ai_tool": [
          [
            {
              "node": "Research Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Research Agent": {
        "main": [
          [
            {
              "node": "Sentiment Analysis Agent",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Gemini 2.5 Flash": {
        "ai_languageModel": [
          [
            {
              "node": "Sentiment Analysis Agent",
              "type": "ai_languageModel",
              "index": 0
            },
            {
              "node": "Research Agent",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "get_current_date": {
        "ai_tool": [
          [
            {
              "node": "Research Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "When chat message received": {
        "main": [
          [
            {
              "node": "Research Agent",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    }
  },
  "lastUpdatedBy": 29,
  "workflowInfo": {
    "nodeCount": 7,
    "nodeTypes": {
      "n8n-nodes-base.stickyNote": {
        "count": 1
      },
      "n8n-nodes-base.dateTimeTool": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.agent": {
        "count": 2
      },
      "@n8n/n8n-nodes-langchain.chatTrigger": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.toolSearXng": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.lmChatGoogleGemini": {
        "count": 1
      }
    }
  },
  "user": {
    "name": "Mihai Farcas",
    "username": "mihailtd",
    "bio": "Full-stack developer with 5+ years streamlining healthcare processes. Proficient in NodeJS, VueJS, MongoDB, PostgreSQL, Kubernetes, and n8n. Ready to optimize your workflows – book a consult via my link.",
    "verified": true,
    "links": [
      "https://mihai.ltd"
    ],
    "avatar": "https://gravatar.com/avatar/a73ca84b07b557e95322815bc04859245e9243c7cfd5bf9a14568fd0ce3e72c5?r=pg&d=retro&size=200"
  },
  "nodes": [
    {
      "id": 565,
      "icon": "fa:sticky-note",
      "name": "n8n-nodes-base.stickyNote",
      "codex": {
        "data": {
          "alias": [
            "Comments",
            "Notes",
            "Sticky"
          ],
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Note Collante",
        "color": "#FFD233"
      },
      "iconData": {
        "icon": "sticky-note",
        "type": "icon"
      },
      "displayName": "Sticky Note",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 1119,
      "icon": "fa:robot",
      "name": "@n8n/n8n-nodes-langchain.agent",
      "codex": {
        "data": {
          "alias": [
            "LangChain",
            "Chat",
            "Conversational",
            "Plan and Execute",
            "ReAct",
            "Tools"
          ],
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Agents",
              "Root Nodes"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Agent IA",
        "color": "#404040"
      },
      "iconData": {
        "icon": "robot",
        "type": "icon"
      },
      "displayName": "AI Agent",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1247,
      "icon": "fa:comments",
      "name": "@n8n/n8n-nodes-langchain.chatTrigger",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.chattrigger/"
              }
            ]
          },
          "categories": [
            "Core Nodes",
            "Langchain"
          ]
        }
      },
      "group": "[\"trigger\"]",
      "defaults": {
        "name": "Lorsque le message de chat est reçu"
      },
      "iconData": {
        "icon": "comments",
        "type": "icon"
      },
      "displayName": "Chat Trigger",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1262,
      "icon": "file:google.svg",
      "name": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.lmchatgooglegemini/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Language Models",
              "Root Nodes"
            ],
            "Language Models": [
              "Chat Models (Recommended)"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Modèle de Chat Google Gemini"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNDggNDgiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNNDQuNSAyMEgyNHY4LjVoMTEuOEMzNC43IDMzLjkgMzAuMSAzNyAyNCAzN2MtNy4yIDAtMTMtNS44LTEzLTEzczUuOC0xMyAxMy0xM2MzLjEgMCA1LjkgMS4xIDguMSAyLjlsNi40LTYuNEMzNC42IDQuMSAyOS42IDIgMjQgMiAxMS44IDIgMiAxMS44IDIgMjRzOS44IDIyIDIyIDIyYzExIDAgMjEtOCAyMS0yMiAwLTEuMy0uMi0yLjctLjUtNCIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBmaWxsPSIjRkJCQzA1IiBkPSJNMCAzN1YxMWwxNyAxM3oiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiNFQTQzMzUiIGQ9Im0wIDExIDE3IDEzIDctNi4xTDQ4IDE0VjBIMHoiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiMzNEE4NTMiIGQ9Im0wIDM3IDMwLTIzIDcuOSAxTDQ4IDB2NDhIMHoiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiM0Mjg1RjQiIGQ9Ik00OCA0OCAxNyAyNGwtNC0zIDM1LTEweiIgY2xpcC1wYXRoPSJ1cmwoI2IpIi8+PC9zdmc+"
      },
      "displayName": "Google Gemini Chat Model",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1295,
      "icon": "file:searXng.svg",
      "name": "@n8n/n8n-nodes-langchain.toolSearXng",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.toolsearxng"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Tools"
            ],
            "Tools": [
              "Other Tools"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "SearXNG"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyBoZWlnaHQ9IjkybW0iIHZpZXdCb3g9IjAgMCA5MiA5MiIgd2lkdGg9IjkybW0iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTQwLjkyMTMwMyAtMTcuNDE2NTI2KSI+PGcgZmlsbD0ibm9uZSI+PGNpcmNsZSBjeD0iNzUiIGN5PSI5MiIgcj0iMCIgc3Ryb2tlPSIjMDAwIiBzdHJva2Utd2lkdGg9IjEyIi8+PGNpcmNsZSBjeD0iNzUuOTIxIiBjeT0iNTMuOTAzIiByPSIzMCIgc3Ryb2tlPSIjMzA1MGZmIiBzdHJva2Utd2lkdGg9IjEwIi8+PHBhdGggZD0ibTY3LjUxNDg0OSAzNy45MTUyNGExOCAxOCAwIDAgMSAyMS4wNTE0NzUgMy4zMTI0MDcgMTggMTggMCAwIDEgMy4xMzczMTIgMjEuMDc4MjgyIiBzdHJva2U9IiMzMDUwZmYiIHN0cm9rZS13aWR0aD0iNSIvPjwvZz48cGF0aCBkPSJtMy43MDYgMTIyLjA5aDE4Ljg0NnYzOS45NjNoLTE4Ljg0NnoiIGZpbGw9IiMzMDUwZmYiIHRyYW5zZm9ybT0ibWF0cml4KC42OTE3MDU4MSAtLjcyMjE3OTM5IC43MjIxNzkzOSAuNjkxNzA1ODEgMCAwKSIvPjwvZz48L3N2Zz4K"
      },
      "displayName": "SearXNG",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    }
  ],
  "categories": [
    {
      "id": 32,
      "name": "Recherche de Marché"
    },
    {
      "id": 47,
      "name": "Chatbot IA"
    }
  ],
  "image": []
}