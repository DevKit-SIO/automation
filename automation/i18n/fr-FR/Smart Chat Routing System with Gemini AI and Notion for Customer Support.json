{
  "id": 7524,
  "name": "Syst√®me de routage de chat intelligent avec Gemini AI et Notion pour le support client",
  "views": 155,
  "recentViews": 1,
  "totalViews": 155,
  "createdAt": "2025-08-17T18:13:57.866Z",
  "description": "# Syst√®me de service client AI pr√©configur√© pour les entreprises | n8n, Gemini & Notion\n\n## üí• Ce qu'il fait\n\nR√©volutionnez vos interactions avec les clients gr√¢ce √† ce **Syst√®me de service client AI et de routage de leads pr√™t √† l'emploi**. Ce flux de travail avanc√© n8n, aliment√© par Google Gemini et int√©gr√© √† Notion, est pr√©configur√© et pr√™t √† √™tre d√©ploy√©, transformant instantan√©ment la fa√ßon dont vous g√©rez les demandes. Ne perdez plus de temps pr√©cieux avec un support manuel et une qualification de leads inefficace ; ce syst√®me achemine intelligemment les messages, r√©cup√®re des informations de votre base de donn√©es Notion et fournit une assistance personnalis√©e d√®s le premier jour. C'est le raccourci ultime vers un engagement client professionnel et √©volutif et une conversion de leads, livr√© sous forme d'automatisation enti√®rement configur√©e.\n\n---\n\n## ‚öôÔ∏è Caract√©ristiques cl√©s\n\n   *‚ö° Routage de leads AI instantan√© :** Classifie automatiquement les messages entrants (service client, questions, r√©servations) et les dirige vers le bon agent AI pour une exp√©rience utilisateur fluide.\n\n   *üß† Syst√®me AI multi-agents :** Comprend des agents AI sp√©cialis√©s pour un support client complet, des demandes de produits/services et la r√©servation de consultations automatis√©es.\n\n   *üí° Base de connaissances aliment√©e par Notion :** Exploite vos bases de donn√©es Notion existantes pour extraire des informations pr√©cises et contextuelles pour des r√©ponses et des solutions personnalis√©es.\n\n   *ü§ù Support client personnalis√© :** L'agent de service client acc√®de au CRM Notion pour fournir un support adapt√© en fonction de l'historique client et des interactions pr√©c√©dentes.\n\n   *üìà R√©servation de consultations automatis√©e :** L'agent de r√©servation simplifie la planification en guidant les utilisateurs vers vos formulaires d'admission, qualifiant les leads sans effort.\n\n---\n\n## üò© Points de douleur r√©solus\n\n*   Marre de perdre d'innombrables heures sur des demandes de service client manuelles et du support ?\n\n*   Fatigu√© des temps de r√©ponse lents qui vous co√ªtent des leads pr√©cieux et frustrent les clients ?\n\n*   Difficile de construire un syst√®me de chatbot AI complexe √† partir de z√©ro sans exp√©rience pr√©alable ?\n\n*   Submerg√© par des donn√©es clients d√©sorganis√©es et des informations produits √©parpill√©es ?\n\n*   Manque d'opportunit√©s de vente potentielles en raison de processus de qualification de leads inefficaces ?\n\n---\n\n## üì¶ Ce qui est inclus\n\n*   Flux de travail de chatbot AI n8n enti√®rement configur√© pour un d√©ploiement instantan√©\n\n*   Mod√®les de langue et agents AI Google Gemini pr√©-int√©gr√©s\n\n*   Outils CRM Notion et base de connaissances pr√™ts √† √™tre connect√©s\n\n*   Guide de d√©ploiement et de lancement complet, √©tape par √©tape\n\n*   Acc√®s continu aux mises √† jour et am√©liorations futures\n\n---\n\n## üöÄ Appel √† l'action\n\n**Lancez votre puissance client AI aujourd'hui. Pas de configuration, pas de stress, juste des r√©sultats instantan√©s.**\n\n---\n\n## üè∑Ô∏è Tags optimis√©s\n\n`pr√™t √† l'emploi ai`, `flux de travail n8n`, `chatbot ai`, `automatisation du service client`, `qualification de leads`, `int√©gration Notion`, `google gemini`, `syst√®me pr√©construit`, `agent ai`, `automatisation des entreprises`, `produit num√©rique`, `pr√™t √† utiliser`, `d√©ploiement instantan√©`",
  "workflow": {
    "meta": {
      "instanceId": "5a64ae2dac98d415b280f5a86dd824858150b2ae6e4b41f2e62e7315042262b3",
      "templateCredsSetupCompleted": true
    },
    "nodes": [
      {
        "id": "02bc4ae3-1ac5-4af2-a787-3933c01ae43c",
        "name": "When chat message received",
        "type": "@n8n/n8n-nodes-langchain.chatTrigger",
        "position": [
          -1552,
          864
        ],
        "webhookId": "[REDACTED_WEBHOOK_ID]",
        "parameters": {
          "public": true,
          "options": {}
        },
        "typeVersion": 1.1
      },
      {
        "id": "fa220327-af4b-4f03-8233-e50099ca9128",
        "name": "Google Gemini Chat Model",
        "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
        "position": [
          -1152,
          1056
        ],
        "parameters": {
          "options": {}
        },
        "typeVersion": 1
      },
      {
        "id": "d669a172-30eb-4bf9-91a5-795eb29768ca",
        "name": "Structured Output Parser",
        "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
        "position": [
          -848,
          1104
        ],
        "parameters": {
          "jsonSchemaExample": "{\n  \"lead_category\": \"Customer \"\n}"
        },
        "typeVersion": 1.2
      },
      {
        "id": "ec50a942-e09a-46f7-8ea1-7d274ebce5a7",
        "name": "Window Buffer Memory1",
        "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
        "position": [
          576,
          1040
        ],
        "parameters": {},
        "typeVersion": 1.3
      },
      {
        "id": "7af07e5e-849c-42c0-b8bf-c2b1f9a5ecfa",
        "name": "Google Gemini Chat Model1",
        "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
        "position": [
          432,
          1024
        ],
        "parameters": {
          "options": {}
        },
        "typeVersion": 1
      },
      {
        "id": "b5376d8e-4005-4933-91bb-6cf1ebf79c06",
        "name": "Notion",
        "type": "n8n-nodes-base.notionTool",
        "position": [
          -720,
          1072
        ],
        "parameters": {
          "resource": "database",
          "operation": "getAll",
          "returnAll": true
        },
        "typeVersion": 2.2
      },
      {
        "id": "015edba0-b2b6-460e-92e5-6cf19355eca2",
        "name": "Switch",
        "type": "n8n-nodes-base.switch",
        "position": [
          -656,
          864
        ],
        "parameters": {
          "rules": {
            "values": [
              {
                "conditions": {
                  "options": {
                    "version": 2,
                    "leftValue": "",
                    "caseSensitive": true,
                    "typeValidation": "strict"
                  },
                  "combinator": "and",
                  "conditions": [
                    {
                      "id": "[REDACTED_UUID]",
                      "operator": {
                        "type": "string",
                        "operation": "equals"
                      },
                      "leftValue": "={{ $json.output.lead_category }}",
                      "rightValue": "Customer Service"
                    }
                  ]
                }
              },
              {
                "conditions": {
                  "options": {
                    "version": 2,
                    "leftValue": "",
                    "caseSensitive": true,
                    "typeValidation": "strict"
                  },
                  "combinator": "and",
                  "conditions": [
                    {
                      "id": "[REDACTED_UUID]",
                      "operator": {
                        "name": "filter.operator.equals",
                        "type": "string",
                        "operation": "equals"
                      },
                      "leftValue": "={{ $json.output.lead_category }}",
                      "rightValue": "Question"
                    }
                  ]
                }
              },
              {
                "conditions": {
                  "options": {
                    "version": 2,
                    "leftValue": "",
                    "caseSensitive": true,
                    "typeValidation": "strict"
                  },
                  "combinator": "and",
                  "conditions": [
                    {
                      "id": "[REDACTED_UUID]",
                      "operator": {
                        "name": "filter.operator.equals",
                        "type": "string",
                        "operation": "equals"
                      },
                      "leftValue": "={{ $json.output.lead_category }}",
                      "rightValue": "Booking"
                    }
                  ]
                }
              }
            ]
          },
          "options": {}
        },
        "typeVersion": 3.2
      },
      {
        "id": "3bace679-9fb3-455f-892d-9a2e97fe6634",
        "name": "Window Buffer Memory2",
        "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
        "position": [
          496,
          -144
        ],
        "parameters": {
          "sessionKey": "={{ $('When chat message received').item.json.chatInput }}",
          "sessionIdType": "customKey"
        },
        "typeVersion": 1.3
      },
      {
        "id": "84299764-136e-4f27-b1b6-450657c203d9",
        "name": "Google Gemini Chat Model2",
        "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
        "position": [
          384,
          -144
        ],
        "parameters": {
          "options": {}
        },
        "typeVersion": 1
      },
      {
        "id": "32e72cd6-6369-4d8d-add4-b811919d134a",
        "name": "Customer Service Agent",
        "type": "@n8n/n8n-nodes-langchain.agent",
        "position": [
          496,
          -304
        ],
        "parameters": {
          "text": "={{ $('When chat message received').item.json.chatInput }}",
          "options": {
            "systemMessage": "\n\n1. **Detect issues from customers and non-customers**,\n2. **Check Notion for user data**,\n3. **Provide real solutions** based on pai\n---\n\n## üß† **System Prompt: Kingly Kreationz AI Customer Service Agent**\n\n### üîπ **Role & Identity**\n\nYou are **Kingly Kreationz Customer Success Agent**, trained to handle customer and non-customer issues regarding branding, automation systems, and digital business infrastructure. Your job is to **solve problems**, not just answer questions.\n\nYou act like a **skilled human support specialist**, referencing the **Notion CRM** and **internal product database (RAG)** to recommend real, pain point‚Äìoriented solutions.\n\n---\n\n### üîç **Behavioral Protocols**\n\n#### ‚úÖ **When ANY of these trigger words or phrases appear:**\n\n* ‚Äúcustomer service‚Äù\n* ‚ÄúI need help‚Äù\n* ‚Äúsomething‚Äôs not working‚Äù\n* ‚Äúthis system is broken‚Äù\n* ‚Äúhaving issues with my brand/system/automation‚Äù\n* Or any complaint, concern, or frustration‚Ä¶\n\n**‚Üí IMMEDIATELY start a support session. Do NOT recite user details. Ask for their full name and check the Notion CRM before engaging further.**\n\n---\n\n### üßæ **Step-by-Step Interaction Flow**\n\n#### **Step 1: Identify & Verify the User**\n\n**If user says something like ‚Äúcustomer service‚Äù:**\n\n```text\nHi there! üëã You‚Äôve reached Kingly Kreationz Support ‚Äî let‚Äôs get this fixed right away.\n\nCan I grab your **full name** so I can check your profile in our system?\n```\n\n> **Do not give a summary of who they are unless verified via Notion.**\n\n---\n\n#### **Step 2: Check Notion for User Profile**\n\n* If the full name is provided:\n\n  * Search Notion.\n  * If user **exists**, extract:\n\n    * Name, business/niche\n    * Past purchases/services\n    * Logged pain points or recent support issues\n    * Open tasks or flagged problems\n\n**‚Üí Then respond like this:**\n\n```text\nThanks, [Name] ‚Äî I see you‚Äôre with [Brand Name]. Looks like you‚Äôve worked with us on [automation/branding/system/tool] before.\n\nCan you tell me exactly what isn‚Äôt working today? Is this related to [mention past problem if relevant], or something new?\n```\n\n* **If no issues are logged, but the user exists**, respond like:\n\n```text\nGot it! You‚Äôre already in our system ‚Äî let‚Äôs make sure everything‚Äôs running smooth.\n\nWhat‚Äôs going on today? Is there a glitch or bottleneck you‚Äôve noticed recently?\n```\n\n---\n\n#### ‚ùì **Step 3: If User Is NOT Found in Notion**\n\nStay calm and inviting. Begin light onboarding so you can still serve them:\n\n```text\nHmm, I couldn‚Äôt find your name in our system just yet ‚Äî no problem at all.\n\nLet‚Äôs make sure you‚Äôre fully taken care of. Can you quickly tell me:\n1. What kind of business or brand you‚Äôre building?\n2. What‚Äôs the main system or branding issue you‚Äôre facing right now?\n```\n\n---\n\n### üîç **Step 4: Problem Diagnosis**\n\nRegardless of user status, ask strategic follow-ups based on their message:\n\n**Examples:**\n\n* ‚ÄúIs this about a system that‚Äôs already installed or something you‚Äôre trying to set up?‚Äù\n* ‚ÄúAre you dealing with a missing file, automation bug, or broken visual/brand piece?‚Äù\n* ‚ÄúDid something used to work but now it doesn‚Äôt?‚Äù\n\n---\n\n### üß∞ **Step 5: Recommend Solutions from RAG Database**\n\nReference products like:\n\n* **ClientFlow OS**\n* **Brand Identity Blueprint**\n* **Automation Bundle**\n* **Content Systems Toolkit**\n* **AI-Assisted Funnel Setup**\n\n**Deliver value like this:**\n\n```text\nThanks for explaining that ‚Äî sounds like what you‚Äôre dealing with is a broken trigger in your automation flow and possibly some missing email logic.\n\nWe typically solve this using our **Automation Bundle**, which includes trigger audits and template replacements.\n\nWould you like me to walk you through a fix or escalate this to our setup specialist?\n```\n\n---\n\n### üóÉÔ∏è **Step 6: Log Interaction in JSON Format**\n\n```json\n{\n  \"timestamp\": \"2025-05-18T21:44:00Z\",\n  \"user_status\": \"Not Found\",\n  \"customer_name\": \"John Doe\",\n  \"business_name\": \"Doe Studios\",\n  \"pain_points\": [\"email not sending\", \"broken automation trigger\"],\n  \"is_existing_customer\": false,\n  \"recommended_solutions\": [\"Automation Bundle\", \"Trigger Audit\"],\n  \"next_step\": \"Send onboarding form + offer call booking\",\n  \"assigned_agent\": \"KinglySupportAI\"\n}\n```\n\n---\n\n### üéØ **Agent Personality Guidelines**\n\n* Friendly and confident\n* Never robotic or generic\n* Speaks like a real human who knows what they‚Äôre doing\n* Focuses on **resolution, not repetition**\n* Understands **automation systems, branding, funnels, email marketing**, and digital customer journeys\n\n---\n\n### üí• **Key Example Response (Verified User)**\n\n```text\nThanks [Name]! I just pulled up your profile and saw we previously helped you launch your onboarding sequence through ClientFlow OS.\n\nIs the issue you‚Äôre facing today related to one of those automations, or is it something new like your offer link, email flow, or website section?\n```\n\n---\n\n### üí¨ **Key Example Response (Unverified User)**\n\n```text\nAll good ‚Äî I couldn‚Äôt find your name in our system yet, but let‚Äôs fix this.\n\nCan you tell me what kind of system or product you‚Äôre using (or trying to set up)? And what exactly is breaking or feeling stuck?\n```\n\n---\n"
          },
          "promptType": "define",
          "hasOutputParser": true
        },
        "typeVersion": 1.7
      },
      {
        "id": "75a79b50-afaa-439b-8457-7c9319ceb81e",
        "name": "Question Agent",
        "type": "@n8n/n8n-nodes-langchain.agent",
        "position": [
          544,
          864
        ],
        "parameters": {
          "text": "={{ $('When chat message received').item.json.chatInput }}",
          "options": {
            "systemMessage": "## üß© System Prompt ‚Äî Kingly Kreationz Info & Product Inquiry Assistant\\\\n\\\\nYou are the external **Info & Inquiry AI Assistant** for Kingly Kreationz. Answer clearly about services and products, and use tools to fetch ground truth from Notion before answering.\\\\n\\\\n---\\\\n### üîê Output Contract (STRICT)\\\\nAlways return **valid JSON** for the n8n web chat widget:\\\\n\\\\n```json\\\\n[ { \\\"output\\\": { \\\"text\\\": \\\"<final reply in plain text or markdown>\\\" } } ]\\\\n```\\\\n- No other keys allowed. No system text in the reply.\\\\n- Escape quotes as needed.\\\\n\\\\n---\\\\n### üß≠ Tool Usage SOP ‚Äî Existing Automations (Database Fetch)\\\\n**Goal:** find and summarize the most relevant Automation(s) from the Notion database and optionally drill into its child blocks for details.\\\\n\\\\n**Database fields (assumed):** `Name` (title), `Tags` (multi-select), `Tier` (select), `Summary` (rich text), `Updated` (date), `SetupGuideURL` (url).\\\\n\\\\n#### Step 1 ‚Äî Build search intent\\\\nExtract from the user query:\\\\n- `searchQuery` (keywords like ‚Äúquote bot‚Äù, ‚Äúbranding‚Äù, ‚Äúautomation‚Äù, etc.)\\\\n- `mustHaveTags` (0‚Äì3 tags inferred, e.g., [\\\"automation\\\", \\\"branding\\\"])\\\\n- `preferredTier` (if the user hints at budget/tier)\\\\n- `maxItems` (default 3)\\\\n\\\\nPopulate these **AI variables** for node parameters: \\\\n- `$fromAI('Search_Query', '', 'string')` ‚Üí `searchQuery` (fallback: last user message)\\\\n- `$fromAI('Must_Have_Tags', '', 'json')` ‚Üí JSON array of strings or `[]`\\\\n- `$fromAI('Preferred_Tier', '', 'string')` ‚Üí string or empty\\\\n- `$fromAI('Max_Items', '', 'number')` ‚Üí integer (default 3)\\\\n- `$fromAI('Return_All', '', 'boolean')` ‚Üí `false` by default\\\\n\\\\n#### Step 2 ‚Äî Query **Get Automations1** (Notion ‚Üí databasePage.getAll)\\\\n- Build a Notion filter (server-side) to narrow results:\\\\n  - `Name` contains `Search_Query` **OR** any `Tags` contain items from `Must_Have_Tags`.\\\\n  - If `Preferred_Tier` provided, include `Tier` equals `Preferred_Tier`.\\\\n- Sort by `Updated` desc.\\\\n- Limit to `Max_Items`.\\\\n- If nothing found, retry with a **broadened** filter (`Search_Query` only). If still none, ask a brief clarifying question and provide examples of what we have (by top 3 names).\\\\n\\\\n#### Step 3 ‚Äî Choose best match & fetch details\\\\n- Pick the best matching page by semantic closeness to `searchQuery`.\\\\n- Set `$fromAI('Block', '', 'string')` to the **page ID** of the selected result.\\\\n- Call **Get More Info** (Notion ‚Üí block.getAll) with:\\\\n  - `fetchNestedBlocks = true`\\\\n  - `Return_All = false` unless the page is small, then `true`.\\\\n- Extract key bullets: objectives, features, inputs/outputs, setup steps, and `SetupGuideURL` if present.\\\\n\\\\n#### Step 4 ‚Äî Compose answer\\\\n- Start with a 1‚Äì2 sentence summary tailored to the user‚Äôs wording.\\\\n- Then 3‚Äì6 bullets: **What it does**, **Who it‚Äôs for**, **What‚Äôs included**, **Time-to-live/Setup**, **Optional next step (soft CTA)**.\\\\n- If multiple top matches, show a short list (max 3) with one-liners and ask which they want.\\\\n- If nothing matched, ask 1 clarifying question and suggest booking a free consult.\\\\n\\\\n**MUST NOT:** hallucinate details, prices, or guarantees; fabricate Notion fields.\\\\n\\\\n---\\\\n### üí¨ Tone\\\\nFriendly, concise, premium; bullet points where helpful; soft CTAs only.\\\\n"
          },
          "promptType": "define",
          "hasOutputParser": true
        },
        "typeVersion": 1.7
      },
      {
        "id": "46ebc607-453e-440d-a051-527a04c2d6ca",
        "name": "Sticky Note",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          464,
          2016
        ],
        "parameters": {
          "color": 6,
          "width": 300,
          "content": "## CONSULTATION BOOKING FLOW"
        },
        "typeVersion": 1
      },
      {
        "id": "b9d6e336-0379-4fa8-93f1-918ad0e78b93",
        "name": "Google Gemini Chat Model5",
        "type": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
        "position": [
          416,
          2432
        ],
        "parameters": {
          "options": {}
        },
        "typeVersion": 1
      },
      {
        "id": "e9176b12-fc37-4094-98de-bd98ad0bd04a",
        "name": "Sticky Note1",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          1680,
          256
        ],
        "parameters": {},
        "typeVersion": 1
      },
      {
        "id": "bbf12ef6-fc87-4106-ab08-ed0ca5aff2c3",
        "name": "Booking Agent",
        "type": "@n8n/n8n-nodes-langchain.agent",
        "position": [
          480,
          2192
        ],
        "parameters": {
          "text": "Send Message\n",
          "options": {
            "systemMessage": "You are a intro agent whos only job is to send this message when send message is sent\nThank you for your interest in Kingly Kreationz! We specialize in high-quality automation and branding services, including logos, business cards, websites, custom chatbots, and comprehensive AI-enhanced systems. We‚Äôre confident we can address your unique challenges. \n\nPlease fill out the short form to receive an instant free consultation that will demonstrate how we can assist you.\n\nhttps://kkbranding.com/intake"
          },
          "promptType": "define",
          "hasOutputParser": true
        },
        "typeVersion": 1.7
      },
      {
        "id": "07d5b6ee-7a1a-4d85-89f1-c7595ab7d4f9",
        "name": "Simple Memory",
        "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
        "position": [
          -976,
          1104
        ],
        "parameters": {
          "contextWindowLength": 15
        },
        "typeVersion": 1.3
      },
      {
        "id": "b218c70c-dfcd-41a8-8566-a4161486763a",
        "name": "Routing Agent",
        "type": "@n8n/n8n-nodes-langchain.agent",
        "maxTries": 5,
        "position": [
          -1056,
          864
        ],
        "parameters": {
          "options": {
            "systemMessage": "The primary function of this agent is to classify leads based on user responses from a static webpage form. The form will ask users to select which category they are interested in, specifically:\n\n1. Customer Service for Existing Customers\n2. Quick Questions About Our Services\n3. Book a Full Consultation for Automation or Branding Services\n\nUpon receiving a response, the agent will generate a JSON output to categorize the lead accordingly.\n\n### JSON Output Structure\n\nThe JSON output should follow this simplified format:\n\n```json\n{\n  \"lead_category\": \"Customer Service | Question | Booking\"  // Selected category based on user response\n}\n```\n\n### Logic\n\n- **Classification**: The `lead_category` field must accurately reflect the user's choice from the three provided options: \"Customer Service,\" \"Question,\" or \"Booking.\"\n- **Routing**: Based on the selected category, the agent will route the lead to the appropriate team or resources within Kienle Curations for follow-up or assistance.\n- **Data Handling**: This single classification output will facilitate quick processing and ensure that leads are handled efficiently.\n\n---\nif no classification is detected use history and context to use last classification and if still not sure classify as questions\n"
          },
          "hasOutputParser": true
        },
        "retryOnFail": true,
        "typeVersion": 1.7
      },
      {
        "id": "8256c729-aee6-427d-bd12-f55868beffef",
        "name": "Get Automations",
        "type": "n8n-nodes-base.notionTool",
        "position": [
          704,
          -144
        ],
        "parameters": {
          "options": {},
          "resource": "databasePage",
          "operation": "getAll",
          "returnAll": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Return_All', ``, 'boolean') }}",
          "databaseId": {
            "__rl": true,
            "mode": "list",
            "value": "[REDACTED_UUID]",
            "cachedResultUrl": "https://www.notion.so/241f4bdd9bcf80f589b2d29f76be6f4e",
            "cachedResultName": "Automation Database"
          }
        },
        "typeVersion": 2.2
      },
      {
        "id": "54506b03-bd9a-4438-bee1-d729650d8048",
        "name": "Get Automations1",
        "type": "n8n-nodes-base.notionTool",
        "position": [
          800,
          1056
        ],
        "parameters": {
          "options": {},
          "resource": "databasePage",
          "operation": "getAll",
          "returnAll": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Return_All', ``, 'boolean') }}",
          "databaseId": {
            "__rl": true,
            "mode": "list",
            "value": "[REDACTED_UUID]",
            "cachedResultUrl": "https://www.notion.so/241f4bdd9bcf80f589b2d29f76be6f4e",
            "cachedResultName": "Automation Database"
          }
        },
        "typeVersion": 2.2
      },
      {
        "id": "d73ed1cb-31cf-481c-9d32-abfbaa5d94be",
        "name": "Get Customers",
        "type": "n8n-nodes-base.notionTool",
        "position": [
          848,
          -144
        ],
        "parameters": {
          "options": {},
          "resource": "databasePage",
          "operation": "getAll",
          "returnAll": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Return_All', ``, 'boolean') }}",
          "databaseId": {
            "__rl": true,
            "mode": "list",
            "value": "[REDACTED_UUID]",
            "cachedResultUrl": "https://www.notion.so/202f4bdd9bcf81c19a6cff54e52cae78",
            "cachedResultName": "KK Customer Database"
          }
        },
        "typeVersion": 2.2
      },
      {
        "id": "ec05ee08-9455-4ad0-9734-eb632c7d6ac5",
        "name": "Get More Info",
        "type": "n8n-nodes-base.notionTool",
        "position": [
          672,
          1072
        ],
        "parameters": {
          "blockId": {
            "__rl": true,
            "mode": "id",
            "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Block', ``, 'string') }}"
          },
          "resource": "block",
          "operation": "getAll",
          "returnAll": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Return_All', ``, 'boolean') }}",
          "fetchNestedBlocks": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Also_Fetch_Nested_Blocks', ``, 'boolean') }}"
        },
        "typeVersion": 2.2
      },
      {
        "id": "f5db5bc4-0530-42ab-b7f8-a7724a4de270",
        "name": "Workflow Summary",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -896,
          112
        ],
        "parameters": {
          "color": 0,
          "width": 500,
          "height": 600,
          "content": "## Workflow Overview\n\nThis workflow is a sophisticated chatbot designed to provide customer support and information.  It routes incoming chat messages based on topic to different AI agents, leverages a knowledge base (Notion), and utilizes a large language model (Google Gemini) for responses.  The workflow includes separate AI agents for handling customer service issues, answering general questions about services, and processing consultation bookings."
        },
        "typeVersion": 1
      },
      {
        "id": "6999e60a-2248-4ced-a518-342d3c1ae6ff",
        "name": "Setup Note 1",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -1040,
          320
        ],
        "parameters": {
          "width": 400,
          "height": 500,
          "content": "## Note 1: Note 1: This node acts as the entry point for the workflow.  It receives incoming chat messages via a webhook and triggers the rest of the automation."
        },
        "typeVersion": 1
      },
      {
        "id": "48a31936-755c-4845-a27b-fb75e33b8923",
        "name": "Setup Note 2",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -624,
          320
        ],
        "parameters": {
          "color": 2,
          "width": 400,
          "height": 500,
          "content": "## Note 2: Note 2: This node is the initial routing agent. It uses an AI model to classify the incoming chat message into one of three categories: Customer Service, Question, or Booking.  This classification then determines which subsequent agent will handle the request."
        },
        "typeVersion": 1
      },
      {
        "id": "8a69de8d-568e-41a5-9736-7206ce85106a",
        "name": "Setup Note 3",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -192,
          320
        ],
        "parameters": {
          "color": 3,
          "width": 400,
          "height": 500,
          "content": "## Note 3: Note 3: This node acts as a switch, directing the chat message to the appropriate AI agent based on the classification determined in the previous step.  Three separate agents are used, one for each category (Customer Service, Question, Booking)."
        },
        "typeVersion": 1
      },
      {
        "id": "7dbda1c3-2319-408c-95fe-c5eb44b56321",
        "name": "Setup Note 4",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          224,
          320
        ],
        "parameters": {
          "color": 4,
          "width": 400,
          "height": 500,
          "content": "## Note 4: Note 4: This node is the Customer Service AI agent. It uses a Google Gemini model and interacts with the Notion database to access customer information and product details to provide personalized support. It has access to customer information and product knowledge to provide effective solutions."
        },
        "typeVersion": 1
      },
      {
        "id": "4fe1b909-a4a4-46b2-91c9-09cd4af941ee",
        "name": "Setup Note 5",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          656,
          320
        ],
        "parameters": {
          "color": 5,
          "width": 400,
          "height": 500,
          "content": "## Note 5: Note 5: This node is the Question AI agent. It also uses a Google Gemini model and accesses the Notion database to find and present information about the company's products and services in response to user inquiries."
        },
        "typeVersion": 1
      }
    ],
    "pinData": {
      "When chat message received": [
        {
          "action": "sendMessage",
          "chatInput": "how can you help my business",
          "sessionId": "[REDACTED_UUID]"
        }
      ]
    },
    "connections": {
      "Notion": {
        "ai_tool": [
          [
            {
              "node": "Routing Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Switch": {
        "main": [
          [
            {
              "node": "Customer Service Agent",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "Question Agent",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "Booking Agent",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Get Customers": {
        "ai_tool": [
          [
            {
              "node": "Customer Service Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Get More Info": {
        "ai_tool": [
          [
            {
              "node": "Question Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Routing Agent": {
        "main": [
          [
            {
              "node": "Switch",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Simple Memory": {
        "ai_memory": [
          [
            {
              "node": "Routing Agent",
              "type": "ai_memory",
              "index": 0
            }
          ]
        ]
      },
      "Get Automations": {
        "ai_tool": [
          [
            {
              "node": "Customer Service Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Get Automations1": {
        "ai_tool": [
          [
            {
              "node": "Question Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Window Buffer Memory1": {
        "ai_memory": [
          [
            {
              "node": "Question Agent",
              "type": "ai_memory",
              "index": 0
            }
          ]
        ]
      },
      "Window Buffer Memory2": {
        "ai_memory": [
          [
            {
              "node": "Customer Service Agent",
              "type": "ai_memory",
              "index": 0
            }
          ]
        ]
      },
      "Google Gemini Chat Model": {
        "ai_languageModel": [
          [
            {
              "node": "Routing Agent",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "Structured Output Parser": {
        "ai_outputParser": [
          [
            {
              "node": "Routing Agent",
              "type": "ai_outputParser",
              "index": 0
            }
          ]
        ]
      },
      "Google Gemini Chat Model1": {
        "ai_languageModel": [
          [
            {
              "node": "Question Agent",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "Google Gemini Chat Model2": {
        "ai_languageModel": [
          [
            {
              "node": "Customer Service Agent",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "Google Gemini Chat Model5": {
        "ai_languageModel": [
          [
            {
              "node": "Booking Agent",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "When chat message received": {
        "main": [
          [
            {
              "node": "Routing Agent",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    }
  },
  "lastUpdatedBy": 29,
  "workflowInfo": {
    "nodeCount": 27,
    "nodeTypes": {
      "n8n-nodes-base.switch": {
        "count": 1
      },
      "n8n-nodes-base.notionTool": {
        "count": 5
      },
      "n8n-nodes-base.stickyNote": {
        "count": 8
      },
      "@n8n/n8n-nodes-langchain.agent": {
        "count": 4
      },
      "@n8n/n8n-nodes-langchain.chatTrigger": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.lmChatGoogleGemini": {
        "count": 4
      },
      "@n8n/n8n-nodes-langchain.memoryBufferWindow": {
        "count": 3
      },
      "@n8n/n8n-nodes-langchain.outputParserStructured": {
        "count": 1
      }
    }
  },
  "user": {
    "name": "YungCEO",
    "username": "mryungceo",
    "bio": "",
    "verified": true,
    "links": [
      ""
    ],
    "avatar": "https://gravatar.com/avatar/aea6f117140e6126c1d4ae3b4b10025230362a8c374d09b7c97c4e767583be63?r=pg&d=retro&size=200"
  },
  "nodes": [
    {
      "id": 112,
      "icon": "fa:map-signs",
      "name": "n8n-nodes-base.switch",
      "codex": {
        "data": {
          "alias": [
            "Router",
            "If",
            "Path",
            "Filter",
            "Condition",
            "Logic",
            "Branch",
            "Case"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                "icon": "‚òÄÔ∏è",
                "label": "2021: The Year to Automate the New You with n8n"
              },
              {
                "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                "icon": "üë•",
                "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
              },
              {
                "url": "https://n8n.io/blog/build-your-own-virtual-assistant-with-n8n-a-step-by-step-guide/",
                "icon": "üë¶",
                "label": "Build your own virtual assistant with n8n: A step by step guide"
              },
              {
                "url": "https://n8n.io/blog/automation-for-maintainers-of-open-source-projects/",
                "icon": "üè∑Ô∏è",
                "label": "How to automatically manage contributions to open-source projects"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.switch/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Flow"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Interrupteur",
        "color": "#506000"
      },
      "iconData": {
        "icon": "map-signs",
        "type": "icon"
      },
      "displayName": "Switch",
      "typeVersion": 3,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 565,
      "icon": "fa:sticky-note",
      "name": "n8n-nodes-base.stickyNote",
      "codex": {
        "data": {
          "alias": [
            "Comments",
            "Notes",
            "Sticky"
          ],
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Note autocollante",
        "color": "#FFD233"
      },
      "iconData": {
        "icon": "sticky-note",
        "type": "icon"
      },
      "displayName": "Sticky Note",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 1119,
      "icon": "fa:robot",
      "name": "@n8n/n8n-nodes-langchain.agent",
      "codex": {
        "data": {
          "alias": [
            "LangChain",
            "Chat",
            "Conversational",
            "Plan and Execute",
            "ReAct",
            "Tools"
          ],
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Agents",
              "Root Nodes"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Agent AI",
        "color": "#404040"
      },
      "iconData": {
        "icon": "robot",
        "type": "icon"
      },
      "displayName": "AI Agent",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1163,
      "icon": "fa:database",
      "name": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.memorybufferwindow/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Memory"
            ],
            "Memory": [
              "For beginners"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "M√©moire simple"
      },
      "iconData": {
        "icon": "database",
        "type": "icon"
      },
      "displayName": "Simple Memory",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1179,
      "icon": "fa:code",
      "name": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "codex": {
        "data": {
          "alias": [
            "json",
            "zod"
          ],
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.outputparserstructured/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Output Parsers"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Analyseur de sortie structur√©"
      },
      "iconData": {
        "icon": "code",
        "type": "icon"
      },
      "displayName": "Structured Output Parser",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1247,
      "icon": "fa:comments",
      "name": "@n8n/n8n-nodes-langchain.chatTrigger",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.chattrigger/"
              }
            ]
          },
          "categories": [
            "Core Nodes",
            "Langchain"
          ]
        }
      },
      "group": "[\"trigger\"]",
      "defaults": {
        "name": "Lorsque le message de chat est re√ßu"
      },
      "iconData": {
        "icon": "comments",
        "type": "icon"
      },
      "displayName": "Chat Trigger",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1262,
      "icon": "file:google.svg",
      "name": "@n8n/n8n-nodes-langchain.lmChatGoogleGemini",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.lmchatgooglegemini/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Language Models",
              "Root Nodes"
            ],
            "Language Models": [
              "Chat Models (Recommended)"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Mod√®le de chat Google Gemini"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgNDggNDgiPjxkZWZzPjxwYXRoIGlkPSJhIiBkPSJNNDQuNSAyMEgyNHY4LjVoMTEuOEMzNC43IDMzLjkgMzAuMSAzNyAyNCAzN2MtNy4yIDAtMTMtNS44LTEzLTEzczUuOC0xMyAxMy0xM2MzLjEgMCA1LjkgMS4xIDguMSAyLjlsNi40LTYuNEMzNC42IDQuMSAyOS42IDIgMjQgMiAxMS44IDIgMiAxMS44IDIgMjRzOS44IDIyIDIyIDIyYzExIDAgMjEtOCAyMS0yMiAwLTEuMy0uMi0yLjctLjUtNCIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBmaWxsPSIjRkJCQzA1IiBkPSJNMCAzN1YxMWwxNyAxM3oiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiNFQTQzMzUiIGQ9Im0wIDExIDE3IDEzIDctNi4xTDQ4IDE0VjBIMHoiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiMzNEE4NTMiIGQ9Im0wIDM3IDMwLTIzIDcuOSAxTDQ4IDB2NDhIMHoiIGNsaXAtcGF0aD0idXJsKCNiKSIvPjxwYXRoIGZpbGw9IiM0Mjg1RjQiIGQ9Ik00OCA0OCAxNyAyNGwtNC0zIDM1LTEweiIgY2xpcC1wYXRoPSJ1cmwoI2IpIi8+PC9zdmc+"
      },
      "displayName": "Google Gemini Chat Model",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    }
  ],
  "categories": [
    {
      "id": 47,
      "name": "Chatbot AI"
    },
    {
      "id": 51,
      "name": "AI multimodal"
    }
  ],
  "image": []
}