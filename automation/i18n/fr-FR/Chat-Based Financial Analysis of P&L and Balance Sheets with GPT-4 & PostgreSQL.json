{
  "id": 7197,
  "name": "Analyse Financi√®re Bas√©e sur le Chat des P&L et des Bilans avec GPT-4 & PostgreSQL",
  "views": 38,
  "recentViews": 0,
  "totalViews": 38,
  "createdAt": "2025-08-09T14:12:26.675Z",
  "description": "## üßæ Pour qui est-ce  \nCe flux de travail est con√ßu pour les **√©quipes financi√®res**, **comptables** et **analystes de donn√©es** üìä qui souhaitent interagir avec des donn√©es financi√®res provenant de **deux bases de donn√©es PostgreSQL** ‚Äî l'une contenant des donn√©es de **Profit & Perte** et l'autre contenant des donn√©es de **Bilan** ‚Äî en utilisant un chat en langage naturel.  \nC'est parfait pour ceux qui ont besoin d'**informations rapides, aliment√©es par l'IA** avec la bonne base de donn√©es automatiquement s√©lectionn√©e en fonction de la question.  \n\n---\n\n## ‚öôÔ∏è Comment √ßa fonctionne / Ce que √ßa fait  \n1. **D√©clencheur de Chat üí¨** ‚Äì D√©marre le flux de travail lorsqu'un message de chat est re√ßu.  \n2. **Agent IA ü§ñ** ‚Äì Traite la question de l'utilisateur et d√©cide :  \n   - **DB Profit & Perte** ‚Üí Si la question concerne les revenus, les co√ªts, les d√©penses ou le profit.  \n   - **DB Bilan** ‚Üí Si la question concerne les actifs, les passifs ou les capitaux propres.  \n3. **N≈ìuds de Requ√™te PostgreSQL üóÑÔ∏è** ‚Äì  \n   - **P_L_Reports** interroge la table `financial_agent_pl_reports`.  \n   - **Balance_Sheets** interroge la table `financial_agent_balancesheets`.  \n4. **Mod√®le IA (OpenAI) üß†** ‚Äì Utilise `gpt-4.1-nano` pour interpr√©ter les r√©sultats et fournir une r√©ponse facile √† lire.  \n5. **M√©moire Tampon üìù** ‚Äì Garde le contexte de conversation r√©cent pour une exp√©rience de chat plus fluide.  \n6. **Sortie de Table üìã** ‚Äì Formate toujours les r√©sultats sous forme de **tableau propre et lisible** avec une pr√©cision de deux d√©cimales.  \n\n---\n\n## üõ†Ô∏è Comment configurer  \n1. **Pr√©parez Vos Bases de Donn√©es**  \n   - Alimentez vos donn√©es de Profit & Perte et de Bilan dans **PostgreSQL**.  \n   - Assurez-vous que les structures de table correctes sont utilis√©es :  \n     - **financial_agent_pl_reports** ‚Üí donn√©es P&L.  \n     - **financial_agent_balancesheets** ‚Üí donn√©es de Bilan.  \n\n2. **Configurez les N≈ìuds PostgreSQL**  \n   - Ajoutez les informations d'identification de connexion pour les deux bases de donn√©es.  \n   - Liez les n≈ìuds **P_L_Reports** et **Balance_Sheets** aux tables correctes.  \n\n3. **Configurez l'Agent IA**  \n   - Collez le **message syst√®me** fourni dans le n≈ìud de l'Agent IA (d√©j√† configur√© dans votre flux de travail).  \n\n4. **Connectez les N≈ìuds**  \n   - Assurez-vous que les connexions **D√©clencheur de Chat ‚Üí Agent IA ‚Üí N≈ìuds DB ‚Üí Mod√®le IA** correspondent √† votre flux de travail.  \n\n5. **D√©ployez**  \n   - Enregistrez et activez le flux de travail.  \n   - Commencez √† envoyer des requ√™tes li√©es aux finances pour tester.  \n\n---\n\n## üìã Exigences  \n- **n8n** (derni√®re version recommand√©e)  \n- **Bases de donn√©es PostgreSQL** avec :  \n  - table `financial_agent_pl_reports` (donn√©es P&L).  \n  - table `financial_agent_balancesheets` (donn√©es de Bilan).  \n- **Informations d'identification de l'API OpenAI** avec acc√®s √† `gpt-4.1-nano`.  \n- **D√©clencheur Webhook/Chat Actif** pour recevoir des requ√™tes.  \n\n---\n\n## üé® Comment personnaliser  \n- **D√©veloppez les Instructions de l'IA** üóíÔ∏è ‚Äì Ajoutez plus de r√®gles dans le message syst√®me pour diff√©rentes sources de donn√©es ou styles de formatage.  \n- **Changez le Mod√®le IA** üß† ‚Äì Passez √† un mod√®le OpenAI diff√©rent pour des r√©sultats plus rapides ou plus pr√©cis.  \n- **Ajoutez Plus de Bases de Donn√©es** üóÑÔ∏è ‚Äì Connectez des ensembles de donn√©es financi√®res suppl√©mentaires, par exemple, flux de tr√©sorerie, analyses des ventes.  \n- **Am√©liorez le Style de la Table** üìä ‚Äì Utilisez le formatage Markdown ou HTML pour des sorties plus riches.  \n- **Affinez la Logique de Requ√™te** üîç ‚Äì Modifiez la logique de filtrage pour mieux correspondre √† vos besoins de reporting.  \n",
  "workflow": {
    "id": "okpWKYL7NWpYys9Q",
    "meta": {
      "instanceId": "b50483b2122f6dc268662b45507d575d939570ea8e1e086601ebb3b6273c1cfd"
    },
    "name": "Financial Analyst  Agent",
    "tags": [],
    "nodes": [
      {
        "id": "9d80bab4-d014-4e2c-9f9c-15cb29f49545",
        "name": "AI Agent",
        "type": "@n8n/n8n-nodes-langchain.agent",
        "position": [
          416,
          192
        ],
        "parameters": {},
        "typeVersion": 2.1
      },
      {
        "id": "f3cd7b4d-0e89-403f-b505-4f9fdce05f30",
        "name": "P_L_Reports",
        "type": "n8n-nodes-base.postgresTool",
        "position": [
          608,
          400
        ],
        "parameters": {},
        "typeVersion": 2.6
      },
      {
        "id": "09825591-c77e-4635-a635-282a3cc0d98c",
        "name": "Balance_Sheets",
        "type": "n8n-nodes-base.postgresTool",
        "position": [
          752,
          400
        ],
        "parameters": {},
        "typeVersion": 2.6
      },
      {
        "id": "7da3e4a5-0861-493e-a427-9cecf010de3d",
        "name": "Simple Memory",
        "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
        "position": [
          480,
          400
        ],
        "parameters": {},
        "typeVersion": 1.3
      },
      {
        "id": "d6e2fec8-9910-496f-a630-113ee0e94eb2",
        "name": "OpenAI Chat Model",
        "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
        "position": [
          336,
          400
        ],
        "parameters": {},
        "typeVersion": 1.2
      },
      {
        "id": "ee289e2e-716f-49b5-aaf0-80737e1692bc",
        "name": "Sticky Note",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -16,
          -32
        ],
        "parameters": {
          "content": ""
        },
        "typeVersion": 1
      },
      {
        "id": "4da765c4-d0b7-46dd-b197-d0179bdf1c92",
        "name": "When chat message received",
        "type": "@n8n/n8n-nodes-langchain.chatTrigger",
        "position": [
          176,
          192
        ],
        "webhookId": "aef942c6-87aa-4dd8-9ea1-4b9b4140d843",
        "parameters": {},
        "typeVersion": 1.3
      }
    ],
    "active": false,
    "pinData": {},
    "settings": {
      "executionOrder": "v1"
    },
    "versionId": "8783b3c8-e1bb-4505-8de7-50dfa925535f",
    "connections": {
      "AI Agent": {
        "main": [
          []
        ]
      },
      "P_L_Reports": {
        "ai_tool": [
          [
            {
              "node": "AI Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Simple Memory": {
        "ai_memory": [
          [
            {
              "node": "AI Agent",
              "type": "ai_memory",
              "index": 0
            }
          ]
        ]
      },
      "Balance_Sheets": {
        "ai_tool": [
          [
            {
              "node": "AI Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "OpenAI Chat Model": {
        "ai_languageModel": [
          [
            {
              "node": "AI Agent",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "When chat message received": {
        "main": [
          [
            {
              "node": "AI Agent",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    }
  },
  "lastUpdatedBy": 62,
  "workflowInfo": {
    "nodeCount": 7,
    "nodeTypes": {
      "n8n-nodes-base.stickyNote": {
        "count": 1
      },
      "n8n-nodes-base.postgresTool": {
        "count": 2
      },
      "@n8n/n8n-nodes-langchain.agent": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.chatTrigger": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.lmChatOpenAi": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.memoryBufferWindow": {
        "count": 1
      }
    }
  },
  "user": {
    "name": "Zain Ali",
    "username": "zain104",
    "bio": "Software Engineer with over 3+ years of experience in full-stack development.",
    "verified": true,
    "links": [
      "https://zain.software"
    ],
    "avatar": "https://gravatar.com/avatar/2f3674cf7e6a7e0b6e21b106bcbfac0e9ba4537c3e123fa82b198bd0b3a2d701?r=pg&d=retro&size=200"
  },
  "nodes": [
    {
      "id": 565,
      "icon": "fa:sticky-note",
      "name": "n8n-nodes-base.stickyNote",
      "codex": {
        "data": {
          "alias": [
            "Comments",
            "Notes",
            "Sticky"
          ],
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Note Collante",
        "color": "#FFD233"
      },
      "iconData": {
        "icon": "sticky-note",
        "type": "icon"
      },
      "displayName": "Sticky Note",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 1119,
      "icon": "fa:robot",
      "name": "@n8n/n8n-nodes-langchain.agent",
      "codex": {
        "data": {
          "alias": [
            "LangChain",
            "Chat",
            "Conversational",
            "Plan and Execute",
            "ReAct",
            "Tools"
          ],
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Agents",
              "Root Nodes"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Agent IA",
        "color": "#404040"
      },
      "iconData": {
        "icon": "robot",
        "type": "icon"
      },
      "displayName": "AI Agent",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1153,
      "icon": "file:openAiLight.svg",
      "name": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.lmchatopenai/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Language Models",
              "Root Nodes"
            ],
            "Language Models": [
              "Chat Models (Recommended)"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Mod√®le de Chat OpenAI"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTM2Ljg2NzEgMTYuMzcxOEMzNy43NzQ2IDEzLjY0OCAzNy40NjIxIDEwLjY2NDIgMzYuMDEwOCA4LjE4NjYxQzMzLjgyODIgNC4zODY1MyAyOS40NDA3IDIuNDMxNDkgMjUuMTU1NiAzLjM1MTUxQzIzLjI0OTMgMS4yMDM5NiAyMC41MTA1IC0wLjAxNzMxNDggMTcuNjM5MiAwLjAwMDE4NTUzM0MxMy4yNTkxIC0wLjAwOTgxNDY4IDkuMzcyNzMgMi44MTAyNSA4LjAyNTIgNi45Nzc4M0M1LjIxMTM5IDcuNTU0MSAyLjc4MjU4IDkuMzE1MzggMS4zNjEzIDExLjgxMTdDLTAuODM3NDkzIDE1LjYwMTggLTAuMzM2MjMyIDIwLjM3OTQgMi42MDEzMyAyMy42Mjk0QzEuNjkzODEgMjYuMzUzMiAyLjAwNjMyIDI5LjMzNzEgMy40NTc2IDMxLjgxNDZDNS42NDAxNSAzNS42MTQ3IDEwLjAyNzcgMzcuNTY5NyAxNC4zMTI4IDM2LjY0OTdDMTYuMjE3OSAzOC43OTczIDE4Ljk1NzkgNDAuMDE4NSAyMS44MjkyIDM5Ljk5OThDMjYuMjExOCA0MC4wMTEgMzAuMDk5NCAzNy4xODg1IDMxLjQ0NjkgMzMuMDE3MUMzNC4yNjA4IDMyLjQ0MDkgMzYuNjg5NiAzMC42Nzk2IDM4LjExMDggMjguMTgzM0M0MC4zMDcxIDI0LjM5MzIgMzkuODA0NiAxOS42MTk0IDM2Ljg2ODMgMTYuMzY5M0wzNi44NjcxIDE2LjM3MThaTTIxLjgzMTcgMzcuMzg2QzIwLjA3OCAzNy4zODg1IDE4LjM3OTIgMzYuNzc0NyAxNy4wMzI5IDM1LjY1MDlDMTcuMDk0MSAzNS42MTg0IDE3LjIwMDQgMzUuNTU5NyAxNy4yNjkxIDM1LjUxNzJMMjUuMjM0MyAzMC45MTcxQzI1LjY0MTggMzAuNjg1OCAyNS44OTE4IDMwLjI1MjEgMjUuODg5MyAyOS43ODMzVjE4LjU1NDNMMjkuMjU1NyAyMC40OTgxQzI5LjI5MTkgMjAuNTE1NiAyOS4zMTU3IDIwLjU1MDYgMjkuMzIwNyAyMC41OTA2VjI5Ljg4OTZDMjkuMzE1NyAzNC4wMjQ3IDI1Ljk2NjggMzcuMzc3MiAyMS44MzE3IDM3LjM4NlpNNS43MjY0IDMwLjUwNzFDNC44NDc2MyAyOC45ODk2IDQuNTMxMzcgMjcuMjEwOCA0LjgzMjYzIDI1LjQ4NDVDNC44OTEzOCAyNS41MTk1IDQuOTk1MTMgMjUuNTgzMiA1LjA2ODg4IDI1LjYyNTdMMTMuMDM0MSAzMC4yMjU4QzEzLjQzNzggMzAuNDYyMSAxMy45Mzc4IDMwLjQ2MjEgMTQuMzQyOCAzMC4yMjU4TDI0LjA2NjggMjQuNjEwN1YyOC40OTgzQzI0LjA2OTMgMjguNTM4MyAyNC4wNTA1IDI4LjU3NyAyNC4wMTkzIDI4LjYwMkwxNS45Njc5IDMzLjI1MDlDMTIuMzgxNSAzNS4zMTU5IDcuODAxNDQgMzQuMDg4NCA1LjcyNzY1IDMwLjUwNzFINS43MjY0Wk0zLjYzMDEgMTMuMTIwNUM0LjUwNTEyIDExLjYwMDQgNS44ODY0IDEwLjQzNzkgNy41MzE0NCA5LjgzNDE1QzcuNTMxNDQgOS45MDI5IDcuNTI3NjkgMTAuMDI0MiA3LjUyNzY5IDEwLjEwOTJWMTkuMzEwNkM3LjUyNTE5IDE5Ljc3ODEgNy43NzUxOSAyMC4yMTE5IDguMTgxNDUgMjAuNDQzMUwxNy45MDU0IDI2LjA1N0wxNC41MzkxIDI4LjAwMDhDMTQuNTA1MyAyOC4wMjMzIDE0LjQ2MjggMjguMDI3IDE0LjQyNTMgMjguMDEwOEw2LjM3MjY2IDIzLjM1ODJDMi43OTM4MyAyMS4yODU2IDEuNTY2MzEgMTYuNzA2OCAzLjYyODg1IDEzLjEyMTdMMy42MzAxIDEzLjEyMDVaTTMxLjI4ODIgMTkuNTU2OUwyMS41NjQyIDEzLjk0MTdMMjQuOTMwNiAxMS45OTkyQzI0Ljk2NDMgMTEuOTc2NyAyNS4wMDY4IDExLjk3MjkgMjUuMDQ0MyAxMS45ODkyTDMzLjA5NyAxNi42MzhDMzYuNjgyMSAxOC43MDkzIDM3LjkxMDggMjMuMjk1NyAzNS44Mzk1IDI2Ljg4MDhDMzQuOTYzMyAyOC4zOTgzIDMzLjU4MzIgMjkuNTYwOCAzMS45Mzk1IDMwLjE2NThWMjAuNjg5NEMzMS45NDMyIDIwLjIyMTkgMzEuNjk0NSAxOS43ODk0IDMxLjI4OTQgMTkuNTU2OUgzMS4yODgyWk0zNC42MzgzIDE0LjUxNDJDMzQuNTc5NSAxNC40NzggMzQuNDc1OCAxNC40MTU1IDM0LjQwMiAxNC4zNzNMMjYuNDM2OCA5Ljc3Mjg5QzI2LjAzMzEgOS41MzY2NCAyNS41MzMxIDkuNTM2NjQgMjUuMTI4MSA5Ljc3Mjg5TDE1LjQwNDEgMTUuMzg4VjExLjUwMDRDMTUuNDAxNiAxMS40NjA0IDE1LjQyMDQgMTEuNDIxNyAxNS40NTE2IDExLjM5NjdMMjMuNTAzIDYuNzUxNThDMjcuMDg5NCA0LjY4Mjc5IDMxLjY3NDUgNS45MTQwNiAzMy43NDIgOS41MDE2NEMzNC42MTU4IDExLjAxNjcgMzQuOTMyIDEyLjc5MDUgMzQuNjM1OCAxNC41MTQySDM0LjYzODNaTTEzLjU3NDEgMjEuNDQzMUwxMC4yMDY1IDE5LjQ5OTRDMTAuMTcwMiAxOS40ODE5IDEwLjE0NjUgMTkuNDQ2OCAxMC4xNDE1IDE5LjQwNjhWMTAuMTA3OUMxMC4xNDQgNS45Njc4MSAxMy41MDI4IDIuNjEyNzQgMTcuNjQyOSAyLjYxNTI0QzE5LjM5NDIgMi42MTUyNCAyMS4wODkyIDMuMjMwMjUgMjIuNDM1NSA0LjM1MDI4QzIyLjM3NDMgNC4zODI3OCAyMi4yNjkzIDQuNDQxNTMgMjIuMTk5MiA0LjQ4NDAzTDE0LjIzNDEgOS4wODQxM0MxMy44MjY2IDkuMzE1MzggMTMuNTc2NiA5Ljc0Nzg5IDEzLjU3OTEgMTAuMjE2N0wxMy41NzQxIDIxLjQ0MDZWMjEuNDQzMVpNMTUuNDAyOSAxNy41MDA2TDE5LjczNDIgMTQuOTk5M0wyNC4wNjU1IDE3LjQ5OTNWMjIuNTAwN0wxOS43MzQyIDI1LjAwMDdMMTUuNDAyOSAyMi41MDA3VjE3LjUwMDZaIiBmaWxsPSIjN0Q3RDg3Ii8+Cjwvc3ZnPgo="
      },
      "displayName": "OpenAI Chat Model",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1163,
      "icon": "fa:database",
      "name": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.memorybufferwindow/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Memory"
            ],
            "Memory": [
              "For beginners"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "M√©moire Simple"
      },
      "iconData": {
        "icon": "database",
        "type": "icon"
      },
      "displayName": "Simple Memory",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1247,
      "icon": "fa:comments",
      "name": "@n8n/n8n-nodes-langchain.chatTrigger",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.chattrigger/"
              }
            ]
          },
          "categories": [
            "Core Nodes",
            "Langchain"
          ]
        }
      },
      "group": "[\"trigger\"]",
      "defaults": {
        "name": "Lorsque le message de chat est re√ßu"
      },
      "iconData": {
        "icon": "comments",
        "type": "icon"
      },
      "displayName": "Chat Trigger",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    }
  ],
  "categories": [
    {
      "id": 35,
      "name": "Extraction de Documents"
    },
    {
      "id": 51,
      "name": "IA Multimodale"
    }
  ],
  "image": []
}