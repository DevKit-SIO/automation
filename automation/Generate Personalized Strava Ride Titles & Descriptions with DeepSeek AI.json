{
  "id": 4736,
  "name": "Generate Personalized Strava Ride Titles & Descriptions with DeepSeek AI",
  "totalViews": 534,
  "price": 0,
  "purchaseUrl": null,
  "user": {
    "name": "Thibaud",
    "username": "tderouze",
    "bio": "Automation consultant with over 10 years\nexperience helping Sales & Marketing teams to\nstreamline their processes.",
    "verified": true,
    "links": [
      "https://www.linkedin.com/in/tderouze/"
    ],
    "avatar": "https://gravatar.com/avatar/270fdef676e98d756990561605f51a7fc8dda487d4908efe7ca5fea10509a08c?r=pg&d=retro&size=200"
  },
  "description": "**Title**: Automatic Strava Titles & Descriptions Generation with AI\n\n**Description**:\nThis n8n workflow connects your Strava account to an AI to automatically generate personalized titles and descriptions for every new cycling activity. It leverages the native Strava trigger to detect new activities, extracts and formats ride data, then queries an AI agent (OpenRouter, ChatGPT, etc.) with an optimized prompt to get a catchy title and inspiring description. The workflow then updates the Strava activity in real time, with zero manual intervention.\n\n**Key Features**:\n- Secure connection to the Strava API (OAuth2)\n- Automatic triggering for every new activity\n- Intelligent data preparation and formatting\n- AI-powered generation of personalized content (title + description)\n- Instant update of the activity on Strava\n\n\n**Use Cases**:\n- Cyclists wanting to automatically enhance their Strava rides\n- Sports content creators\n- Community management automation for sports groups\n\n\n**Prerequisites**:\n- Strava account\n- Strava OAuth2 credentials set up in n8n\n- Access to a compatible AI agent (OpenRouter, ChatGPT, etc.)\n\n\n**Benefits**:\n- Saves time\n- Advanced personalization\n- Boosts the appeal of every ride to your community",
  "createdAt": "2025-06-06T15:11:46.257Z",
  "nodes": [
    {
      "id": 38,
      "icon": "fa:pen",
      "name": "n8n-nodes-base.set",
      "codex": {
        "data": {
          "alias": [
            "Set",
            "JS",
            "JSON",
            "Filter",
            "Transform",
            "Map"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                "icon": "üè≠",
                "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
              },
              {
                "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                "icon": "‚òÄÔ∏è",
                "label": "2021: The Year to Automate the New You with n8n"
              },
              {
                "url": "https://n8n.io/blog/automatically-pulling-and-visualizing-data-with-n8n/",
                "icon": "üìà",
                "label": "Automatically pulling and visualizing data with n8n"
              },
              {
                "url": "https://n8n.io/blog/database-monitoring-and-alerting-with-n8n/",
                "icon": "üì°",
                "label": "Database Monitoring and Alerting with n8n"
              },
              {
                "url": "https://n8n.io/blog/automatically-adding-expense-receipts-to-google-sheets-with-telegram-mindee-twilio-and-n8n/",
                "icon": "üßæ",
                "label": "Automatically Adding Expense Receipts to Google Sheets with Telegram, Mindee, Twilio, and n8n"
              },
              {
                "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                "icon": "store",
                "label": "6 e-commerce workflows to power up your Shopify s"
              },
              {
                "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                "icon": "üîó",
                "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
              },
              {
                "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                "icon": "‚öôÔ∏è",
                "label": "Automate your data processing pipeline in 9 steps"
              },
              {
                "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                "icon": "üë•",
                "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
              },
              {
                "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                "icon": "‚ö°Ô∏è",
                "label": "5 tasks you can automate with the new Notion API "
              },
              {
                "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                "icon": "üí°",
                "label": "15 Google apps you can combine and automate to increase productivity"
              },
              {
                "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                "icon": " üï∏Ô∏è",
                "label": "How uProc scraped a multi-page website with a low-code workflow"
              },
              {
                "url": "https://n8n.io/blog/building-an-expense-tracking-app-in-10-minutes/",
                "icon": "üì±",
                "label": "Building an expense tracking app in 10 minutes"
              },
              {
                "url": "https://n8n.io/blog/the-ultimate-guide-to-automate-your-video-collaboration-with-whereby-mattermost-and-n8n/",
                "icon": "üìπ",
                "label": "The ultimate guide to automate your video collaboration with Whereby, Mattermost, and n8n"
              },
              {
                "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                "icon": "ü§ñ",
                "label": "5 workflow automations for Mattermost that we love at n8n"
              },
              {
                "url": "https://n8n.io/blog/learn-to-build-powerful-api-endpoints-using-webhooks/",
                "icon": "üß∞",
                "label": "Learn to Build Powerful API Endpoints Using Webhooks"
              },
              {
                "url": "https://n8n.io/blog/how-a-membership-development-manager-automates-his-work-and-investments/",
                "icon": "üìà",
                "label": "How a Membership Development Manager automates his work and investments"
              },
              {
                "url": "https://n8n.io/blog/a-low-code-bitcoin-ticker-built-with-questdb-and-n8n-io/",
                "icon": "üìà",
                "label": "A low-code bitcoin ticker built with QuestDB and n8n.io"
              },
              {
                "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                "icon": "üé°",
                "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
              },
              {
                "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                "icon": "üéñ",
                "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
              },
              {
                "url": "https://n8n.io/blog/how-goomer-automated-their-operations-with-over-200-n8n-workflows/",
                "icon": "üõµ",
                "label": "How Goomer automated their operations with over 200 n8n workflows"
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.set/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Edit Fields"
      },
      "iconData": {
        "icon": "pen",
        "type": "icon"
      },
      "displayName": "Edit Fields (Set)",
      "typeVersion": 3,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 384,
      "icon": "file:strava.svg",
      "name": "n8n-nodes-base.strava",
      "codex": {
        "data": {
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                "icon": "‚òÄÔ∏è",
                "label": "2021: The Year to Automate the New You with n8n"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.strava/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/strava/"
              }
            ]
          },
          "categories": [
            "Productivity"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Strava"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAwIiBoZWlnaHQ9IjI1MDAiIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZmlsbD0iI2ZjNGMwMiIgZD0iTTAgMGgxNnYxNkgweiIvPjxnIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0ibTYuOSA4LjggMi41IDQuNSAyLjQtNC41aC0xLjVsLS45IDEuNy0xLTEuN3oiIG9wYWNpdHk9Ii42Ii8+PHBhdGggZD0ibTcuMiAyLjUgMy4xIDYuM0g0em0wIDMuOCAxLjIgMi41SDUuOXoiLz48L2c+PC9zdmc+"
      },
      "displayName": "Strava",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 4,
          "name": "Productivity"
        }
      ]
    },
    {
      "id": 386,
      "icon": "file:strava.svg",
      "name": "n8n-nodes-base.stravaTrigger",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/trigger-nodes/n8n-nodes-base.stravatrigger/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/strava/"
              }
            ]
          },
          "categories": [
            "Productivity"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"trigger\"]",
      "defaults": {
        "name": "Strava Trigger"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTAwIiBoZWlnaHQ9IjI1MDAiIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZmlsbD0iI2ZjNGMwMiIgZD0iTTAgMGgxNnYxNkgweiIvPjxnIGZpbGw9IiNmZmYiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZD0ibTYuOSA4LjggMi41IDQuNSAyLjQtNC41aC0xLjVsLS45IDEuNy0xLTEuN3oiIG9wYWNpdHk9Ii42Ii8+PHBhdGggZD0ibTcuMiAyLjUgMy4xIDYuM0g0em0wIDMuOCAxLjIgMi41SDUuOXoiLz48L2c+PC9zdmc+"
      },
      "displayName": "Strava Trigger",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 4,
          "name": "Productivity"
        }
      ]
    },
    {
      "id": 565,
      "icon": "fa:sticky-note",
      "name": "n8n-nodes-base.stickyNote",
      "codex": {
        "data": {
          "alias": [
            "Comments",
            "Notes",
            "Sticky"
          ],
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Sticky Note",
        "color": "#FFD233"
      },
      "iconData": {
        "icon": "sticky-note",
        "type": "icon"
      },
      "displayName": "Sticky Note",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 834,
      "icon": "file:code.svg",
      "name": "n8n-nodes-base.code",
      "codex": {
        "data": {
          "alias": [
            "cpde",
            "Javascript",
            "JS",
            "Python",
            "Script",
            "Custom Code",
            "Function"
          ],
          "details": "The Code node allows you to execute JavaScript in your workflow.",
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.code/"
              }
            ]
          },
          "categories": [
            "Development",
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers",
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Code"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTcxXzQ0MSkiPgo8cGF0aCBkPSJNMTcwLjI4MyA0OEgxOTYuNUMyMDMuMTI3IDQ4IDIwOC41IDQyLjYyNzQgMjA4LjUgMzZWMTJDMjA4LjUgNS4zNzI1OCAyMDMuMTI3IDAgMTk2LjUgMEgxNzAuMjgzQzEyNi4xIDAgOTAuMjgzIDM1LjgxNzIgOTAuMjgzIDgwVjE3NkM5MC4yODMgMjA2LjkyOCA2NS4yMTA5IDIzMiAzNC4yODMgMjMySDIzQzE2LjM3MjYgMjMyIDExIDIzNy4zNzIgMTEgMjQ0VjI2OEMxMSAyNzQuNjI3IDE2LjM3MjQgMjgwIDIyLjk5OTYgMjgwTDM0LjI4MyAyODBDNjUuMjEwOSAyODAgOTAuMjgzIDMwNS4wNzIgOTAuMjgzIDMzNlY0NDBDOTAuMjgzIDQ3OS43NjQgMTIyLjUxOCA1MTIgMTYyLjI4MyA1MTJIMTk2LjVDMjAzLjEyNyA1MTIgMjA4LjUgNTA2LjYyNyAyMDguNSA1MDBWNDc2QzIwOC41IDQ2OS4zNzMgMjAzLjEyNyA0NjQgMTk2LjUgNDY0SDE2Mi4yODNDMTQ5LjAyOCA0NjQgMTM4LjI4MyA0NTMuMjU1IDEzOC4yODMgNDQwVjMzNkMxMzguMjgzIDMwOS4wMjIgMTI4LjAxMSAyODQuNDQzIDExMS4xNjQgMjY1Ljk2MUMxMDYuMTA5IDI2MC40MTYgMTA2LjEwOSAyNTEuNTg0IDExMS4xNjQgMjQ2LjAzOUMxMjguMDExIDIyNy41NTcgMTM4LjI4MyAyMDIuOTc4IDEzOC4yODMgMTc2VjgwQzEzOC4yODMgNjIuMzI2OSAxNTIuNjEgNDggMTcwLjI4MyA0OFoiIGZpbGw9IiNGRjk5MjIiLz4KPHBhdGggZD0iTTMwNSAzNkMzMDUgNDIuNjI3NCAzMTAuMzczIDQ4IDMxNyA0OEgzNDIuOTc5QzM2MC42NTIgNDggMzc0Ljk3OCA2Mi4zMjY5IDM3NC45NzggODBWMTc2QzM3NC45NzggMjAyLjk3OCAzODUuMjUxIDIyNy41NTcgNDAyLjA5OCAyNDYuMDM5QzQwNy4xNTMgMjUxLjU4NCA0MDcuMTUzIDI2MC40MTYgNDAyLjA5OCAyNjUuOTYxQzM4NS4yNTEgMjg0LjQ0MyAzNzQuOTc4IDMwOS4wMjIgMzc0Ljk3OCAzMzZWNDMyQzM3NC45NzggNDQ5LjY3MyAzNjAuNjUyIDQ2NCAzNDIuOTc5IDQ2NEgzMTdDMzEwLjM3MyA0NjQgMzA1IDQ2OS4zNzMgMzA1IDQ3NlY1MDBDMzA1IDUwNi42MjcgMzEwLjM3MyA1MTIgMzE3IDUxMkgzNDIuOTc5QzM4Ny4xNjEgNTEyIDQyMi45NzggNDc2LjE4MyA0MjIuOTc4IDQzMlYzMzZDNDIyLjk3OCAzMDUuMDcyIDQ0OC4wNTEgMjgwIDQ3OC45NzkgMjgwSDQ5MEM0OTYuNjI3IDI4MCA1MDIgMjc0LjYyOCA1MDIgMjY4VjI0NEM1MDIgMjM3LjM3MyA0OTYuNjI4IDIzMiA0OTAgMjMyTDQ3OC45NzkgMjMyQzQ0OC4wNTEgMjMyIDQyMi45NzggMjA2LjkyOCA0MjIuOTc4IDE3NlY4MEM0MjIuOTc4IDM1LjgxNzIgMzg3LjE2MSAwIDM0Mi45NzkgMEgzMTdDMzEwLjM3MyAwIDMwNSA1LjM3MjU4IDMwNSAxMlYzNloiIGZpbGw9IiNGRjk5MjIiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTcxXzQ0MSI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
      },
      "displayName": "Code",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 5,
          "name": "Development"
        },
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 1119,
      "icon": "fa:robot",
      "name": "@n8n/n8n-nodes-langchain.agent",
      "codex": {
        "data": {
          "alias": [
            "LangChain",
            "Chat",
            "Conversational",
            "Plan and Execute",
            "ReAct",
            "Tools"
          ],
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Agents",
              "Root Nodes"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "AI Agent",
        "color": "#404040"
      },
      "iconData": {
        "icon": "robot",
        "type": "icon"
      },
      "displayName": "AI Agent",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1281,
      "icon": "file:openrouter.svg",
      "name": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.lmchatopenrouter/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Language Models",
              "Root Nodes"
            ],
            "Language Models": [
              "Chat Models (Recommended)"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "OpenRouter Chat Model"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjOTRBM0I4IiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDI0IDI0IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjx0aXRsZT5PcGVuUm91dGVyPC90aXRsZT48cGF0aCBkPSJNMTYuODA0IDEuOTU3bDcuMjIgNC4xMDV2LjA4N0wxNi43MyAxMC4yMWwuMDE3LTIuMTE3LS44MjEtLjAzYy0xLjA1OS0uMDI4LTEuNjExLjAwMi0yLjI2OC4xMS0xLjA2NC4xNzUtMi4wMzguNTc3LTMuMTQ3IDEuMzUyTDguMzQ1IDExLjAzYy0uMjg0LjE5NS0uNDk1LjMzNi0uNjguNDU1bC0uNTE1LjMyMi0uMzk3LjIzNC4zODUuMjMuNTMuMzM4Yy40NzYuMzE0IDEuMTcuNzk2IDIuNzAxIDEuODY2IDEuMTEuNzc1IDIuMDgzIDEuMTc3IDMuMTQ3IDEuMzUybC4zLjA0NWMuNjk0LjA5MSAxLjM3NS4wOTQgMi44MjUuMDMzbC4wMjItMi4xNTkgNy4yMiA0LjEwNXYuMDg3TDE2LjU4OSAyMmwuMDE0LTEuODYyLS42MzUuMDIyYy0xLjM4Ni4wNDItMi4xMzcuMDAyLTMuMTM4LS4xNjItMS42OTQtLjI4LTMuMjYtLjkyNi00Ljg4MS0yLjA1OWwtMi4xNTgtMS41YTIxLjk5NyAyMS45OTcgMCAwMC0uNzU1LS40OThsLS40NjctLjI4YTU1LjkyNyA1NS45MjcgMCAwMC0uNzYtLjQzQzIuOTA4IDE0LjczLjU2MyAxNC4xMTYgMCAxNC4xMTZWOS44ODhsLjE0LjAwNGMuNTY0LS4wMDcgMi45MS0uNjIyIDMuODA5LTEuMTI0bDEuMDE2LS41OC40MzgtLjI3NGMuNDI4LS4yOCAxLjA3Mi0uNzI2IDIuNjg2LTEuODUzIDEuNjIxLTEuMTMzIDMuMTg2LTEuNzggNC44ODEtMi4wNTkgMS4xNTItLjE5IDEuOTc0LS4yMTMgMy44MTQtLjEzOGwuMDItMS45MDd6Ij48L3BhdGg+PC9zdmc+Cg=="
      },
      "displayName": "OpenRouter Chat Model",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    }
  ],
  "views": 534,
  "recentViews": 1,
  "workflow": {
    "id": "SoJXbESQ4lWQWcVt",
    "meta": {
      "instanceId": "89af474e60c70a1e45bf242e266e9ca1446dd974ab86f6d185b8ccded3effed2",
      "templateCredsSetupCompleted": true
    },
    "name": "Strava Social Manager (AI Title & Description Generation)",
    "tags": [
      {
        "id": "NabIyPgRf7ZggE5B",
        "name": "Showcase",
        "createdAt": "2025-06-03T15:41:30.076Z",
        "updatedAt": "2025-06-03T15:41:30.076Z"
      }
    ],
    "nodes": [
      {
        "id": "58ef8481-49d7-4522-9797-f191db60fa33",
        "name": "Combine Everything",
        "type": "n8n-nodes-base.code",
        "position": [
          -80,
          340
        ],
        "parameters": {
          "jsCode": "// Recursive function to flatten JSON into a single string\nfunction flattenJson(obj, prefix = '') {\n    let str = '';\n    for (const key in obj) {\n        if (typeof obj[key] === 'object' && obj[key] !== null) {\n            str += flattenJson(obj[key], `${prefix}${key}.`);\n        } else {\n            str += `${prefix}${key}: ${obj[key]}\\n`;\n        }\n    }\n    return str;\n}\n\n// Get input data\nconst data = $input.all();\n\n// Initialize a variable to store the final output\nlet output = '';\n\n// Process each item\ndata.forEach(item => {\n    output += flattenJson(item.json);\n    output += '\\n---\\n'; // Separator between records\n});\n\n// Return the merged string as output\nreturn [{ json: { data: output } }];\n"
        },
        "typeVersion": 2
      },
      {
        "id": "d81a3699-09c6-4114-ad6e-652ce34854e8",
        "name": "Code",
        "type": "n8n-nodes-base.code",
        "position": [
          -300,
          340
        ],
        "parameters": {
          "jsCode": "// Loop over input items and add a new field called 'myNewField' to the JSON of each one\nfor (const item of $input.all()) {\n  item.json.myNewField = 1;\n}\n\nreturn $input.all();"
        },
        "typeVersion": 2
      },
      {
        "id": "ee87a5ae-331f-4066-84e8-43acdfaaf038",
        "name": "OpenRouter Chat Model",
        "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
        "position": [
          160,
          520
        ],
        "parameters": {
          "model": "deepseek/deepseek-r1:free",
          "options": {}
        },
        "credentials": {
          "openRouterApi": {
            "id": "3wCQ4jmvYFl3hV0y",
            "name": "OpenRouter account"
          }
        },
        "typeVersion": 1
      },
      {
        "id": "7690c43e-282c-4fc6-af91-ba468040fdba",
        "name": "Strava Trigger",
        "type": "n8n-nodes-base.stravaTrigger",
        "position": [
          -520,
          340
        ],
        "webhookId": "d5e76c3e-5828-45f6-ae2a-ab70d8bfa93f",
        "parameters": {
          "event": "create",
          "object": "activity",
          "options": {}
        },
        "credentials": {
          "stravaOAuth2Api": {
            "id": "Em3MTnOr8JDr8Wnk",
            "name": "Strava account"
          }
        },
        "typeVersion": 1
      },
      {
        "id": "b0dbf6f6-d3c9-43e3-997a-3593229e891e",
        "name": "Edit Fields",
        "type": "n8n-nodes-base.set",
        "position": [
          520,
          340
        ],
        "parameters": {
          "options": {},
          "assignments": {
            "assignments": [
              {
                "id": "fe37d921-5f51-4809-8fa9-e93b0983a566",
                "name": "Name",
                "type": "string",
                "value": "={{ $json.output.split('\\n')[0].split(': ')[1] }}"
              },
              {
                "id": "528a732c-7b96-47c1-8c8e-4354258569d9",
                "name": "Description",
                "type": "string",
                "value": "={{ $json.output.split('\\n')[1].split(': ')[1] }}"
              }
            ]
          }
        },
        "typeVersion": 3.4
      },
      {
        "id": "38316beb-1f92-43e5-ac48-ac982be6407f",
        "name": "Strava",
        "type": "n8n-nodes-base.strava",
        "position": [
          740,
          340
        ],
        "parameters": {
          "operation": "update",
          "activityId": "={{ $('Strava Trigger').item.json.object_id }}",
          "updateFields": {
            "name": "={{ $json.Name }}",
            "description": "={{ $json.Description }}"
          }
        },
        "credentials": {
          "stravaOAuth2Api": {
            "id": "Em3MTnOr8JDr8Wnk",
            "name": "Strava account"
          }
        },
        "typeVersion": 1.1
      },
      {
        "id": "4be1f7de-7f50-45fb-8aa0-4707d25a23fb",
        "name": "Strava Social Manager",
        "type": "@n8n/n8n-nodes-langchain.agent",
        "position": [
          140,
          340
        ],
        "parameters": {
          "text": "=Tu es un assistant virtuel passionn√© de cyclisme.  \n√Ä partir des informations ci-dessous sur ma sortie v√©lo, g√©n√®re‚ÄØ:\n- Un **titre accrocheur** (max 10 mots), original et adapt√© au contexte de la sortie.\n- Une **description** motivante, d√©taill√©e et personnalis√©e (3 √† 5 phrases), qui met en valeur les aspects marquants de la sortie (lieux travers√©s, m√©t√©o, performance, sensations, anecdotes, etc.).  \n\nUtilise un ton positif, dynamique et inspirant, comme si tu √©crivais pour un carnet d‚Äôaventure cycliste.  \n\n**Donn√©es de la sortie‚ÄØ:**\n- Distance‚ÄØ: [X] km\n- Dur√©e‚ÄØ: [X] h [X] min\n- D√©nivel√©‚ÄØ: [X] m\n- Vitesse moyenne‚ÄØ: [X] km/h\n- Lieu/d√©part‚ÄØ: [Ville/lieu]\n- M√©t√©o‚ÄØ: [ensoleill√©, pluvieux, vent, etc.]\n- Ressenti‚ÄØ: [facile, difficile, super sensations, etc.]\n- Particularit√©s‚ÄØ: [d√©couverte d‚Äôun nouveau parcours, sortie en groupe, crevaison, etc.]\n\n**Format attendu‚ÄØ:**\n```\nTitre‚ÄØ: [Titre g√©n√©r√©]\nDescription‚ÄØ: [Description g√©n√©r√©e]\n```\n\n---\n\nVoici les donn√©es de l'activit√© : \n{{ $json.data }}",
          "agent": "conversationalAgent",
          "options": {},
          "promptType": "define"
        },
        "typeVersion": 1.7
      },
      {
        "id": "f2941949-f743-4214-88a6-37899770e4df",
        "name": "Sticky Note",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -940,
          0
        ],
        "parameters": {
          "color": 5,
          "width": 340,
          "height": 680,
          "content": "### **Step 0 ‚Äì Connecting to the Strava API**\nBefore anything else, connect your Strava account to n8n via OAuth2:\n- Go to **Credentials** > **Strava OAuth2 API** in n8n.\n- Enter the Client ID and Client Secret obtained from the Strava developer portal.\n- Authorize the necessary scopes (`activity:read_all`, `activity:write`).\n- This connection allows n8n to securely access and modify your Strava activities.\n"
        },
        "typeVersion": 1
      },
      {
        "id": "885370b1-7f2f-4411-b35e-3090dcbec2b8",
        "name": "Sticky Note1",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -580,
          0
        ],
        "parameters": {
          "width": 220,
          "height": 680,
          "content": "### **Step 1 ‚Äì Strava Trigger**\nThis node automatically monitors the creation of new activities on your Strava account.\n- For each new activity, it retrieves all associated data (distance, duration, elevation gain, etc.).\n- It serves as the workflow‚Äôs entry point and passes the raw activity data to the next steps."
        },
        "typeVersion": 1
      },
      {
        "id": "28121d2d-ddd0-422b-b56d-099a32708216",
        "name": "Sticky Note2",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -340,
          0
        ],
        "parameters": {
          "width": 420,
          "height": 680,
          "content": "### **Step 2a ‚Äì Data Processing (Code)**\nA Code node (JavaScript) adds or modifies fields in the activity data.\n- Example: Adding a custom field `myNewField` to enrich or prepare the data for use by the AI or other nodes.\n\n### **Step 2b ‚Äì Data Flattening and Formatting (Combine Everything)**\nThis Code node \"flattens\" the complex Strava activity JSON structure into a simple text string.\n- It makes the data easily usable by the AI by presenting it as a readable, well-structured text.\n- Each activity key/value is listed on a line, making contextual analysis easier."
        },
        "typeVersion": 1
      },
      {
        "id": "fb1139ae-b154-49fa-a2f0-dd9e1d440f17",
        "name": "Sticky Note3",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          100,
          0
        ],
        "parameters": {
          "width": 340,
          "height": 680,
          "content": "### **Step 3 ‚Äì AI Generation of Title and Description (Strava Social Manager)**\nThis node calls an AI agent (via OpenRouter or other service) with a detailed prompt:\n- It sends the activity data (flattened previously) to the AI.\n- The AI generates a catchy title and a personalized description, inspired by the context, performance, and highlights of the ride.\n- The prompt is designed to get an inspiring result tailored to the cycling community."
        },
        "typeVersion": 1
      },
      {
        "id": "c2897c26-5e64-44a4-8201-12f25f3a8e13",
        "name": "Sticky Note4",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          460,
          0
        ],
        "parameters": {
          "height": 680,
          "content": "### **Step 4 ‚Äì Extracting AI Results (Edit Fields)**\nThe Set node extracts the AI-generated title and description from the output text.\n- It splits the text to isolate the title and description, storing them in separate fields.\n- This step prepares the data for updating on Strava.\n"
        },
        "typeVersion": 1
      },
      {
        "id": "88418116-adc3-4438-8fa5-0fbfd399495b",
        "name": "Sticky Note5",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          720,
          0
        ],
        "parameters": {
          "height": 680,
          "content": "### **Step 5 ‚Äì Automatic Update of the Activity on Strava**\nThe Strava node updates the relevant activity with the generated title and description.\n- It uses the activity ID provided by the initial trigger.\n- The `name` (title) and `description` fields are updated directly on Strava, making the ride more attractive and personalized."
        },
        "typeVersion": 1
      }
    ],
    "active": false,
    "pinData": {},
    "settings": {
      "executionOrder": "v1"
    },
    "versionId": "faf93495-ffbf-40f8-8dfe-89be52af5ba1",
    "connections": {
      "Code": {
        "main": [
          [
            {
              "node": "Combine Everything",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Edit Fields": {
        "main": [
          [
            {
              "node": "Strava",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Strava Trigger": {
        "main": [
          [
            {
              "node": "Code",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Combine Everything": {
        "main": [
          [
            {
              "node": "Strava Social Manager",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "OpenRouter Chat Model": {
        "ai_languageModel": [
          [
            {
              "node": "Strava Social Manager",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "Strava Social Manager": {
        "main": [
          [
            {
              "node": "Edit Fields",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    }
  },
  "lastUpdatedBy": 29,
  "workflowInfo": {
    "nodeCount": 13,
    "nodeTypes": {
      "n8n-nodes-base.set": {
        "count": 1
      },
      "n8n-nodes-base.code": {
        "count": 2
      },
      "n8n-nodes-base.strava": {
        "count": 1
      },
      "n8n-nodes-base.stickyNote": {
        "count": 6
      },
      "n8n-nodes-base.stravaTrigger": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.agent": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.lmChatOpenRouter": {
        "count": 1
      }
    }
  },
  "categories": [
    {
      "id": 31,
      "name": "Content Creation"
    },
    {
      "id": 51,
      "name": "Multimodal AI"
    }
  ],
  "image": []
}