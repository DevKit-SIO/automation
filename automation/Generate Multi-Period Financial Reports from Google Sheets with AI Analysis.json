{
  "id": 6679,
  "name": "Generate Multi-Period Financial Reports from Google Sheets with AI Analysis",
  "totalViews": 200,
  "purchaseUrl": null,
  "user": {
    "name": "DuyTran",
    "username": "duytran82",
    "bio": "",
    "verified": false,
    "links": [],
    "avatar": "https://gravatar.com/avatar/65039258dd416eb7f3833aee053bb9ab940c238010e5f210b0e1106218cc1bd3?r=pg&d=retro&size=200"
  },
  "description": "Description:\n1. Overview\nThis workflow generates automated revenue and expense comparison reports from a structured Google Sheet. It enables users to compare financial data across the current period, last month, and last year, then uses an AI agent to analyze and summarize the results for business reporting.\n\n2. Prerequisites\nA connected Google Sheets OAuth2 credential.\n\nA valid DeepSeek AI API (or replaceable with another Chat Model).\n\nA sub-workflow (child workflow) that handles processing logic.\n\nProperly structured Google Sheets data (see below).\n\n3. Required Google Sheet Structure\nColumn headers must include at least: Date, Amount, Type.\n\n4. Setup Steps\nImport the workflow into your n8n instance.\n\nConnect your Google Sheets and DeepSeek API credentials.\n\nUpdate:\n\nSheet ID and Tab Name (already embedded in node: Get revenual from google sheet).\n\nCustom sub-workflow ID (in the Call n8n Workflow Tool node).\n\nOptionally configure chatbot webhook in the When chat message received node.\n\n5. What the Workflow Does\nAccepts date inputs via AI chat interface (ChatTrigger + AI Agent).\n\nFetches raw transaction data from Google Sheets.\n\nSegments and pivots revenue by classification for:\n\nCurrent period\n\nLast month\n\nLast year\n\nAggregates totals and applies custom titles for comparison.\n\nMerges all summaries into a final unified JSON report.\n\n6. Customization Options\nReplace DeepSeek with OpenAI or other LLMs.\n\nChange the date fields or cycle comparisons (e.g., quarterly, weekly).\n\nAdd more AI analysis steps such as sentiment scoring or forecasting.\n\nModify the pivot logic to suit specific KPI tags or labels.\n\n7. Troubleshooting Tips\nIf Google Sheets fetch fails: ensure the document is shared with your n8n Google credential.\n\nIf parsing errors: verify that all dates follow the expected format.\n\nSub-workflow must be active and configured to accept the correct inputs (6 dates).\n\n8. SEO Keywords (·∫©n ho·∫∑c m√¥ t·∫£ ng·∫ßm):\nGoogle Sheets report, AI financial report, compare revenue by month, expense analysis automation, chatbot n8n report generator, n8n Google Sheet integration",
  "createdAt": "2025-07-30T08:06:27.976Z",
  "nodes": [
    {
      "id": 18,
      "icon": "file:googleSheets.svg",
      "name": "n8n-nodes-base.googleSheets",
      "codex": {
        "data": {
          "alias": [
            "CSV",
            "Sheet",
            "Spreadsheet",
            "GS"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/love-at-first-sight-ricardos-n8n-journey/",
                "icon": "‚ù§Ô∏è",
                "label": "Love at first sight: Ricardo‚Äôs n8n journey"
              },
              {
                "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                "icon": "üß¨",
                "label": "Why business process automation with n8n can change your daily life"
              },
              {
                "url": "https://n8n.io/blog/automatically-adding-expense-receipts-to-google-sheets-with-telegram-mindee-twilio-and-n8n/",
                "icon": "üßæ",
                "label": "Automatically Adding Expense Receipts to Google Sheets with Telegram, Mindee, Twilio, and n8n"
              },
              {
                "url": "https://n8n.io/blog/supercharging-your-conference-registration-process-with-n8n/",
                "icon": "üé´",
                "label": "Supercharging your conference registration process with n8n"
              },
              {
                "url": "https://n8n.io/blog/creating-triggers-for-n8n-workflows-using-polling/",
                "icon": "‚è≤",
                "label": "Creating triggers for n8n workflows using polling"
              },
              {
                "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                "icon": "store",
                "label": "6 e-commerce workflows to power up your Shopify s"
              },
              {
                "url": "https://n8n.io/blog/migrating-community-metrics-to-orbit-using-n8n/",
                "icon": "üìà",
                "label": "Migrating Community Metrics to Orbit using n8n"
              },
              {
                "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                "icon": "üí°",
                "label": "15 Google apps you can combine and automate to increase productivity"
              },
              {
                "url": "https://n8n.io/blog/your-business-doesnt-need-you-to-operate/",
                "icon": " üñ•Ô∏è",
                "label": "Hey founders! Your business doesn't need you to operate"
              },
              {
                "url": "https://n8n.io/blog/how-honest-burgers-use-automation-to-save-100k-per-year/",
                "icon": "üçî",
                "label": "How Honest Burgers Use Automation to Save $100k per year"
              },
              {
                "url": "https://n8n.io/blog/how-a-digital-strategist-uses-n8n-for-online-marketing/",
                "icon": "üíª",
                "label": "How a digital strategist uses n8n for online marketing"
              },
              {
                "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                "icon": "üß†",
                "label": "Why this Product Manager loves workflow automation with n8n"
              },
              {
                "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                "icon": "üôå",
                "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
              },
              {
                "url": "https://n8n.io/blog/how-a-membership-development-manager-automates-his-work-and-investments/",
                "icon": "üìà",
                "label": "How a Membership Development Manager automates his work and investments"
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.googlesheets/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/google/oauth-single-service/"
              }
            ]
          },
          "categories": [
            "Data & Storage",
            "Productivity"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"input\",\"output\"]",
      "defaults": {
        "name": "Google Sheets"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGZpbGw9IiMyOEI0NDYiIGQ9Ik0zNS42OSAxIDUyIDE3LjIyNXYzOS4wODdhMy42NyAzLjY3IDAgMCAxLTEuMDg0IDIuNjFBMy43IDMuNyAwIDAgMSA0OC4yOTMgNjBIMTIuNzA3YTMuNyAzLjcgMCAwIDEtMi42MjMtMS4wNzhBMy42NyAzLjY3IDAgMCAxIDkgNTYuMzEyVjQuNjg4YTMuNjcgMy42NyAwIDAgMSAxLjA4NC0yLjYxQTMuNyAzLjcgMCAwIDEgMTIuNzA3IDF6Ii8+PHBhdGggZmlsbD0iIzZBQ0U3QyIgZD0iTTM1LjY5IDEgNTIgMTcuMjI1SDM5LjM5N2MtMi4wNTQgMC0zLjcwNy0xLjgyOS0zLjcwNy0zLjg3MnoiLz48cGF0aCBmaWxsPSIjMjE5QjM4IiBkPSJNMzkuMjExIDE3LjIyNSA1MiAyMi40OHYtNS4yNTV6Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTIwLjEyIDMxLjk3NWMwLS44MTcuNjYyLTEuNDc1IDEuNDgzLTEuNDc1aDE3Ljc5NGMuODIxIDAgMS40ODIuNjU4IDEuNDgyIDEuNDc1djE1LjQ4N2MwIC44MTgtLjY2MSAxLjQ3NS0xLjQ4MiAxLjQ3NUgyMS42MDNhMS40NzYgMS40NzYgMCAwIDEtMS40ODItMS40NzRWMzEuOTc0em0yLjIyNSAxLjQ3NWg2LjY3MnYyLjIxMmgtNi42NzJ6bTAgNS4xNjJoNi42NzJ2Mi4yMTNoLTYuNjcyem0wIDUuMTYzaDYuNjcydjIuMjEyaC02LjY3MnptOS42MzgtMTAuMzI1aDYuNjcydjIuMjEyaC02LjY3MnptMCA1LjE2Mmg2LjY3MnYyLjIxM2gtNi42NzJ6bTAgNS4xNjNoNi42NzJ2Mi4yMTJoLTYuNjcyeiIvPjxwYXRoIGZpbGw9IiMyOEI0NDYiIGQ9Ik0zNC42OSAwIDUxIDE2LjIyNXYzOS4wODdhMy42NyAzLjY3IDAgMCAxLTEuMDg0IDIuNjFBMy43IDMuNyAwIDAgMSA0Ny4yOTMgNTlIMTEuNzA3YTMuNyAzLjcgMCAwIDEtMi42MjMtMS4wNzhBMy42NyAzLjY3IDAgMCAxIDggNTUuMzEyVjMuNjg4YTMuNjcgMy42NyAwIDAgMSAxLjA4NC0yLjYxQTMuNyAzLjcgMCAwIDEgMTEuNzA3IDB6Ii8+PHBhdGggZmlsbD0iIzZBQ0U3QyIgZD0iTTM0LjY5IDAgNTEgMTYuMjI1SDM4LjM5N2MtMi4wNTQgMC0zLjcwNy0xLjgyOS0zLjcwNy0zLjg3MnoiLz48cGF0aCBmaWxsPSIjMjE5QjM4IiBkPSJNMzguMjExIDE2LjIyNSA1MSAyMS40OHYtNS4yNTV6Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTE5LjEyIDMwLjk3NWMwLS44MTcuNjYyLTEuNDc1IDEuNDgzLTEuNDc1aDE3Ljc5NGMuODIxIDAgMS40ODIuNjU4IDEuNDgyIDEuNDc1djE1LjQ4N2MwIC44MTgtLjY2MSAxLjQ3NS0xLjQ4MiAxLjQ3NUgyMC42MDNhMS40NzYgMS40NzYgMCAwIDEtMS40ODItMS40NzRWMzAuOTc0em0yLjIyNSAxLjQ3NWg2LjY3MnYyLjIxMmgtNi42NzJ6bTAgNS4xNjJoNi42NzJ2Mi4yMTNoLTYuNjcyem0wIDUuMTYzaDYuNjcydjIuMjEyaC02LjY3MnptOS42MzgtMTAuMzI1aDYuNjcydjIuMjEyaC02LjY3MnptMCA1LjE2Mmg2LjY3MnYyLjIxM2gtNi42NzJ6bTAgNS4xNjNoNi42NzJ2Mi4yMTJoLTYuNjcyeiIvPjwvZz48L3N2Zz4="
      },
      "displayName": "Google Sheets",
      "typeVersion": 5,
      "nodeCategories": [
        {
          "id": 3,
          "name": "Data & Storage"
        },
        {
          "id": 4,
          "name": "Productivity"
        }
      ]
    },
    {
      "id": 24,
      "icon": "file:merge.svg",
      "name": "n8n-nodes-base.merge",
      "codex": {
        "data": {
          "alias": [
            "Join",
            "Concatenate",
            "Wait"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/how-to-sync-data-between-two-systems/",
                "icon": "üè¨",
                "label": "How to synchronize data between two systems (one-way vs. two-way sync"
              },
              {
                "url": "https://n8n.io/blog/supercharging-your-conference-registration-process-with-n8n/",
                "icon": "üé´",
                "label": "Supercharging your conference registration process with n8n"
              },
              {
                "url": "https://n8n.io/blog/migrating-community-metrics-to-orbit-using-n8n/",
                "icon": "üìà",
                "label": "Migrating Community Metrics to Orbit using n8n"
              },
              {
                "url": "https://n8n.io/blog/build-your-own-virtual-assistant-with-n8n-a-step-by-step-guide/",
                "icon": "üë¶",
                "label": "Build your own virtual assistant with n8n: A step by step guide"
              },
              {
                "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                "icon": "üôå",
                "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.merge/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Flow",
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Merge"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTc3XzUxOCkiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTAgNDhDMCAyMS40OTAzIDIxLjQ5MDMgMCA0OCAwSDExMkMxMzguNTEgMCAxNjAgMjEuNDkwMyAxNjAgNDhWNTZIMTk2LjI1MkMyNDAuNDM1IDU2IDI3Ni4yNTIgOTEuODE3MiAyNzYuMjUyIDEzNlYxOTJDMjc2LjI1MiAyMTQuMDkxIDI5NC4xNjEgMjMyIDMxNi4yNTIgMjMySDM1MlYyMjRDMzUyIDE5Ny40OSAzNzMuNDkgMTc2IDQwMCAxNzZINDY0QzQ5MC41MSAxNzYgNTEyIDE5Ny40OSA1MTIgMjI0VjI4OEM1MTIgMzE0LjUxIDQ5MC41MSAzMzYgNDY0IDMzNkg0MDBDMzczLjQ5IDMzNiAzNTIgMzE0LjUxIDM1MiAyODhWMjgwSDMxNi4yNTJDMjk0LjE2MSAyODAgMjc2LjI1MiAyOTcuOTA5IDI3Ni4yNTIgMzIwVjM3NkMyNzYuMjUyIDQyMC4xODMgMjQwLjQzNSA0NTYgMTk2LjI1MiA0NTZIMTYwVjQ2NEMxNjAgNDkwLjUxIDEzOC41MSA1MTIgMTEyIDUxMkg0OEMyMS40OTAzIDUxMiAwIDQ5MC41MSAwIDQ2NFY0MDBDMCAzNzMuNDkgMjEuNDkwMyAzNTIgNDggMzUySDExMkMxMzguNTEgMzUyIDE2MCAzNzMuNDkgMTYwIDQwMFY0MDhIMTk2LjI1MkMyMTMuOTI1IDQwOCAyMjguMjUyIDM5My42NzMgMjI4LjI1MiAzNzZWMzIwQzIyOC4yNTIgMjk0Ljc4NCAyMzguODU5IDI3Mi4wNDQgMjU1Ljg1MyAyNTZDMjM4Ljg1OSAyMzkuOTU2IDIyOC4yNTIgMjE3LjIxNiAyMjguMjUyIDE5MlYxMzZDMjI4LjI1MiAxMTguMzI3IDIxMy45MjUgMTA0IDE5Ni4yNTIgMTA0SDE2MFYxMTJDMTYwIDEzOC41MSAxMzguNTEgMTYwIDExMiAxNjBINDhDMjEuNDkwMyAxNjAgMCAxMzguNTEgMCAxMTJWNDhaTTEwNCA0OEMxMDguNDE4IDQ4IDExMiA1MS41ODE3IDExMiA1NlYxMDRDMTEyIDEwOC40MTggMTA4LjQxOCAxMTIgMTA0IDExMkg1NkM1MS41ODE3IDExMiA0OCAxMDguNDE4IDQ4IDEwNFY1NkM0OCA1MS41ODE3IDUxLjU4MTcgNDggNTYgNDhIMTA0Wk00NTYgMjI0QzQ2MC40MTggMjI0IDQ2NCAyMjcuNTgyIDQ2NCAyMzJWMjgwQzQ2NCAyODQuNDE4IDQ2MC40MTggMjg4IDQ1NiAyODhINDA4QzQwMy41ODIgMjg4IDQwMCAyODQuNDE4IDQwMCAyODBWMjMyQzQwMCAyMjcuNTgyIDQwMy41ODIgMjI0IDQwOCAyMjRINDU2Wk0xMTIgNDA4QzExMiA0MDMuNTgyIDEwOC40MTggNDAwIDEwNCA0MDBINTZDNTEuNTgxNyA0MDAgNDggNDAzLjU4MiA0OCA0MDhWNDU2QzQ4IDQ2MC40MTggNTEuNTgxNyA0NjQgNTYgNDY0SDEwNEMxMDguNDE4IDQ2NCAxMTIgNDYwLjQxOCAxMTIgNDU2VjQwOFoiIGZpbGw9IiM1NEI4QzkiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTc3XzUxOCI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
      },
      "displayName": "Merge",
      "typeVersion": 3,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 38,
      "icon": "fa:pen",
      "name": "n8n-nodes-base.set",
      "codex": {
        "data": {
          "alias": [
            "Set",
            "JS",
            "JSON",
            "Filter",
            "Transform",
            "Map"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                "icon": "üè≠",
                "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
              },
              {
                "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                "icon": "‚òÄÔ∏è",
                "label": "2021: The Year to Automate the New You with n8n"
              },
              {
                "url": "https://n8n.io/blog/automatically-pulling-and-visualizing-data-with-n8n/",
                "icon": "üìà",
                "label": "Automatically pulling and visualizing data with n8n"
              },
              {
                "url": "https://n8n.io/blog/database-monitoring-and-alerting-with-n8n/",
                "icon": "üì°",
                "label": "Database Monitoring and Alerting with n8n"
              },
              {
                "url": "https://n8n.io/blog/automatically-adding-expense-receipts-to-google-sheets-with-telegram-mindee-twilio-and-n8n/",
                "icon": "üßæ",
                "label": "Automatically Adding Expense Receipts to Google Sheets with Telegram, Mindee, Twilio, and n8n"
              },
              {
                "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                "icon": "store",
                "label": "6 e-commerce workflows to power up your Shopify s"
              },
              {
                "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                "icon": "üîó",
                "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
              },
              {
                "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                "icon": "‚öôÔ∏è",
                "label": "Automate your data processing pipeline in 9 steps"
              },
              {
                "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                "icon": "üë•",
                "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
              },
              {
                "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                "icon": "‚ö°Ô∏è",
                "label": "5 tasks you can automate with the new Notion API "
              },
              {
                "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                "icon": "üí°",
                "label": "15 Google apps you can combine and automate to increase productivity"
              },
              {
                "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                "icon": " üï∏Ô∏è",
                "label": "How uProc scraped a multi-page website with a low-code workflow"
              },
              {
                "url": "https://n8n.io/blog/building-an-expense-tracking-app-in-10-minutes/",
                "icon": "üì±",
                "label": "Building an expense tracking app in 10 minutes"
              },
              {
                "url": "https://n8n.io/blog/the-ultimate-guide-to-automate-your-video-collaboration-with-whereby-mattermost-and-n8n/",
                "icon": "üìπ",
                "label": "The ultimate guide to automate your video collaboration with Whereby, Mattermost, and n8n"
              },
              {
                "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                "icon": "ü§ñ",
                "label": "5 workflow automations for Mattermost that we love at n8n"
              },
              {
                "url": "https://n8n.io/blog/learn-to-build-powerful-api-endpoints-using-webhooks/",
                "icon": "üß∞",
                "label": "Learn to Build Powerful API Endpoints Using Webhooks"
              },
              {
                "url": "https://n8n.io/blog/how-a-membership-development-manager-automates-his-work-and-investments/",
                "icon": "üìà",
                "label": "How a Membership Development Manager automates his work and investments"
              },
              {
                "url": "https://n8n.io/blog/a-low-code-bitcoin-ticker-built-with-questdb-and-n8n-io/",
                "icon": "üìà",
                "label": "A low-code bitcoin ticker built with QuestDB and n8n.io"
              },
              {
                "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                "icon": "üé°",
                "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
              },
              {
                "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                "icon": "üéñ",
                "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
              },
              {
                "url": "https://n8n.io/blog/how-goomer-automated-their-operations-with-over-200-n8n-workflows/",
                "icon": "üõµ",
                "label": "How Goomer automated their operations with over 200 n8n workflows"
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.set/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Edit Fields"
      },
      "iconData": {
        "icon": "pen",
        "type": "icon"
      },
      "displayName": "Edit Fields (Set)",
      "typeVersion": 3,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 565,
      "icon": "fa:sticky-note",
      "name": "n8n-nodes-base.stickyNote",
      "codex": {
        "data": {
          "alias": [
            "Comments",
            "Notes",
            "Sticky"
          ],
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Sticky Note",
        "color": "#FFD233"
      },
      "iconData": {
        "icon": "sticky-note",
        "type": "icon"
      },
      "displayName": "Sticky Note",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 834,
      "icon": "file:code.svg",
      "name": "n8n-nodes-base.code",
      "codex": {
        "data": {
          "alias": [
            "cpde",
            "Javascript",
            "JS",
            "Python",
            "Script",
            "Custom Code",
            "Function"
          ],
          "details": "The Code node allows you to execute JavaScript in your workflow.",
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.code/"
              }
            ]
          },
          "categories": [
            "Development",
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers",
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Code"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTcxXzQ0MSkiPgo8cGF0aCBkPSJNMTcwLjI4MyA0OEgxOTYuNUMyMDMuMTI3IDQ4IDIwOC41IDQyLjYyNzQgMjA4LjUgMzZWMTJDMjA4LjUgNS4zNzI1OCAyMDMuMTI3IDAgMTk2LjUgMEgxNzAuMjgzQzEyNi4xIDAgOTAuMjgzIDM1LjgxNzIgOTAuMjgzIDgwVjE3NkM5MC4yODMgMjA2LjkyOCA2NS4yMTA5IDIzMiAzNC4yODMgMjMySDIzQzE2LjM3MjYgMjMyIDExIDIzNy4zNzIgMTEgMjQ0VjI2OEMxMSAyNzQuNjI3IDE2LjM3MjQgMjgwIDIyLjk5OTYgMjgwTDM0LjI4MyAyODBDNjUuMjEwOSAyODAgOTAuMjgzIDMwNS4wNzIgOTAuMjgzIDMzNlY0NDBDOTAuMjgzIDQ3OS43NjQgMTIyLjUxOCA1MTIgMTYyLjI4MyA1MTJIMTk2LjVDMjAzLjEyNyA1MTIgMjA4LjUgNTA2LjYyNyAyMDguNSA1MDBWNDc2QzIwOC41IDQ2OS4zNzMgMjAzLjEyNyA0NjQgMTk2LjUgNDY0SDE2Mi4yODNDMTQ5LjAyOCA0NjQgMTM4LjI4MyA0NTMuMjU1IDEzOC4yODMgNDQwVjMzNkMxMzguMjgzIDMwOS4wMjIgMTI4LjAxMSAyODQuNDQzIDExMS4xNjQgMjY1Ljk2MUMxMDYuMTA5IDI2MC40MTYgMTA2LjEwOSAyNTEuNTg0IDExMS4xNjQgMjQ2LjAzOUMxMjguMDExIDIyNy41NTcgMTM4LjI4MyAyMDIuOTc4IDEzOC4yODMgMTc2VjgwQzEzOC4yODMgNjIuMzI2OSAxNTIuNjEgNDggMTcwLjI4MyA0OFoiIGZpbGw9IiNGRjk5MjIiLz4KPHBhdGggZD0iTTMwNSAzNkMzMDUgNDIuNjI3NCAzMTAuMzczIDQ4IDMxNyA0OEgzNDIuOTc5QzM2MC42NTIgNDggMzc0Ljk3OCA2Mi4zMjY5IDM3NC45NzggODBWMTc2QzM3NC45NzggMjAyLjk3OCAzODUuMjUxIDIyNy41NTcgNDAyLjA5OCAyNDYuMDM5QzQwNy4xNTMgMjUxLjU4NCA0MDcuMTUzIDI2MC40MTYgNDAyLjA5OCAyNjUuOTYxQzM4NS4yNTEgMjg0LjQ0MyAzNzQuOTc4IDMwOS4wMjIgMzc0Ljk3OCAzMzZWNDMyQzM3NC45NzggNDQ5LjY3MyAzNjAuNjUyIDQ2NCAzNDIuOTc5IDQ2NEgzMTdDMzEwLjM3MyA0NjQgMzA1IDQ2OS4zNzMgMzA1IDQ3NlY1MDBDMzA1IDUwNi42MjcgMzEwLjM3MyA1MTIgMzE3IDUxMkgzNDIuOTc5QzM4Ny4xNjEgNTEyIDQyMi45NzggNDc2LjE4MyA0MjIuOTc4IDQzMlYzMzZDNDIyLjk3OCAzMDUuMDcyIDQ0OC4wNTEgMjgwIDQ3OC45NzkgMjgwSDQ5MEM0OTYuNjI3IDI4MCA1MDIgMjc0LjYyOCA1MDIgMjY4VjI0NEM1MDIgMjM3LjM3MyA0OTYuNjI4IDIzMiA0OTAgMjMyTDQ3OC45NzkgMjMyQzQ0OC4wNTEgMjMyIDQyMi45NzggMjA2LjkyOCA0MjIuOTc4IDE3NlY4MEM0MjIuOTc4IDM1LjgxNzIgMzg3LjE2MSAwIDM0Mi45NzkgMEgzMTdDMzEwLjM3MyAwIDMwNSA1LjM3MjU4IDMwNSAxMlYzNloiIGZpbGw9IiNGRjk5MjIiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTcxXzQ0MSI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
      },
      "displayName": "Code",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 5,
          "name": "Development"
        },
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 837,
      "icon": "fa:sign-out-alt",
      "name": "n8n-nodes-base.executeWorkflowTrigger",
      "codex": {
        "data": {
          "resources": {
            "generic": [],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.executeworkflowtrigger/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"trigger\"]",
      "defaults": {
        "name": "When Executed by Another Workflow",
        "color": "#ff6d5a"
      },
      "iconData": {
        "icon": "sign-out-alt",
        "type": "icon"
      },
      "displayName": "Execute Workflow Trigger",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 1119,
      "icon": "fa:robot",
      "name": "@n8n/n8n-nodes-langchain.agent",
      "codex": {
        "data": {
          "alias": [
            "LangChain",
            "Chat",
            "Conversational",
            "Plan and Execute",
            "ReAct",
            "Tools"
          ],
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/root-nodes/n8n-nodes-langchain.agent/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Agents",
              "Root Nodes"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "AI Agent",
        "color": "#404040"
      },
      "iconData": {
        "icon": "robot",
        "type": "icon"
      },
      "displayName": "AI Agent",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1163,
      "icon": "fa:database",
      "name": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.memorybufferwindow/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Memory"
            ],
            "Memory": [
              "For beginners"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Simple Memory"
      },
      "iconData": {
        "icon": "database",
        "type": "icon"
      },
      "displayName": "Simple Memory",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1205,
      "icon": "fa:network-wired",
      "name": "@n8n/n8n-nodes-langchain.toolWorkflow",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.toolworkflow/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Tools"
            ],
            "Tools": [
              "Recommended Tools"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Call n8n Workflow Tool"
      },
      "iconData": {
        "icon": "network-wired",
        "type": "icon"
      },
      "displayName": "Call n8n Workflow Tool",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1236,
      "icon": "file:aggregate.svg",
      "name": "n8n-nodes-base.aggregate",
      "codex": {
        "data": {
          "alias": [
            "Aggregate",
            "Combine",
            "Flatten",
            "Transform",
            "Array",
            "List",
            "Item"
          ],
          "details": "",
          "resources": {
            "generic": [],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.aggregate/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Aggregate"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJub25lIj48ZyBmaWxsPSIjRkY2RDVBIiBjbGlwLXBhdGg9InVybCgjYSkiPjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTMyIDE0OGMwLTYuNjI3IDUuMzczLTEyIDEyLTEyaDE0NmM2LjYyNyAwIDEyIDUuMzczIDEyIDEydjI0YzAgNi42MjctNS4zNzMgMTItMTIgMTJINDRjLTYuNjI3IDAtMTItNS4zNzMtMTItMTJ6bTAgOTZjMC02LjYyNyA1LjM3My0xMiAxMi0xMmgxNDZjNi42MjcgMCAxMiA1LjM3MyAxMiAxMnYyNGMwIDYuNjI3LTUuMzczIDEyLTEyIDEySDQ0Yy02LjYyNyAwLTEyLTUuMzczLTEyLTEyem0wIDk2YzAtNi42MjcgNS4zNzMtMTIgMTItMTJoMTQ2YzYuNjI3IDAgMTIgNS4zNzMgMTIgMTJ2MjRjMCA2LjYyNy01LjM3MyAxMi0xMiAxMkg0NGMtNi42MjcgMC0xMi01LjM3My0xMi0xMnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGQ9Ik03NCA3NmMwIDYuNjI3IDUuMzczIDEyIDEyIDEyaDExNi4yMTdjMTcuNjczIDAgMzIgMTQuMzI3IDMyIDMydjU2YzAgMjYuOTc4IDEwLjI3MiA1MS41NTcgMjcuMTE5IDcwLjAzOSA1LjA1NSA1LjU0NSA1LjA1NSAxNC4zNzcgMCAxOS45MjItMTYuODQ3IDE4LjQ4Mi0yNy4xMTkgNDMuMDYxLTI3LjExOSA3MC4wMzl2NTZjMCAxNy42NzMtMTQuMzI3IDMyLTMyIDMySDg2Yy02LjYyNyAwLTEyIDUuMzczLTEyIDEydjI0YzAgNi42MjcgNS4zNzMgMTIgMTIgMTJoMTE2LjIxN2M0NC4xODMgMCA4MC0zNS44MTcgODAtODB2LTU2YzAtMzAuOTI4IDI1LjA3Mi01NiA1Ni01NmE1Ljc4MyA1Ljc4MyAwIDAgMCA1Ljc4My01Ljc4M3YtMzYuNDM0YTUuNzgzIDUuNzgzIDAgMCAwLTUuNzgzLTUuNzgzYy0zMC45MjggMC01Ni0yNS4wNzItNTYtNTZ2LTU2YzAtNDQuMTgzLTM1LjgxNy04MC04MC04MEg4NmMtNi42MjcgMC0xMiA1LjM3My0xMiAxMnoiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0zNzYgMjQ0YzAtNi42MjcgNS4zNzMtMTIgMTItMTJoMTEyYzYuNjI3IDAgMTIgNS4zNzMgMTIgMTJ2MjRjMCA2LjYyNy01LjM3MyAxMi0xMiAxMkgzODhjLTYuNjI3IDAtMTItNS4zNzMtMTItMTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L2c+PGRlZnM+PGNsaXBQYXRoIGlkPSJhIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNMCAwaDUxMnY1MTJIMHoiLz48L2NsaXBQYXRoPjwvZGVmcz48L3N2Zz4="
      },
      "displayName": "Aggregate",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 1247,
      "icon": "fa:comments",
      "name": "@n8n/n8n-nodes-langchain.chatTrigger",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-langchain.chattrigger/"
              }
            ]
          },
          "categories": [
            "Core Nodes",
            "Langchain"
          ]
        }
      },
      "group": "[\"trigger\"]",
      "defaults": {
        "name": "When chat message received"
      },
      "iconData": {
        "icon": "comments",
        "type": "icon"
      },
      "displayName": "Chat Trigger",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    },
    {
      "id": 1280,
      "icon": "file:deepseek.svg",
      "name": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/cluster-nodes/sub-nodes/n8n-nodes-langchain.lmchatdeepseek/"
              }
            ]
          },
          "categories": [
            "AI",
            "Langchain"
          ],
          "subcategories": {
            "AI": [
              "Language Models",
              "Root Nodes"
            ],
            "Language Models": [
              "Chat Models (Recommended)"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "DeepSeek Chat Model"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCAyNCAyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48dGl0bGU+RGVlcFNlZWs8L3RpdGxlPjxwYXRoIGQ9Ik0yMy43NDggNC40ODJjLS4yNTQtLjEyNC0uMzY0LjExMy0uNTEyLjIzNC0uMDUxLjAzOS0uMDk0LjA5LS4xMzcuMTM2LS4zNzIuMzk3LS44MDYuNjU3LTEuMzczLjYyNi0uODI5LS4wNDYtMS41MzcuMjE0LTIuMTYzLjg0OC0uMTMzLS43ODItLjU3NS0xLjI0OC0xLjI0Ny0xLjU0OC0uMzUyLS4xNTYtLjcwOC0uMzExLS45NTUtLjY1LS4xNzItLjI0MS0uMjE5LS41MS0uMzA1LS43NzQtLjA1NS0uMTYtLjExLS4zMjMtLjI5My0uMzUtLjItLjAzMS0uMjc4LjEzNi0uMzU2LjI3Ni0uMzEzLjU3Mi0uNDM0IDEuMjAyLS40MjIgMS44NC4wMjcgMS40MzYuNjMzIDIuNTggMS44MzggMy4zOTMuMTM3LjA5My4xNzIuMTg3LjEyOS4zMjMtLjA4Mi4yOC0uMTguNTUyLS4yNjYuODMzLS4wNTUuMTc5LS4xMzcuMjE3LS4zMjkuMTRhNS41MjYgNS41MjYgMCAwMS0xLjczNi0xLjE4Yy0uODU3LS44MjgtMS42MzEtMS43NDItMi41OTctMi40NThhMTEuMzY1IDExLjM2NSAwIDAwLS42ODktLjQ3MWMtLjk4NS0uOTU3LjEzLTEuNzQzLjM4OC0xLjgzNi4yNy0uMDk4LjA5My0uNDMyLS43NzktLjQyOC0uODcyLjAwNC0xLjY3LjI5NS0yLjY4Ny42ODRhMy4wNTUgMy4wNTUgMCAwMS0uNDY1LjEzNyA5LjU5NyA5LjU5NyAwIDAwLTIuODgzLS4xMDJjLTEuODg1LjIxLTMuMzkgMS4xMDItNC40OTcgMi42MjNDLjA4MiA4LjYwNi0uMjMxIDEwLjY4NC4xNTIgMTIuODVjLjQwMyAyLjI4NCAxLjU2OSA0LjE3NSAzLjM2IDUuNjUzIDEuODU4IDEuNTMzIDMuOTk3IDIuMjg0IDYuNDM4IDIuMTQgMS40ODItLjA4NSAzLjEzMy0uMjg0IDQuOTk0LTEuODYuNDcuMjM0Ljk2Mi4zMjcgMS43OC4zOTcuNjMuMDU5IDEuMjM2LS4wMyAxLjcwNS0uMTI4LjczNS0uMTU2LjY4NC0uODM3LjQxOS0uOTYxLTIuMTU1LTEuMDA0LTEuNjgyLS41OTUtMi4xMTMtLjkyNiAxLjA5Ni0xLjI5NiAyLjc0Ni0yLjY0MiAzLjM5Mi03LjAwMy4wNS0uMzQ3LjAwNy0uNTY1IDAtLjg0NS0uMDA0LS4xNy4wMzUtLjIzNy4yMy0uMjU2YTQuMTczIDQuMTczIDAgMDAxLjU0NS0uNDc1YzEuMzk2LS43NjMgMS45Ni0yLjAxNSAyLjA5My0zLjUxNy4wMi0uMjMtLjAwNC0uNDY3LS4yNDctLjU4OHpNMTEuNTgxIDE4Yy0yLjA4OS0xLjY0Mi0zLjEwMi0yLjE4My0zLjUyLTIuMTYtLjM5Mi4wMjQtLjMyMS40NzEtLjIzNS43NjMuMDkuMjg4LjIwNy40ODYuMzcxLjczOS4xMTQuMTY3LjE5Mi40MTYtLjExMy42MDMtLjY3My40MTYtMS44NDItLjE0LTEuODk3LS4xNjctMS4zNjEtLjgwMi0yLjUtMS44Ni0zLjMwMS0zLjMwNy0uNzc0LTEuMzkzLTEuMjI0LTIuODg3LTEuMjk4LTQuNDgyLS4wMi0uMzg2LjA5My0uNTIyLjQ3Ny0uNTkyYTQuNjk2IDQuNjk2IDAgMDExLjUyOS0uMDM5YzIuMTMyLjMxMiAzLjk0NiAxLjI2NSA1LjQ2OCAyLjc3NC44NjguODYgMS41MjUgMS44ODcgMi4yMDIgMi44OTEuNzIgMS4wNjYgMS40OTQgMi4wODIgMi40OCAyLjkxNC4zNDguMjkyLjYyNS41MTQuODkxLjY3Ny0uODAyLjA5LTIuMTQuMTEtMy4wNTQtLjYxNHptMS02LjQ0YS4zMDYuMzA2IDAgMDEuNDE1LS4yODcuMzAyLjMwMiAwIDAxLjIuMjg4LjMwNi4zMDYgMCAwMS0uMzEuMzA3LjMwMy4zMDMgMCAwMS0uMzA0LS4zMDh6bTMuMTEgMS41OTZjLS4yLjA4MS0uMzk5LjE1MS0uNTkuMTZhMS4yNDUgMS4yNDUgMCAwMS0uNzk4LS4yNTRjLS4yNzQtLjIzLS40Ny0uMzU4LS41NTItLjc1OGExLjczIDEuNzMgMCAwMS4wMTYtLjU4OGMuMDctLjMyNy0uMDA4LS41MzctLjIzOS0uNzI3LS4xODctLjE1Ni0uNDI2LS4xOTktLjY4OC0uMTk5YS41NTkuNTU5IDAgMDEtLjI1NC0uMDc4Yy0uMTEtLjA1NC0uMi0uMTktLjExNC0uMzU4LjAyOC0uMDU0LjE2LS4xODYuMTkyLS4yMS4zNTYtLjIwMi43NjctLjEzNiAxLjE0Ni4wMTYuMzUyLjE0NC42MTguNDA4IDEuMDAxLjc4Mi4zOTEuNDUxLjQ2Mi41NzYuNjg1LjkxNC4xNzYuMjY1LjMzNi41MzcuNDQ1Ljg0OC4wNjcuMTk1LS4wMTkuMzU0LS4yNS40NTJ6IiBmaWxsPSIjNEQ2QkZFIj48L3BhdGg+PC9zdmc+Cg=="
      },
      "displayName": "DeepSeek Chat Model",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 25,
          "name": "AI"
        },
        {
          "id": 26,
          "name": "Langchain"
        }
      ]
    }
  ],
  "views": 200,
  "recentViews": 2,
  "workflow": {
    "id": "p3BhWvtYryFCnIMZ",
    "meta": {
      "instanceId": "eb2e35a6e4ba3ff63ef980c031da61d993b4f2faa0ccc19283b4ab43f9ca13e6"
    },
    "name": "Google Report",
    "tags": [],
    "nodes": [
      {
        "id": "de33033e-aff3-4999-8c76-f586716a8b50",
        "name": "DeepSeek Chat Model",
        "type": "@n8n/n8n-nodes-langchain.lmChatDeepSeek",
        "position": [
          -360,
          340
        ],
        "parameters": {
          "options": {}
        },
        "credentials": {
          "deepSeekApi": {
            "id": "FiU3VouUwvrGU8CJ",
            "name": "DeepSeek account"
          }
        },
        "typeVersion": 1
      },
      {
        "id": "030b27e4-55c0-478d-b401-aca4c9aa14a8",
        "name": "Window Buffer Memory1",
        "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
        "position": [
          -240,
          360
        ],
        "parameters": {},
        "typeVersion": 1.3
      },
      {
        "id": "c504a6ec-0783-4a36-bdbf-45e5b11963f9",
        "name": "Call n8n Workflow Tool",
        "type": "@n8n/n8n-nodes-langchain.toolWorkflow",
        "position": [
          -80,
          360
        ],
        "parameters": {
          "workflowId": {
            "__rl": true,
            "mode": "list",
            "value": "4ASVA3i1vaFwj20h",
            "cachedResultName": "Sub flowBao cao doanh thu"
          },
          "workflowInputs": {
            "value": {
              "End_Current": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End_Current', ``, 'string') }}",
              "End_LastYear": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End_LastYear', ``, 'string') }}",
              "End_LastMonth": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('End_LastMonth', ``, 'string') }}",
              "Start_Current": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start_Current', ``, 'string') }}",
              "Start_LastYear": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start_LastYear', ``, 'string') }}",
              "Start_LastMonth": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('Start_LastMonth', ``, 'string') }}"
            },
            "schema": [
              {
                "id": "Start_Current",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Start_Current",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "End_Current",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "End_Current",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Start_LastMonth",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Start_LastMonth",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "End_LastMonth",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "End_LastMonth",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Start_LastYear",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Start_LastYear",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "End_LastYear",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "End_LastYear",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              }
            ],
            "mappingMode": "defineBelow",
            "matchingColumns": [],
            "attemptToConvertTypes": false,
            "convertFieldsToString": false
          }
        },
        "typeVersion": 2.2
      },
      {
        "id": "99e1edc5-f43f-4c1b-8649-99b77ac6479c",
        "name": "When chat message received",
        "type": "@n8n/n8n-nodes-langchain.chatTrigger",
        "position": [
          -600,
          100
        ],
        "webhookId": "fbf93f24-cc03-4c72-9b6f-5d441f3b097c",
        "parameters": {
          "options": {}
        },
        "typeVersion": 1.1
      },
      {
        "id": "0eeaa722-fdf0-4afd-a837-94d26e14c1dd",
        "name": "AI Agent",
        "type": "@n8n/n8n-nodes-langchain.agent",
        "position": [
          -300,
          100
        ],
        "parameters": {
          "options": {
            "systemMessage": "=You are the company accountant. Summarize revenue and expense information from the tool, evaluate, compare, and respond accordingly. You are required to provide all information for reporting purposes, including:\n\nStart date (Start_Current),\n\nEnd date (End_Current),\n\nStart date of last month,\n\nEnd date of last month,\n\nStart of last year,\n\nEnd of last year\n\nAll dates must be in the format dd/Mm/yyyy.\n\nGenerate the output as JSON in the format without showing it in the chat, for json format example:\n\n{\n  \"Start_Current\": \"01/07/2025\",\n  \"End_Current\": \"31/07/2025\",\n  \"Start_LastMonth\": \"01/06/2025\",\n  \"End_LastMonth\": \"30/06/2025\",\n  \"Start_LastYear\": \"01/01/2024\",\n  \"End_LastYear\": \"31/12/20"
          },
          "hasOutputParser": true
        },
        "typeVersion": 2
      },
      {
        "id": "934c56a4-7534-4add-8095-1f085256af7a",
        "name": "Sticky Note",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -360,
          700
        ],
        "parameters": {
          "color": 6,
          "width": 2340,
          "height": 1180,
          "content": "## Sub-Workflow: Google Analytics Data"
        },
        "typeVersion": 1
      },
      {
        "id": "4140bc3a-d19a-4274-8ba4-84f7334a46e7",
        "name": "When Executed by Another Workflow",
        "type": "n8n-nodes-base.executeWorkflowTrigger",
        "position": [
          -100,
          1100
        ],
        "parameters": {
          "workflowInputs": {
            "values": [
              {
                "name": "Start_Current"
              },
              {
                "name": "End_Current"
              },
              {
                "name": "Start_LastMonth"
              },
              {
                "name": "End_LastMonth"
              },
              {
                "name": "Start_LastYear"
              },
              {
                "name": "End_LastYear"
              }
            ]
          }
        },
        "typeVersion": 1.1
      },
      {
        "id": "8bf4a0f4-1b40-4ac1-8138-6c831f6003e1",
        "name": "Format Date",
        "type": "n8n-nodes-base.set",
        "position": [
          60,
          1100
        ],
        "parameters": {
          "options": {},
          "assignments": {
            "assignments": [
              {
                "id": "7bbe88fb-9866-4bae-8db4-48be473fa179",
                "name": "Start_Current",
                "type": "string",
                "value": "={{ $json.Start_Current }}"
              },
              {
                "id": "7566ba91-566f-4a1e-8e85-af9d7975f266",
                "name": "End_Current",
                "type": "string",
                "value": "={{ $json.End_Current }}"
              },
              {
                "id": "db654f49-36d6-48da-9189-ff536bedd21e",
                "name": "Start_LastMonth",
                "type": "string",
                "value": "={{ $json.Start_LastMonth }}"
              },
              {
                "id": "5d708106-3c8f-4a73-b5d2-62fc93fe42f5",
                "name": "End_LastMonth",
                "type": "string",
                "value": "={{ $json.End_LastMonth }}"
              },
              {
                "id": "e4c9946c-21c0-48aa-8327-7135eaf2c4b2",
                "name": "Start_LastYear",
                "type": "string",
                "value": "={{ $json.Start_LastYear }}"
              },
              {
                "id": "38afadf2-7d8d-45d1-9ab0-970ca1497f8f",
                "name": "End_LastYear",
                "type": "string",
                "value": "={{ $json.End_LastYear }}"
              }
            ]
          }
        },
        "typeVersion": 3.4
      },
      {
        "id": "7fc2f2eb-b4d5-4ea3-bc18-e0324d65c826",
        "name": "Get revenual from google sheet",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          340,
          1100
        ],
        "parameters": {
          "options": {},
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 1168390826,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1UAMO24QtfkR50VGu1wpksuYiWffi28pHfm6bihd5IP8/edit#gid=1168390826",
            "cachedResultName": "Doanh thu theo ng√†y"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1UAMO24QtfkR50VGu1wpksuYiWffi28pHfm6bihd5IP8",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1UAMO24QtfkR50VGu1wpksuYiWffi28pHfm6bihd5IP8/edit?usp=drivesdk",
            "cachedResultName": "Data Bao cao kinh doanh"
          }
        },
        "credentials": {
          "googleSheetsOAuth2Api": {
            "id": "0Zfrl7z70DMniz8b",
            "name": "Google Sheets account"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "91092c78-4d3a-478f-b42d-c92c86595f9e",
        "name": "Pivot last circle",
        "type": "n8n-nodes-base.code",
        "onError": "continueRegularOutput",
        "position": [
          540,
          1260
        ],
        "parameters": {
          "jsCode": "// L·∫•y Start_LastMonth v√† End_LastMonth t·ª´ node Format Date\nconst startCurrentRaw = $('Format Date').first().json.Start_LastMonth;\nconst endCurrentRaw = $('Format Date').first().json.End_LastMonth;\n\n// Debug: In ra gi√° tr·ªã th√¥ c·ªßa Start_LastMonth v√† End_LastMonth\nconsole.log('Start Current Raw:', startCurrentRaw);\nconsole.log('End Current Raw:', endCurrentRaw);\n\n// H√†m chuy·ªÉn ƒë·ªïi ƒë·ªãnh d·∫°ng ng√†y DD/MM/YYYY ho·∫∑c YYYY-MM-DD th√†nh Date object\nfunction parseDate(dateStr) {\n  if (!dateStr || typeof dateStr !== 'string') {\n    console.log('Invalid date string:', dateStr);\n    return null;\n  }\n  if (dateStr.includes('/')) {\n    const [day, month, year] = dateStr.split('/').map(Number);\n    return new Date(year, month - 1, day);\n  } else if (dateStr.includes('-')) {\n    return new Date(dateStr);\n  }\n  console.log('Unrecognized date format:', dateStr);\n  return null;\n}\n\n// Chuy·ªÉn ƒë·ªïi Start_LastMonth v√† End_LastMonth th√†nh Date object\nconst startCurrent = parseDate(startCurrentRaw);\nconst endCurrent = parseDate(endCurrentRaw);\n\n// Debug: In ra gi√° tr·ªã sau khi chuy·ªÉn ƒë·ªïi\nconsole.log('Start Current Parsed:', startCurrent);\nconsole.log('End Current Parsed:', endCurrent);\n\n// Ki·ªÉm tra n·∫øu Start_LastMonth ho·∫∑c End_LastMonth kh√¥ng h·ª£p l·ªá\nif (!startCurrent || !endCurrent) {\n  throw new Error('Invalid Start_LastMonth or End_LastMonth date format');\n}\n\n// T·∫°o m·ªôt object ƒë·ªÉ l∆∞u tr·ªØ t·ªïng S·ªë ti·ªÅn theo Ph√¢n lo·∫°i\nconst aggregatedData = {};\n\n// H√†m chu·∫©n h√≥a chu·ªói: lo·∫°i b·ªè kho·∫£ng tr·∫Øng th·ª´a v√† chuy·ªÉn v·ªÅ ch·ªØ th∆∞·ªùng\nfunction normalizeString(str) {\n  return str ? str.trim().toLowerCase() : '';\n}\n\n// L·ªçc v√† t√≠nh t·ªïng\nfor (const item of $input.all()) {\n  // Chuy·ªÉn Date t·ª´ ƒë·ªãnh d·∫°ng DD/MM/YYYY ho·∫∑c YYYY-MM-DD th√†nh Date object\n  const itemDate = parseDate(item.json.Date);\n\n  if (!itemDate) {\n    console.log('Skipping item due to invalid date:', item.json);\n    continue;\n  }\n\n  const amount = Number(item.json['S·ªë ti·ªÅn']) || 0;\n\n  // Ki·ªÉm tra n·∫øu Date n·∫±m trong kho·∫£ng Start_LastMonth v√† End_LastMonth\n  if (itemDate >= startCurrent && itemDate <= endCurrent) {\n    // Chu·∫©n h√≥a Ph√¢n lo·∫°i tr∆∞·ªõc khi t·∫°o key\n    const phanLoai = normalizeString(item.json['Ph√¢n lo·∫°i']);\n\n    // T·∫°o key duy nh·∫•t t·ª´ Ph√¢n lo·∫°i\n    const key = phanLoai;\n\n    // Debug: In ra key ƒë·ªÉ ki·ªÉm tra\n    console.log('Key:', key);\n\n    // N·∫øu key ch∆∞a t·ªìn t·∫°i, kh·ªüi t·∫°o gi√° tr·ªã ban ƒë·∫ßu\n    if (!aggregatedData[key]) {\n      aggregatedData[key] = {\n        'Ph√¢n lo·∫°i': item.json['Ph√¢n lo·∫°i'], // Gi·ªØ nguy√™n gi√° tr·ªã g·ªëc ƒë·ªÉ hi·ªÉn th·ªã\n        'T·ªïng s·ªë ti·ªÅn': 0\n      };\n    }\n\n    // C·ªông d·ªìn S·ªë ti·ªÅn v√†o T·ªïng s·ªë ti·ªÅn\n    aggregatedData[key]['T·ªïng s·ªë ti·ªÅn'] += amount;\n  }\n}\n\n// Debug: In ra s·ªë l∆∞·ª£ng nh√≥m v√† d·ªØ li·ªáu ƒë√£ g·ªôp\nconsole.log('Number of groups:', Object.keys(aggregatedData).length);\nconsole.log('Aggregated Data:', aggregatedData);\n\n// Chuy·ªÉn object aggregatedData th√†nh m·∫£ng ƒë·ªÉ tr·∫£ v·ªÅ\nconst result = Object.values(aggregatedData);\n\nreturn result.map(item => ({ json: item }));"
        },
        "retryOnFail": true,
        "typeVersion": 2
      },
      {
        "id": "03bf6db2-3d53-4507-b286-0b166e8ab8a3",
        "name": "Pivot current circle",
        "type": "n8n-nodes-base.code",
        "onError": "continueRegularOutput",
        "position": [
          480,
          940
        ],
        "parameters": {
          "jsCode": "// L·∫•y Start_Current v√† End_Current t·ª´ node Format Date\nconst startCurrentRaw = $('Format Date').first().json.Start_Current;\nconst endCurrentRaw = $('Format Date').first().json.End_Current;\n\n// Debug: In ra gi√° tr·ªã th√¥ c·ªßa Start_Current v√† End_Current\nconsole.log('Start Current Raw:', startCurrentRaw);\nconsole.log('End Current Raw:', endCurrentRaw);\n\n// H√†m chuy·ªÉn ƒë·ªïi ƒë·ªãnh d·∫°ng ng√†y DD/MM/YYYY ho·∫∑c YYYY-MM-DD th√†nh Date object\nfunction parseDate(dateStr) {\n  if (!dateStr || typeof dateStr !== 'string') {\n    console.log('Invalid date string:', dateStr);\n    return null;\n  }\n  if (dateStr.includes('/')) {\n    const [day, month, year] = dateStr.split('/').map(Number);\n    return new Date(year, month - 1, day);\n  } else if (dateStr.includes('-')) {\n    return new Date(dateStr);\n  }\n  console.log('Unrecognized date format:', dateStr);\n  return null;\n}\n\n// Chuy·ªÉn ƒë·ªïi Start_Current v√† End_Current th√†nh Date object\nconst startCurrent = parseDate(startCurrentRaw);\nconst endCurrent = parseDate(endCurrentRaw);\n\n// Debug: In ra gi√° tr·ªã sau khi chuy·ªÉn ƒë·ªïi\nconsole.log('Start Current Parsed:', startCurrent);\nconsole.log('End Current Parsed:', endCurrent);\n\n// Ki·ªÉm tra n·∫øu Start_Current ho·∫∑c End_Current kh√¥ng h·ª£p l·ªá\nif (!startCurrent || !endCurrent) {\n  throw new Error('Invalid Start_Current or End_Current date format');\n}\n\n// T·∫°o m·ªôt object ƒë·ªÉ l∆∞u tr·ªØ t·ªïng S·ªë ti·ªÅn theo Ph√¢n lo·∫°i\nconst aggregatedData = {};\n\n// H√†m chu·∫©n h√≥a chu·ªói: lo·∫°i b·ªè kho·∫£ng tr·∫Øng th·ª´a v√† chuy·ªÉn v·ªÅ ch·ªØ th∆∞·ªùng\nfunction normalizeString(str) {\n  return str ? str.trim().toLowerCase() : '';\n}\n\n// L·ªçc v√† t√≠nh t·ªïng\nfor (const item of $input.all()) {\n  // Chuy·ªÉn Date t·ª´ ƒë·ªãnh d·∫°ng DD/MM/YYYY ho·∫∑c YYYY-MM-DD th√†nh Date object\n  const itemDate = parseDate(item.json.Date);\n\n  if (!itemDate) {\n    console.log('Skipping item due to invalid date:', item.json);\n    continue;\n  }\n\n  const amount = Number(item.json['S·ªë ti·ªÅn']) || 0;\n\n  // Ki·ªÉm tra n·∫øu Date n·∫±m trong kho·∫£ng Start_Current v√† End_Current\n  if (itemDate >= startCurrent && itemDate <= endCurrent) {\n    // Chu·∫©n h√≥a Ph√¢n lo·∫°i tr∆∞·ªõc khi t·∫°o key\n    const phanLoai = normalizeString(item.json['Ph√¢n lo·∫°i']);\n\n    // T·∫°o key duy nh·∫•t t·ª´ Ph√¢n lo·∫°i\n    const key = phanLoai;\n\n    // Debug: In ra key ƒë·ªÉ ki·ªÉm tra\n    console.log('Key:', key);\n\n    // N·∫øu key ch∆∞a t·ªìn t·∫°i, kh·ªüi t·∫°o gi√° tr·ªã ban ƒë·∫ßu\n    if (!aggregatedData[key]) {\n      aggregatedData[key] = {\n        'Ph√¢n lo·∫°i': item.json['Ph√¢n lo·∫°i'], // Gi·ªØ nguy√™n gi√° tr·ªã g·ªëc ƒë·ªÉ hi·ªÉn th·ªã\n        'T·ªïng s·ªë ti·ªÅn': 0\n      };\n    }\n\n    // C·ªông d·ªìn S·ªë ti·ªÅn v√†o T·ªïng s·ªë ti·ªÅn\n    aggregatedData[key]['T·ªïng s·ªë ti·ªÅn'] += amount;\n  }\n}\n\n// Debug: In ra s·ªë l∆∞·ª£ng nh√≥m v√† d·ªØ li·ªáu ƒë√£ g·ªôp\nconsole.log('Number of groups:', Object.keys(aggregatedData).length);\nconsole.log('Aggregated Data:', aggregatedData);\n\n// Chuy·ªÉn object aggregatedData th√†nh m·∫£ng ƒë·ªÉ tr·∫£ v·ªÅ\nconst result = Object.values(aggregatedData);\n\nreturn result.map(item => ({ json: item }));"
        },
        "retryOnFail": true,
        "typeVersion": 2
      },
      {
        "id": "aa5957fa-35a9-42a2-8c47-cdff23f9e683",
        "name": "Format data current circle",
        "type": "n8n-nodes-base.set",
        "position": [
          700,
          780
        ],
        "parameters": {
          "options": {},
          "assignments": {
            "assignments": [
              {
                "id": "657e8f86-3f7e-44d0-9428-4150ec0b5e59",
                "name": "currentCycle.startDate",
                "type": "string",
                "value": "={{ $('Format Date').item.json.Start_Current }}"
              },
              {
                "id": "e2b7aa83-66d2-4579-9f1b-1cfa08d08f3c",
                "name": "currentCycle.endDate",
                "type": "string",
                "value": "={{ $('Format Date').item.json.End_Current }}"
              }
            ]
          }
        },
        "typeVersion": 3.4
      },
      {
        "id": "82656e1d-2361-4ce1-b28d-19c7469abc99",
        "name": "Sum current circle",
        "type": "n8n-nodes-base.aggregate",
        "position": [
          700,
          940
        ],
        "parameters": {
          "options": {},
          "aggregate": "aggregateAllItemData"
        },
        "typeVersion": 1
      },
      {
        "id": "f13eaa1b-bd70-4ee2-a588-e633c5a73c65",
        "name": "Format data last circle",
        "type": "n8n-nodes-base.set",
        "position": [
          720,
          1100
        ],
        "parameters": {
          "options": {},
          "assignments": {
            "assignments": [
              {
                "id": "657e8f86-3f7e-44d0-9428-4150ec0b5e59",
                "name": "lastMonthCycle.startDate",
                "type": "string",
                "value": "={{ $('Format Date').item.json.Start_LastMonth }}"
              },
              {
                "id": "e2b7aa83-66d2-4579-9f1b-1cfa08d08f3c",
                "name": "lastMonthCycle.endDate",
                "type": "string",
                "value": "={{ $('Format Date').item.json.End_LastMonth }}"
              }
            ]
          }
        },
        "typeVersion": 3.4
      },
      {
        "id": "6377a403-c89b-4a21-928a-077ee5106019",
        "name": "Sum last circle",
        "type": "n8n-nodes-base.aggregate",
        "position": [
          720,
          1260
        ],
        "parameters": {
          "options": {},
          "aggregate": "aggregateAllItemData"
        },
        "typeVersion": 1
      },
      {
        "id": "4fe96658-e302-42a8-8eba-9e059c3583bf",
        "name": "Sum data last transfer month",
        "type": "n8n-nodes-base.merge",
        "position": [
          960,
          1180
        ],
        "parameters": {},
        "typeVersion": 3.1
      },
      {
        "id": "d2c5d065-a199-4551-a3f5-fb21994186a3",
        "name": "Sum data current transfer month",
        "type": "n8n-nodes-base.merge",
        "position": [
          960,
          800
        ],
        "parameters": {},
        "typeVersion": 3.1
      },
      {
        "id": "fa5e3abc-df57-4140-a68e-f328b33b6bd6",
        "name": "Change title 1",
        "type": "n8n-nodes-base.aggregate",
        "position": [
          1180,
          800
        ],
        "parameters": {
          "options": {},
          "aggregate": "aggregateAllItemData",
          "destinationFieldName": "Chu k·ª≥ hi·ªán t·∫°i"
        },
        "typeVersion": 1
      },
      {
        "id": "cabe2138-71bb-4b40-add9-f9ac8f7b7f55",
        "name": "Change title 2",
        "type": "n8n-nodes-base.aggregate",
        "position": [
          1180,
          1180
        ],
        "parameters": {
          "options": {},
          "aggregate": "aggregateAllItemData",
          "destinationFieldName": "Chu k·ª≥ th√°ng tr∆∞·ªõc"
        },
        "typeVersion": 1
      },
      {
        "id": "db552cf2-6f91-44ee-aa37-84d3753b983c",
        "name": "Collect all",
        "type": "n8n-nodes-base.merge",
        "position": [
          1520,
          1180
        ],
        "parameters": {
          "numberInputs": 3
        },
        "typeVersion": 3.1
      },
      {
        "id": "dcc23ef7-3e1c-4aa5-aee8-dcfc06ee0097",
        "name": "Change title out come",
        "type": "n8n-nodes-base.aggregate",
        "position": [
          1740,
          1180
        ],
        "parameters": {
          "options": {},
          "aggregate": "aggregateAllItemData",
          "destinationFieldName": "data doanh thu"
        },
        "typeVersion": 1
      },
      {
        "id": "e17379be-782f-4c9f-bbd4-b99e8b844613",
        "name": "Format data last year circle",
        "type": "n8n-nodes-base.set",
        "position": [
          720,
          1480
        ],
        "parameters": {
          "options": {},
          "assignments": {
            "assignments": [
              {
                "id": "657e8f86-3f7e-44d0-9428-4150ec0b5e59",
                "name": "lastYearCycle.startDate",
                "type": "string",
                "value": "={{ $('Format Date').item.json.Start_LastYear }}"
              },
              {
                "id": "e2b7aa83-66d2-4579-9f1b-1cfa08d08f3c",
                "name": "lastYearCycle.endDate",
                "type": "string",
                "value": "={{ $('Format Date').item.json.End_LastYear }}"
              }
            ]
          }
        },
        "typeVersion": 3.4
      },
      {
        "id": "ef07c8d5-7bb8-41b3-bf52-4d6dd73e1c8c",
        "name": "Pivot last year cirle",
        "type": "n8n-nodes-base.code",
        "onError": "continueRegularOutput",
        "position": [
          500,
          1680
        ],
        "parameters": {
          "jsCode": "// Get Start_LastYear and End_LastYear from node Format Date\nconst startCurrentRaw = $('Format Date').first().json.Start_LastYear;\nconst endCurrentRaw = $('Format Date').first().json.End_LastYear;\n\n// Debug: Start_LastYear and End_LastYear\nconsole.log('Start Current Raw:', startCurrentRaw);\nconsole.log('End Current Raw:', endCurrentRaw);\n\n// format DD/MM/YYYY or YYYY-MM-DD to Date object\nfunction parseDate(dateStr) {\n  if (!dateStr || typeof dateStr !== 'string') {\n    console.log('Invalid date string:', dateStr);\n    return null;\n  }\n  if (dateStr.includes('/')) {\n    const [day, month, year] = dateStr.split('/').map(Number);\n    return new Date(year, month - 1, day);\n  } else if (dateStr.includes('-')) {\n    return new Date(dateStr);\n  }\n  console.log('Unrecognized date format:', dateStr);\n  return null;\n}\n\n// change Start_LastYear and End_LastYear to Date object\nconst startCurrent = parseDate(startCurrentRaw);\nconst endCurrent = parseDate(endCurrentRaw);\n\n// Debug: print\nconsole.log('Start Current Parsed:', startCurrent);\nconsole.log('End Current Parsed:', endCurrent);\n\n// Validate Start_LastYear or End_LastYear\nif (!startCurrent || !endCurrent) {\n  throw new Error('Invalid Start_LastYear or End_LastYear date format');\n}\n\n// Create object Sum by Type\nconst aggregatedData = {};\n\n// trim\nfunction normalizeString(str) {\n  return str ? str.trim().toLowerCase() : '';\n}\n\n// Filter and summary\nfor (const item of $input.all()) {\n  // Format DD/MM/YYYY or YYYY-MM-DD to Date object\n  const itemDate = parseDate(item.json.Date);\n\n  if (!itemDate) {\n    console.log('Skipping item due to invalid date:', item.json);\n    continue;\n  }\n\n  const amount = Number(item.json['S·ªë ti·ªÅn']) || 0;\n\n  // Validate Date between Start_LastYear and End_LastYear\n  if (itemDate >= startCurrent && itemDate <= endCurrent) {\n    // Format\n    const phanLoai = normalizeString(item.json['Ph√¢n lo·∫°i']);\n\n    // create key\n    const key = phanLoai;\n\n    // Debug: print\n    console.log('Key:', key);\n\n    // Check\n    if (!aggregatedData[key]) {\n      aggregatedData[key] = {\n        'Ph√¢n lo·∫°i': item.json['Ph√¢n lo·∫°i'], // Keep\n        'T·ªïng s·ªë ti·ªÅn': 0\n      };\n    }\n\n    // Add to Sum amount\n    aggregatedData[key]['T·ªïng s·ªë ti·ªÅn'] += amount;\n  }\n}\n\n// Debug: print\nconsole.log('Number of groups:', Object.keys(aggregatedData).length);\nconsole.log('Aggregated Data:', aggregatedData);\n\n// Format object aggregatedData to array\nconst result = Object.values(aggregatedData);\n\nreturn result.map(item => ({ json: item }));"
        },
        "retryOnFail": true,
        "typeVersion": 2
      },
      {
        "id": "c5695aff-f725-4dd1-8f5f-61c37cc3fb06",
        "name": "Sum last year circle",
        "type": "n8n-nodes-base.aggregate",
        "position": [
          720,
          1680
        ],
        "parameters": {
          "options": {},
          "aggregate": "aggregateAllItemData"
        },
        "typeVersion": 1
      },
      {
        "id": "ed643ebd-1524-4af4-b1ba-0ddd705460c8",
        "name": "Add data last year",
        "type": "n8n-nodes-base.merge",
        "position": [
          960,
          1620
        ],
        "parameters": {},
        "typeVersion": 3.1
      },
      {
        "id": "10b6ecab-05b6-4cb9-ae6f-1e6d242f7a96",
        "name": "Change title",
        "type": "n8n-nodes-base.aggregate",
        "position": [
          1180,
          1620
        ],
        "parameters": {
          "options": {},
          "aggregate": "aggregateAllItemData",
          "destinationFieldName": "Chu k·ª≥ nƒÉm tr∆∞·ªõc"
        },
        "typeVersion": 1
      }
    ],
    "active": false,
    "pinData": {},
    "settings": {
      "executionOrder": "v1"
    },
    "versionId": "eec79b51-8f52-447f-9890-59c12f6b7eb6",
    "connections": {
      "Collect all": {
        "main": [
          [
            {
              "node": "Change title out come",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Format Date": {
        "main": [
          [
            {
              "node": "Get revenual from google sheet",
              "type": "main",
              "index": 0
            },
            {
              "node": "Format data current circle",
              "type": "main",
              "index": 0
            },
            {
              "node": "Format data last circle",
              "type": "main",
              "index": 0
            },
            {
              "node": "Format data last year circle",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Change title": {
        "main": [
          [
            {
              "node": "Collect all",
              "type": "main",
              "index": 2
            }
          ]
        ]
      },
      "Change title 1": {
        "main": [
          [
            {
              "node": "Collect all",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Change title 2": {
        "main": [
          [
            {
              "node": "Collect all",
              "type": "main",
              "index": 1
            }
          ]
        ]
      },
      "Sum last circle": {
        "main": [
          [
            {
              "node": "Sum data last transfer month",
              "type": "main",
              "index": 1
            }
          ]
        ]
      },
      "Pivot last circle": {
        "main": [
          [
            {
              "node": "Sum last circle",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Add data last year": {
        "main": [
          [
            {
              "node": "Change title",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Sum current circle": {
        "main": [
          [
            {
              "node": "Sum data current transfer month",
              "type": "main",
              "index": 1
            }
          ]
        ]
      },
      "DeepSeek Chat Model": {
        "ai_languageModel": [
          [
            {
              "node": "AI Agent",
              "type": "ai_languageModel",
              "index": 0
            }
          ]
        ]
      },
      "Pivot current circle": {
        "main": [
          [
            {
              "node": "Sum current circle",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Sum last year circle": {
        "main": [
          [
            {
              "node": "Add data last year",
              "type": "main",
              "index": 1
            }
          ]
        ]
      },
      "Pivot last year cirle": {
        "main": [
          [
            {
              "node": "Sum last year circle",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Window Buffer Memory1": {
        "ai_memory": [
          [
            {
              "node": "AI Agent",
              "type": "ai_memory",
              "index": 0
            }
          ]
        ]
      },
      "Call n8n Workflow Tool": {
        "ai_tool": [
          [
            {
              "node": "AI Agent",
              "type": "ai_tool",
              "index": 0
            }
          ]
        ]
      },
      "Format data last circle": {
        "main": [
          [
            {
              "node": "Sum data last transfer month",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Format data current circle": {
        "main": [
          [
            {
              "node": "Sum data current transfer month",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "When chat message received": {
        "main": [
          [
            {
              "node": "AI Agent",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Format data last year circle": {
        "main": [
          [
            {
              "node": "Add data last year",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Sum data last transfer month": {
        "main": [
          [
            {
              "node": "Change title 2",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Get revenual from google sheet": {
        "main": [
          [
            {
              "node": "Pivot current circle",
              "type": "main",
              "index": 0
            },
            {
              "node": "Pivot last circle",
              "type": "main",
              "index": 0
            },
            {
              "node": "Pivot last year cirle",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Sum data current transfer month": {
        "main": [
          [
            {
              "node": "Change title 1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "When Executed by Another Workflow": {
        "main": [
          [
            {
              "node": "Format Date",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    }
  },
  "lastUpdatedBy": 29,
  "workflowInfo": {
    "nodeCount": 26,
    "nodeTypes": {
      "n8n-nodes-base.set": {
        "count": 4
      },
      "n8n-nodes-base.code": {
        "count": 3
      },
      "n8n-nodes-base.merge": {
        "count": 4
      },
      "n8n-nodes-base.aggregate": {
        "count": 7
      },
      "n8n-nodes-base.stickyNote": {
        "count": 1
      },
      "n8n-nodes-base.googleSheets": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.agent": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.chatTrigger": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.toolWorkflow": {
        "count": 1
      },
      "n8n-nodes-base.executeWorkflowTrigger": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.lmChatDeepSeek": {
        "count": 1
      },
      "@n8n/n8n-nodes-langchain.memoryBufferWindow": {
        "count": 1
      }
    }
  },
  "categories": [
    {
      "id": 35,
      "name": "Document Extraction"
    },
    {
      "id": 47,
      "name": "AI Chatbot"
    }
  ],
  "image": []
}