{
  "id": 7039,
  "name": "Send School Fee Reminders with Payment Links via Email & WhatsApp",
  "totalViews": 340,
  "purchaseUrl": null,
  "user": {
    "name": "Oneclick AI Squad",
    "username": "oneclick-ai",
    "bio": "The AI Squad Initiative is a pioneering effort to build, automate and scale AI-powered workflows using n8n.io. Our mission is to help individuals and businesses integrate AI agents seamlessly into their daily operations  from automating tasks and enhancing productivity to creating innovative, intelligent solutions. We design modular, reusable AI workflow templates that empower creators, developers and teams to supercharge their automation with minimal effort and maximum impact.",
    "verified": true,
    "links": [
      "https://www.oneclickitsolution.com/"
    ],
    "avatar": "https://gravatar.com/avatar/848fca91367142f65f9e5c55d64e5c9952b160d7b060d103b52aa343c6bc7b3d?r=pg&d=retro&size=200"
  },
  "description": "# üìö Automated School Fee Reminder Workflow with Payment Link\n\nAutomatically sends fee reminders (via email and WhatsApp) to parents with secure payment links, 3 days before the due date.\n\n\n## üîß Main Components\n\n* **Daily Fee Check ‚Äì 8 AM**\n  Scheduled trigger that starts the workflow daily at 8 AM.\n\n* **Read Pending Fees**\n  Fetches student fee records from an Excel sheet (using `getAll` method).\n\n* **Process Fee Reminders**\n  Filters records to find pending fees due within the next 3 days.\n\n* **Prepare Email Reminder**\n  Generates personalized email messages with payment links.\n\n* **Wait for Email Preparation**\n  Adds delay/wait condition for email logic readiness.\n\n* **Send Email Reminder**\n  Sends the fee reminder email with a secure payment link to the parent.\n\n* **Prepare WhatsApp Reminder**\n  Generates WhatsApp-friendly messages with fee and payment details.\n\n* **Wait for WhatsApp Preparation**\n  Waits for WhatsApp message logic to complete.\n\n* **Send WhatsApp Message**\n  Sends the message to the parent‚Äôs WhatsApp number using a message API.\n\n* **Update Reminder Status**\n  Updates the Excel file to mark reminders as sent to avoid duplicates.\n\n\n## üß© Channels Used\n\n* üìß **Email** ‚Äì with personalized payment link\n* üí¨ **WhatsApp** ‚Äì formatted reminder message\n\n\n## üîê Payment Integration\n\nSecure payment links are auto-generated per student to enable direct and safe online fee payments.\n\n\n## ‚úÖ Essential Prerequisites\n\n* Excel sheet with fee records (`student_fee_data.xlsx`)\n* SMTP credentials for sending email\n* WhatsApp API or provider integration (like Twilio or Gupshup)\n* Access to a payment gateway or service for link generation\n* File storage access to update reminder status in Excel\n\n\n## üìÅ Required Excel File Structure (`student_fee_data.xlsx`)\n\n| Student ID | Name | Email | Phone | Fee Due Date | Amount | Reminder Sent |\n| ---------- | ---- | ----- | ----- | ------------ | ------ | ------------- |\n\n\n## üßæ Expected Input Format Example\n\n```json\n{\n  \"studentId\": \"ST123\",\n  \"name\": \"Ria Mehta\",\n  \"email\": \"ria.mehta@example.com\",\n  \"phone\": \"+919123456789\",\n  \"dueDate\": \"2025-08-10\",\n  \"amount\": \"‚Çπ5000\",\n  \"reminderSent\": \"No\"\n}\n```\n\n\n## üöÄ Key Features\n\n* ‚è∞ **Scheduled Daily Execution** ‚Äì Fully automated at 8 AM\n* üßÆ **Due-Date Filtering** ‚Äì Only targets fees due in the next 3 days\n* üí¨ **Multi-Channel Notifications** ‚Äì Sends reminders via both Email and WhatsApp\n* üîó **Secure Payment Links** ‚Äì Auto-generated for each student\n* üîÑ **Reminder Tracking** ‚Äì Prevents duplicate reminders by updating status\n\n\n## ‚öôÔ∏è Quick Setup Guide\n\n1. **Import Workflow JSON** into your n8n instance.\n2. Configure **schedule** in the ‚ÄúDaily Fee Check‚Äù node (default: 8 AM).\n3. Set **Excel file path** in the ‚ÄúRead Pending Fees‚Äù node.\n4. Update your **fee processing logic** in the ‚ÄúProcess Fee Reminders‚Äù node.\n5. Add **email credentials** in the ‚ÄúSend Email Reminder‚Äù node.\n6. Integrate **WhatsApp provider** API in the ‚ÄúSend message‚Äù node.\n7. Define how you **generate secure payment links**.\n8. Test with sample data and activate workflow.\n\n\n## üõ†Ô∏è Parameters to Configure\n\n| Parameter          | Description                                |\n| ------------------ | ------------------------------------------ |\n| `excel_file_path`  | Path to the fee tracking Excel file        |\n| `smtp_host`        | SMTP server for sending email reminders    |\n| `smtp_user`        | Email username                             |\n| `smtp_password`    | Email password                             |\n| `whatsapp_api_key` | WhatsApp API key for sending messages      |\n| `payment_api_url`  | URL for generating payment links           |\n| `admin_email`      | (Optional) Admin email for error reporting |\n\n\n",
  "createdAt": "2025-08-06T07:05:30.791Z",
  "nodes": [
    {
      "id": 11,
      "icon": "fa:envelope",
      "name": "n8n-nodes-base.emailSend",
      "codex": {
        "data": {
          "alias": [
            "SMTP",
            "email",
            "human",
            "form",
            "wait",
            "hitl",
            "approval"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                "icon": "‚òÄÔ∏è",
                "label": "2021: The Year to Automate the New You with n8n"
              },
              {
                "url": "https://n8n.io/blog/build-your-own-virtual-assistant-with-n8n-a-step-by-step-guide/",
                "icon": "üë¶",
                "label": "Build your own virtual assistant with n8n: A step by step guide"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.sendemail/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/credentials/sendemail/"
              }
            ]
          },
          "categories": [
            "Communication",
            "HITL",
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "HITL": [
              "Human in the Loop"
            ]
          }
        }
      },
      "group": "[\"output\"]",
      "defaults": {
        "name": "Send Email",
        "color": "#00bb88"
      },
      "iconData": {
        "icon": "envelope",
        "type": "icon"
      },
      "displayName": "Send Email",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 6,
          "name": "Communication"
        },
        {
          "id": 9,
          "name": "Core Nodes"
        },
        {
          "id": 28,
          "name": "HITL"
        }
      ]
    },
    {
      "id": 322,
      "icon": "file:excel.svg",
      "name": "n8n-nodes-base.microsoftExcel",
      "codex": {
        "data": {
          "alias": [
            "_Excel",
            "Excel",
            "Sheet",
            "CSV",
            "Spreadsheet"
          ],
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.microsoftexcel/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/microsoft/"
              }
            ]
          },
          "categories": [
            "Data & Storage",
            "Productivity"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Microsoft Excel 365"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCI+PGcgZmlsbD0iIzAyNzIzQiIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGQ9Ik00My4xIDIwLjIyN2g5LjUxMnY0LjY5MmgtOS41MTN6bTAtNy4wMzRoOS41MTJ2NC42OWgtOS41MTN6bTAgMTQuMjI3aDkuNTEydjQuNjkxaC05LjUxM3ptMCA3LjAzNmg5LjUxMnY0LjY5MWgtOS41MTN6Ii8+PHBhdGggZD0iTTQzLjEgNDEuNjQ5aDkuNTEydjQuNjloLTkuNTEzek01OC4wNyA2Ljc4SDM1LjE0NlYuMzdMLjM3IDYuNDY3djQ3LjIybDM0Ljc3NiA1Ljk0MnYtNy4xODZINTguMDdjLjkzNSAwIDEuNTU5LS43ODEgMS41NTktMS41NTVWOC4zNDRjMC0uNzgxLS42MjQtMS41NTUtMS41Ni0xLjU1NVY2Ljc4ek0yMC4wMTggNDAuNTU0bC0zLjI3NC04LjU5M2gtLjE0OGMwIC4xNDktMy4yNzUgOC4xMy0zLjI3NSA4LjEzbC00LjM2Ni0uMzEyTDE0LjEgMjkuNjE2IDkuNDIyIDE5LjQ1M2w0LjM2Ny0uMzEyIDIuOTYzIDcuOTc0aC4xNDhjMC0uMTQ4IDMuMjc0LTguMjg3IDMuMjc0LTguMjg3bDQuNTIyLS4zMTItNS40NTcgMTEuMTAxIDUuNjE0IDExLjEwMi00LjgzNC0uMTQ5ek01Ny42IDUwLjcxN0gzNS4xNDZ2LTQuMzdoNS40NTh2LTQuNjkxaC01LjQ1OHYtMi4zNTJoNS40NTh2LTQuNjloLTUuNDU4di0yLjM0N2g1LjQ1OHYtNC42OWgtNS40NThWMjUuMjNoNS40NTh2LTQuNjloLTUuNDU4di0yLjM0NWg1LjQ1OHYtNC42OTJoLTUuNDU4di00LjY5aDIyLjQ1NnY0MS45MDNoLS4wMDF6Ii8+PHBhdGggZD0iTTQyLjcyOSAxOS44NTdoOS41MTJ2NC42OTFINDIuNzN6bTAtNy4wMzVoOS41MTJ2NC42OTFINDIuNzN6bTAgMTQuMjI4aDkuNTEydjQuNjlINDIuNzN6bTAgNy4wMzZoOS41MTJ2NC42OTFINDIuNzN6Ii8+PHBhdGggZD0iTTQyLjcyOSA0MS4yNzloOS41MTJ2NC42OUg0Mi43M3pNNTcuNjk5IDYuNDFIMzQuNzc2VjBMMCA2LjA5OHY0Ny4yMmwzNC43NzYgNS45NDF2LTcuMTg1aDIyLjkyM2MuOTM2IDAgMS41Ni0uNzgxIDEuNTYtMS41NTVWNy45NzRjMC0uNzgxLS42MjQtMS41NTUtMS41Ni0xLjU1NXpNMTkuNjQ3IDQwLjE4NGwtMy4yNzQtOC41OTNoLS4xNDhjMCAuMTQ4LTMuMjc0IDguMTMtMy4yNzQgOC4xM2wtNC4zNjctLjMxMiA1LjE0Ni0xMC4xNjMtNC42NzgtMTAuMTYzIDQuMzY3LS4zMTMgMi45NjIgNy45NzRoLjE0OWMwLS4xNDggMy4yNzQtOC4yODYgMy4yNzQtOC4yODZsNC41MjItLjMxMy01LjQ1OCAxMS4xMDIgNS42MTUgMTEuMTAxLTQuODM0LS4xNDh6TTU3LjIzIDUwLjM0N0gzNC43NzZ2LTQuMzdoNS40NTd2LTQuNjkyaC01LjQ1N3YtMi4zNTJoNS40NTd2LTQuNjloLTUuNDU3di0yLjM0N2g1LjQ1N3YtNC42OWgtNS40NTdWMjQuODZoNS40NTd2LTQuNjloLTUuNDU3di0yLjM0Nmg1LjQ1N3YtNC42OTJoLTUuNDU3di00LjY5aDIyLjQ1NnY0MS45MDR6Ii8+PC9nPjwvc3ZnPg=="
      },
      "displayName": "Microsoft Excel 365",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 3,
          "name": "Data & Storage"
        },
        {
          "id": 4,
          "name": "Productivity"
        }
      ]
    },
    {
      "id": 514,
      "icon": "fa:pause-circle",
      "name": "n8n-nodes-base.wait",
      "codex": {
        "data": {
          "alias": [
            "pause",
            "sleep",
            "delay",
            "timeout"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                "icon": "üë•",
                "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.wait/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers",
              "Flow"
            ]
          }
        }
      },
      "group": "[\"organization\"]",
      "defaults": {
        "name": "Wait",
        "color": "#804050"
      },
      "iconData": {
        "icon": "pause-circle",
        "type": "icon"
      },
      "displayName": "Wait",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 565,
      "icon": "fa:sticky-note",
      "name": "n8n-nodes-base.stickyNote",
      "codex": {
        "data": {
          "alias": [
            "Comments",
            "Notes",
            "Sticky"
          ],
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Sticky Note",
        "color": "#FFD233"
      },
      "iconData": {
        "icon": "sticky-note",
        "type": "icon"
      },
      "displayName": "Sticky Note",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 827,
      "icon": "file:whatsapp.svg",
      "name": "n8n-nodes-base.whatsApp",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.whatsapp/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/whatsapp/"
              }
            ]
          },
          "categories": [
            "Communication",
            "HITL"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "HITL": [
              "Human in the Loop"
            ]
          }
        }
      },
      "group": "[\"output\"]",
      "defaults": {
        "name": "WhatsApp Business Cloud"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIHZpZXdCb3g9IjAgMCA0OCA0OCI+PHBhdGggZmlsbD0iI2ZmZiIgZD0ibTQuODY4IDQzLjMwMyAyLjY5NC05LjgzNWExOC45NCAxOC45NCAwIDAgMS0yLjUzNS05LjQ4OUM1LjAzMiAxMy41MTQgMTMuNTQ4IDUgMjQuMDE0IDVhMTguODcgMTguODcgMCAwIDEgMTMuNDMgNS41NjZBMTguODcgMTguODcgMCAwIDEgNDMgMjMuOTk0Yy0uMDA0IDEwLjQ2NS04LjUyMiAxOC45OC0xOC45ODYgMTguOThoLS4wMDhhMTkgMTkgMCAwIDEtOS4wNzMtMi4zMTF6Ii8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTQuODY4IDQzLjgwM2EuNS41IDAgMCAxLS40ODItLjYzMWwyLjYzOS05LjYzNmExOS41IDE5LjUgMCAwIDEtMi40OTctOS41NTZDNC41MzIgMTMuMjM4IDEzLjI3MyA0LjUgMjQuMDE0IDQuNWExOS4zNyAxOS4zNyAwIDAgMSAxMy43ODQgNS43MTNBMTkuMzYgMTkuMzYgMCAwIDEgNDMuNSAyMy45OTRjLS4wMDQgMTAuNzQxLTguNzQ2IDE5LjQ4LTE5LjQ4NiAxOS40OGExOS41NCAxOS41NCAwIDAgMS05LjE0NC0yLjI3N2wtOS44NzUgMi41ODlhLjUuNSAwIDAgMS0uMTI3LjAxNyIvPjxwYXRoIGZpbGw9IiNjZmQ4ZGMiIGQ9Ik0yNC4wMTQgNWExOC44NyAxOC44NyAwIDAgMSAxMy40MyA1LjU2NkExOC44NyAxOC44NyAwIDAgMSA0MyAyMy45OTRjLS4wMDQgMTAuNDY1LTguNTIyIDE4Ljk4LTE4Ljk4NiAxOC45OGgtLjAwOGExOSAxOSAwIDAgMS05LjA3My0yLjMxMWwtMTAuMDY1IDIuNjQgMi42OTQtOS44MzVhMTguOTQgMTguOTQgMCAwIDEtMi41MzUtOS40ODlDNS4wMzIgMTMuNTE0IDEzLjU0OCA1IDI0LjAxNCA1bTAtMUMxMi45OTggNCA0LjAzMiAxMi45NjIgNC4wMjcgMjMuOTc5YTIwIDIwIDAgMCAwIDIuNDYxIDkuNjIyTDMuOTAzIDQzLjA0YS45OTguOTk4IDAgMCAwIDEuMjE5IDEuMjMxbDkuNjg3LTIuNTRhMjAgMjAgMCAwIDAgOS4xOTcgMi4yNDRjMTEuMDI0IDAgMTkuOTktOC45NjMgMTkuOTk1LTE5Ljk4QTE5Ljg2IDE5Ljg2IDAgMCAwIDM4LjE1MyA5Ljg2IDE5Ljg3IDE5Ljg3IDAgMCAwIDI0LjAxNCA0Ii8+PHBhdGggZmlsbD0iIzQwYzM1MSIgZD0iTTM1LjE3NiAxMi44MzJhMTUuNjcgMTUuNjcgMCAwIDAtMTEuMTU3LTQuNjI2Yy04LjcwNCAwLTE1Ljc4MyA3LjA3Ni0xNS43ODcgMTUuNzc0YTE1Ljc0IDE1Ljc0IDAgMCAwIDIuNDEzIDguMzk2bC4zNzYuNTk3LTEuNTk1IDUuODIxIDUuOTczLTEuNTY2LjU3Ny4zNDJhMTUuNzUgMTUuNzUgMCAwIDAgOC4wMzIgMi4xOTloLjAwNmM4LjY5OCAwIDE1Ljc3Ny03LjA3NyAxNS43OC0xNS43NzZhMTUuNjggMTUuNjggMCAwIDAtNC42MTgtMTEuMTYxIi8+PHBhdGggZmlsbD0iI2ZmZiIgZD0iTTE5LjI2OCAxNi4wNDVjLS4zNTUtLjc5LS43MjktLjgwNi0xLjA2OC0uODItLjI3Ny0uMDEyLS41OTMtLjAxMS0uOTA5LS4wMTFzLS44My4xMTktMS4yNjUuNTk0LTEuNjYxIDEuNjIyLTEuNjYxIDMuOTU2IDEuNyA0LjU5IDEuOTM3IDQuOTA2IDMuMjgyIDUuMjU5IDguMTA0IDcuMTYxYzQuMDA3IDEuNTggNC44MjMgMS4yNjYgNS42OTMgMS4xODdzMi44MDctMS4xNDcgMy4yMDItMi4yNTUuMzk1LTIuMDU3LjI3Ny0yLjI1NWMtLjExOS0uMTk4LS40MzUtLjMxNi0uOTA5LS41NTRzLTIuODA3LTEuMzg1LTMuMjQyLTEuNTQzLS43NTEtLjIzNy0xLjA2OC4yMzhjLS4zMTYuNDc0LTEuMjI1IDEuNTQzLTEuNTAyIDEuODU5cy0uNTU0LjM1Ny0xLjAyOC4xMTktMi4wMDItLjczOC0zLjgxNS0yLjM1NGMtMS40MS0xLjI1Ny0yLjM2Mi0yLjgxLTIuNjM5LTMuMjg1LS4yNzctLjQ3NC0uMDMtLjczMS4yMDgtLjk2OC4yMTMtLjIxMy40NzQtLjU1NC43MTItLjgzMS4yMzctLjI3Ny4zMTYtLjQ3NS40NzQtLjc5MXMuMDc5LS41OTQtLjA0LS44MzFjLS4xMTctLjIzOC0xLjAzOS0yLjU4NC0xLjQ2MS0zLjUyMiIvPjwvc3ZnPg=="
      },
      "displayName": "WhatsApp Business Cloud",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 6,
          "name": "Communication"
        },
        {
          "id": 28,
          "name": "HITL"
        }
      ]
    },
    {
      "id": 834,
      "icon": "file:code.svg",
      "name": "n8n-nodes-base.code",
      "codex": {
        "data": {
          "alias": [
            "cpde",
            "Javascript",
            "JS",
            "Python",
            "Script",
            "Custom Code",
            "Function"
          ],
          "details": "The Code node allows you to execute JavaScript in your workflow.",
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.code/"
              }
            ]
          },
          "categories": [
            "Development",
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers",
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Code"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTcxXzQ0MSkiPgo8cGF0aCBkPSJNMTcwLjI4MyA0OEgxOTYuNUMyMDMuMTI3IDQ4IDIwOC41IDQyLjYyNzQgMjA4LjUgMzZWMTJDMjA4LjUgNS4zNzI1OCAyMDMuMTI3IDAgMTk2LjUgMEgxNzAuMjgzQzEyNi4xIDAgOTAuMjgzIDM1LjgxNzIgOTAuMjgzIDgwVjE3NkM5MC4yODMgMjA2LjkyOCA2NS4yMTA5IDIzMiAzNC4yODMgMjMySDIzQzE2LjM3MjYgMjMyIDExIDIzNy4zNzIgMTEgMjQ0VjI2OEMxMSAyNzQuNjI3IDE2LjM3MjQgMjgwIDIyLjk5OTYgMjgwTDM0LjI4MyAyODBDNjUuMjEwOSAyODAgOTAuMjgzIDMwNS4wNzIgOTAuMjgzIDMzNlY0NDBDOTAuMjgzIDQ3OS43NjQgMTIyLjUxOCA1MTIgMTYyLjI4MyA1MTJIMTk2LjVDMjAzLjEyNyA1MTIgMjA4LjUgNTA2LjYyNyAyMDguNSA1MDBWNDc2QzIwOC41IDQ2OS4zNzMgMjAzLjEyNyA0NjQgMTk2LjUgNDY0SDE2Mi4yODNDMTQ5LjAyOCA0NjQgMTM4LjI4MyA0NTMuMjU1IDEzOC4yODMgNDQwVjMzNkMxMzguMjgzIDMwOS4wMjIgMTI4LjAxMSAyODQuNDQzIDExMS4xNjQgMjY1Ljk2MUMxMDYuMTA5IDI2MC40MTYgMTA2LjEwOSAyNTEuNTg0IDExMS4xNjQgMjQ2LjAzOUMxMjguMDExIDIyNy41NTcgMTM4LjI4MyAyMDIuOTc4IDEzOC4yODMgMTc2VjgwQzEzOC4yODMgNjIuMzI2OSAxNTIuNjEgNDggMTcwLjI4MyA0OFoiIGZpbGw9IiNGRjk5MjIiLz4KPHBhdGggZD0iTTMwNSAzNkMzMDUgNDIuNjI3NCAzMTAuMzczIDQ4IDMxNyA0OEgzNDIuOTc5QzM2MC42NTIgNDggMzc0Ljk3OCA2Mi4zMjY5IDM3NC45NzggODBWMTc2QzM3NC45NzggMjAyLjk3OCAzODUuMjUxIDIyNy41NTcgNDAyLjA5OCAyNDYuMDM5QzQwNy4xNTMgMjUxLjU4NCA0MDcuMTUzIDI2MC40MTYgNDAyLjA5OCAyNjUuOTYxQzM4NS4yNTEgMjg0LjQ0MyAzNzQuOTc4IDMwOS4wMjIgMzc0Ljk3OCAzMzZWNDMyQzM3NC45NzggNDQ5LjY3MyAzNjAuNjUyIDQ2NCAzNDIuOTc5IDQ2NEgzMTdDMzEwLjM3MyA0NjQgMzA1IDQ2OS4zNzMgMzA1IDQ3NlY1MDBDMzA1IDUwNi42MjcgMzEwLjM3MyA1MTIgMzE3IDUxMkgzNDIuOTc5QzM4Ny4xNjEgNTEyIDQyMi45NzggNDc2LjE4MyA0MjIuOTc4IDQzMlYzMzZDNDIyLjk3OCAzMDUuMDcyIDQ0OC4wNTEgMjgwIDQ3OC45NzkgMjgwSDQ5MEM0OTYuNjI3IDI4MCA1MDIgMjc0LjYyOCA1MDIgMjY4VjI0NEM1MDIgMjM3LjM3MyA0OTYuNjI4IDIzMiA0OTAgMjMyTDQ3OC45NzkgMjMyQzQ0OC4wNTEgMjMyIDQyMi45NzggMjA2LjkyOCA0MjIuOTc4IDE3NlY4MEM0MjIuOTc4IDM1LjgxNzIgMzg3LjE2MSAwIDM0Mi45NzkgMEgzMTdDMzEwLjM3MyAwIDMwNSA1LjM3MjU4IDMwNSAxMlYzNloiIGZpbGw9IiNGRjk5MjIiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTcxXzQ0MSI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
      },
      "displayName": "Code",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 5,
          "name": "Development"
        },
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 839,
      "icon": "fa:clock",
      "name": "n8n-nodes-base.scheduleTrigger",
      "codex": {
        "data": {
          "alias": [
            "Time",
            "Scheduler",
            "Polling",
            "Cron",
            "Interval"
          ],
          "resources": {
            "generic": [],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.scheduletrigger/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"trigger\",\"schedule\"]",
      "defaults": {
        "name": "Schedule Trigger",
        "color": "#31C49F"
      },
      "iconData": {
        "icon": "clock",
        "type": "icon"
      },
      "displayName": "Schedule Trigger",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    }
  ],
  "views": 340,
  "recentViews": 6,
  "workflow": {
    "id": "Pq2ofdKSIXGjpA4G",
    "meta": {
      "instanceId": "dd69efaf8212c74ad206700d104739d3329588a6f3f8381a46a481f34c9cc281",
      "templateCredsSetupCompleted": true
    },
    "name": "Automated School Fee Reminder Workflow with Payment Link",
    "tags": [],
    "nodes": [
      {
        "id": "a4054030-d07a-4d6c-831a-ab4feb752d28",
        "name": "Daily Fee Check - 8 AM",
        "type": "n8n-nodes-base.scheduleTrigger",
        "position": [
          40,
          340
        ],
        "parameters": {
          "rule": {
            "interval": [
              {
                "triggerAtHour": 8
              }
            ]
          }
        },
        "typeVersion": 1.2
      },
      {
        "id": "4f2d2d48-1816-47ea-a5e3-763a47fb5153",
        "name": "Read Pending Fees",
        "type": "n8n-nodes-base.microsoftExcel",
        "position": [
          260,
          340
        ],
        "parameters": {
          "filters": {
            "fields": [
              {
                "value": "Pending",
                "column": "Status"
              }
            ]
          },
          "resource": "worksheet",
          "workbook": {
            "__rl": true,
            "mode": "id",
            "value": "=fee-records-workbook"
          }
        },
        "credentials": {
          "microsoftExcelOAuth2Api": {
            "id": "jevPChvDpEJk6W9v",
            "name": "Microsoft Excel account - test"
          }
        },
        "typeVersion": 2
      },
      {
        "id": "abdbf0e0-202e-4a77-bade-0923c269bd47",
        "name": "Process Fee Reminders",
        "type": "n8n-nodes-base.code",
        "position": [
          480,
          340
        ],
        "parameters": {
          "jsCode": "const currentDate = new Date();\nconst reminderDate = new Date();\nreminderDate.setDate(currentDate.getDate() + 3);\n\nconst feeRecords = $input.all();\nconst reminders = [];\n\nfor (const record of feeRecords) {\n  const feeData = record.json;\n  const dueDate = new Date(feeData.dueDate);\n  \n  if (dueDate <= reminderDate && dueDate > currentDate) {\n    const paymentLink = `https://payments.school.edu/pay?student=${feeData.studentId}&amount=${feeData.amount}&ref=${feeData.feeId}`;\n    \n    reminders.push({\n      studentName: feeData.studentName,\n      parentName: feeData.parentName,\n      parentEmail: feeData.parentEmail,\n      parentPhone: feeData.parentPhone,\n      feeType: feeData.feeType,\n      amount: feeData.amount,\n      dueDate: feeData.dueDate,\n      feeId: feeData.feeId,\n      paymentLink: paymentLink,\n      daysRemaining: Math.ceil((dueDate - currentDate) / (1000 * 60 * 60 * 24))\n    });\n  }\n}\n\nreturn reminders.map(item => ({ json: item }));"
        },
        "typeVersion": 2
      },
      {
        "id": "4d9a3063-7660-4f5e-bae3-43264b93d500",
        "name": "Prepare Email Reminder",
        "type": "n8n-nodes-base.code",
        "position": [
          700,
          240
        ],
        "parameters": {
          "jsCode": "const feeData = $input.first().json;\n\nconst emailSubject = `Fee Reminder: ${feeData.feeType} Due in ${feeData.daysRemaining} days`;\nconst emailBody = `Dear ${feeData.parentName},\n\nThis is a friendly reminder that the ${feeData.feeType} for ${feeData.studentName} is due on ${feeData.dueDate}.\n\nFee Details:\n- Student: ${feeData.studentName}\n- Fee Type: ${feeData.feeType}\n- Amount: $${feeData.amount}\n- Due Date: ${feeData.dueDate}\n- Days Remaining: ${feeData.daysRemaining}\n\nüí≥ PAY NOW: ${feeData.paymentLink}\n\nTo avoid late fees, please complete payment before the due date. If you have any questions, contact our finance office.\n\nThank you,\nSchool Finance Office`;\n\nreturn [{\n  json: {\n    to: feeData.parentEmail,\n    subject: emailSubject,\n    body: emailBody,\n    parentName: feeData.parentName,\n    studentName: feeData.studentName,\n    paymentLink: feeData.paymentLink\n  }\n}];"
        },
        "typeVersion": 2
      },
      {
        "id": "00e52e34-38e0-449c-aeb7-ebd7abad5d19",
        "name": "Prepare WhatsApp Reminder",
        "type": "n8n-nodes-base.code",
        "position": [
          700,
          440
        ],
        "parameters": {
          "jsCode": "const feeData = $input.first().json;\n\nconst whatsappMessage = `üè´ *Fee Reminder*\\n\\nDear ${feeData.parentName},\\n\\nüí∞ ${feeData.feeType} for *${feeData.studentName}*\\nüíµ Amount: $${feeData.amount}\\nüìÖ Due: ${feeData.dueDate}\\n‚è∞ ${feeData.daysRemaining} days remaining\\n\\nüîó *Pay Now:* ${feeData.paymentLink}\\n\\n_Please pay before due date to avoid late fees._\\n\\nSchool Finance Office`;\n\nreturn [{\n  json: {\n    phone: feeData.parentPhone,\n    message: whatsappMessage,\n    parentName: feeData.parentName,\n    studentName: feeData.studentName,\n    paymentLink: feeData.paymentLink\n  }\n}];"
        },
        "typeVersion": 2
      },
      {
        "id": "feb3bb1d-09c8-4f3d-93d7-5f8a290610e0",
        "name": "Send Email Reminder",
        "type": "n8n-nodes-base.emailSend",
        "position": [
          1140,
          240
        ],
        "webhookId": "ec15504f-ec8a-4e65-aeab-350fdde894aa",
        "parameters": {
          "text": "={{$json.body}}",
          "options": {},
          "subject": "={{$json.subject}}",
          "toEmail": "={{$json.to}}",
          "fromEmail": "finance@school.edu",
          "emailFormat": "text"
        },
        "credentials": {
          "smtp": {
            "id": "G1kyF8cSWTZ4vouN",
            "name": "SMTP -test"
          }
        },
        "typeVersion": 2.1
      },
      {
        "id": "5ba21990-c355-4c14-b9a8-30289b096b33",
        "name": "Update Reminder Status",
        "type": "n8n-nodes-base.microsoftExcel",
        "position": [
          1360,
          340
        ],
        "parameters": {
          "options": {},
          "dataMode": "autoMap",
          "resource": "worksheet",
          "workbook": {
            "__rl": true,
            "mode": "id",
            "value": "=fee-records-workbook"
          },
          "operation": "update",
          "worksheet": {
            "__rl": true,
            "mode": "id",
            "value": "=345yhhgt43wedf"
          },
          "columnToMatchOn": "=name"
        },
        "credentials": {
          "microsoftExcelOAuth2Api": {
            "id": "jevPChvDpEJk6W9v",
            "name": "Microsoft Excel account - test"
          }
        },
        "typeVersion": 2
      },
      {
        "id": "d8213541-6f43-4550-b8f8-c3ff32a5892a",
        "name": "Workflow Info",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          -40,
          -240
        ],
        "parameters": {
          "color": 3,
          "width": 540,
          "height": 400,
          "content": "### **Fee Reminder Workflow**\n\n**‚è∞ Daily Check:** Runs at 8 AM\n\n**üîç Process:**\n1. Read pending fees from Excel\n2. Filter fees due in 3 days\n3. Generate payment links\n4. Send email & WhatsApp reminders\n5. Update reminder status\n\n**üìß Channels:**\n- Email with payment link\n- WhatsApp with formatted message\n\n**üîó Payment Integration:**\nAutomatically generates secure payment links for each fee reminder."
        },
        "typeVersion": 1
      },
      {
        "id": "8f415190-7c68-43fe-b9ac-8259fe14bce8",
        "name": "Wait For Prepare Reminder",
        "type": "n8n-nodes-base.wait",
        "position": [
          920,
          240
        ],
        "webhookId": "b0bb8dc9-00fc-4852-881b-666558e014f2",
        "parameters": {},
        "typeVersion": 1.1
      },
      {
        "id": "08cea390-d569-4399-b1de-f84d9397c218",
        "name": "Wait For Prepare Reminder for WhatsApp",
        "type": "n8n-nodes-base.wait",
        "position": [
          920,
          440
        ],
        "webhookId": "b0bb8dc9-00fc-4852-881b-666558e014f2",
        "parameters": {},
        "typeVersion": 1.1
      },
      {
        "id": "0c791c6b-f9c1-47ce-8dd2-a5f84afa51dd",
        "name": "Send message",
        "type": "n8n-nodes-base.whatsApp",
        "position": [
          1140,
          440
        ],
        "webhookId": "2cc05be0-40ea-4c21-b903-c26193603d20",
        "parameters": {
          "textBody": "={{$json.body}}",
          "operation": "send",
          "phoneNumberId": "=+919988776655",
          "additionalFields": {},
          "recipientPhoneNumber": "={{$json.toforwp}}"
        },
        "credentials": {
          "whatsAppApi": {
            "id": "b0PxTDPdWzznWnfG",
            "name": "WhatsApp-test "
          }
        },
        "typeVersion": 1
      }
    ],
    "active": false,
    "pinData": {},
    "settings": {
      "executionOrder": "v1"
    },
    "versionId": "439c53c8-91d7-41ec-8903-0c266343961d",
    "connections": {
      "Send message": {
        "main": [
          [
            {
              "node": "Update Reminder Status",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Read Pending Fees": {
        "main": [
          [
            {
              "node": "Process Fee Reminders",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Send Email Reminder": {
        "main": [
          [
            {
              "node": "Update Reminder Status",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Process Fee Reminders": {
        "main": [
          [
            {
              "node": "Prepare Email Reminder",
              "type": "main",
              "index": 0
            },
            {
              "node": "Prepare WhatsApp Reminder",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Daily Fee Check - 8 AM": {
        "main": [
          [
            {
              "node": "Read Pending Fees",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Prepare Email Reminder": {
        "main": [
          [
            {
              "node": "Wait For Prepare Reminder",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Prepare WhatsApp Reminder": {
        "main": [
          [
            {
              "node": "Wait For Prepare Reminder for WhatsApp",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Wait For Prepare Reminder": {
        "main": [
          [
            {
              "node": "Send Email Reminder",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Wait For Prepare Reminder for WhatsApp": {
        "main": [
          [
            {
              "node": "Send message",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    }
  },
  "lastUpdatedBy": 29,
  "workflowInfo": {
    "nodeCount": 11,
    "nodeTypes": {
      "n8n-nodes-base.code": {
        "count": 3
      },
      "n8n-nodes-base.wait": {
        "count": 2
      },
      "n8n-nodes-base.whatsApp": {
        "count": 1
      },
      "n8n-nodes-base.emailSend": {
        "count": 1
      },
      "n8n-nodes-base.stickyNote": {
        "count": 1
      },
      "n8n-nodes-base.microsoftExcel": {
        "count": 2
      },
      "n8n-nodes-base.scheduleTrigger": {
        "count": 1
      }
    }
  },
  "categories": [
    {
      "id": 34,
      "name": "Invoice Processing"
    }
  ],
  "image": []
}