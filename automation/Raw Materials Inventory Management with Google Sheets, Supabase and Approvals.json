{
  "id": 3979,
  "name": "Raw Materials Inventory Management with Google Sheets, Supabase and Approvals",
  "totalViews": 2908,
  "price": 0,
  "purchaseUrl": null,
  "user": {
    "name": "Immanuel",
    "username": "spectrabit",
    "bio": "",
    "verified": true,
    "links": [
      ""
    ],
    "avatar": "https://gravatar.com/avatar/d56a3b4ce7573e035c16e2b0fa5c2f2d658085ba319b166f406b5cd07ac40ad0?r=pg&d=retro&size=200"
  },
  "description": "# Automated Raw Materials Inventory Management with Google Sheets, Supabase, and Gmail using n8n Webhooks\n\n![Screenshot 20250514 at 14.02.15.png](fileId:1312)\n\n## Description\n\n### What Problem Does This Solve? üõ†Ô∏è\nThis workflow automates raw materials inventory management for businesses, eliminating manual stock updates, delayed material issue approvals, and missed low stock alerts. It ensures real-time stock tracking, streamlined approvals, and timely notifications. \n\n**Target audience**: Small to medium-sized businesses, inventory managers, and n8n users familiar with Google Sheets, Supabase, and Gmail integrations.\n\n### What Does It Do? üåü\n- Receives raw material data and issue requests via form submissions.\n- Updates stock levels in Google Sheets and Supabase.\n- Manages approvals for material issue requests with email notifications.\n- Detects low stock levels and sends alerts via Gmail.\n- Maintains data consistency across Google Sheets and Supabase.\n\n### Key Features \n- Real-time stock updates from form submissions.\n- Automated approval process for material issuance.\n- Low stock detection with Gmail notifications.\n- Dual storage in Google Sheets and Supabase for redundancy.\n- Error handling for robust data validation.\n\n## Setup Instructions\n\n### Prerequisites \n- **n8n Instance**: Self-hosted or cloud n8n instance.\n- **API Credentials**:\n  - **Google Sheets API**: Credentials from Google Cloud Console with Sheets scope, stored in n8n credentials.\n  - **Supabase API**: API key and URL from Supabase project, stored in n8n credentials (do not hardcode in nodes).\n  - **Gmail API**: Credentials from Google Cloud Console with Gmail scope.\n- **Forms**: A form (e.g., Google Form) to submit raw material receipts and issue requests, configured to send data to n8n webhooks.\n\n### Installation Steps \n1. **Import the Workflow**:\n   - Copy the workflow JSON from the ‚ÄúTemplate Code‚Äù section (to be provided).\n   - Import it into n8n via ‚ÄúImport from File‚Äù or ‚ÄúImport from URL‚Äù.\n2. **Configure Credentials**:\n   - Add API credentials in n8n‚Äôs Credentials section for Google Sheets, Supabase, and Gmail.\n   - Assign credentials to respective nodes. For example:\n     - In the Append Raw Materials node, use Google Sheets credentials: `{{ $credentials.GoogleSheets }}`.\n     - In the Current Stock Update node, use Supabase credentials: `{{ $credentials.Supabase }}`.\n     - In the Send Low Stock Email Alert node, use Gmail credentials.\n3. **Set Up Nodes**:\n   - **Webhook Nodes (Receive Raw Materials Webhook, Receive Material Issue Webhook)**: Configure webhook URLs and link them to your form submissions.\n   - **Approval Email (Send Approval Request)**: Customize the HTML email template if needed.\n   - **Low Stock Alerts (Send Low Stock Email Alert, Send Low Stock Email After Issue)**: Configure recipient email addresses.\n4. **Test the Workflow**:\n   - Submit a test form for raw material receipt and verify stock updates in Google Sheets/Supabase.\n   - Submit a material issue request, approve/reject it, and confirm stock updates and notifications.\n\n## How It Works\n\n### High-Level Steps \n1. **Receive Raw Materials**: Processes form submissions for raw material receipts.\n2. **Update Stock**: Updates stock levels in Google Sheets and Supabase.\n3. **Handle Issue Requests**: Processes material issue requests via forms.\n4. **Manage Approvals**: Sends approval requests and processes decisions.\n5. **Monitor Stock Levels**: Detects low stock and sends Gmail alerts.\n\n### Detailed Descriptions\nDetailed node descriptions are available in the sticky notes within the workflow screenshot (to be provided). Below is a summary of key actions.\n\n## Node Names and Actions\n\n### Raw Materials Receiving and Stock Update\n- **Receive Raw Materials Webhook**: Receives raw material data from a form submission.\n- **Standardize Raw Material Data**: Maps form data into a consistent format.\n- **Calculate Total Price**: Computes `Total Price` (Quantity Received * Unit Price).\n- **Append Raw Materials**: Records receipt in Google Sheets.\n- **Check Quantity Received Validity**: Ensures `Quantity Received` is valid.\n- **Lookup Existing Stock**: Retrieves current stock for the `Product ID`.\n- **Check If Product Exists**: Branches based on `Product ID` existence.\n- **Calculate Updated Current Stock**: Adds `Quantity Received` to stock (True branch).\n- **Update Current Stock**: Updates stock in Google Sheets (True branch).\n- **Retrieve Updated Stock for Check**: Retrieves updated stock for low stock check.\n- **Detect Low Stock Level**: Flags if stock is below minimum.\n- **Trigger Low Stock Alert**: Triggers email if stock is low.\n- **Send Low Stock Email Alert**: Sends low stock alert via Gmail.\n- **Add New Product to Stock**: Adds new product to stock (False branch).\n- **Current Stock Update**: Updates Supabase `Current Stock` table.\n- **New Row Current Stock**: Inserts new product into Supabase.\n- **Search Current Stock**: Retrieves Supabase stock records.\n- **New Record Raw**: Inserts raw material record into Supabase.\n- **Format Response**: Removes duplicates from Supabase response.\n- **Combine Stock Update Branches**: Merges branches for existing/new products.\n\n### Material Issue Request and Approval\n- **Receive Material Issue Webhook**: Receives issue request from a form submission.\n- **Standardize Data**: Normalizes request data and adds `Approval Link`.\n- **Validate Issue Request Data**: Ensures `Quantity Requested` is valid.\n- **Verify Requested Quantity**: Validates `Product ID` and `Submission ID`.\n- **Append Material Request**: Records request in Google Sheets.\n- **Check Available Stock for Issue**: Retrieves current stock for the request.\n- **Prepare Approval**: Checks stock sufficiency for the request.\n- **Send Approval Request**: Emails approver with Approve/Reject options.\n- **Receive Approval Response**: Captures approver‚Äôs decision via webhook.\n- **Format Approval Response**: Processes approval data with `Approval Date`.\n- **Verify Approval Data**: Validates the approval response.\n- **Retrieve Issue Request Details**: Retrieves original request from Google Sheets.\n- **Process Approval Decision**: Branches based on approval action.\n- **Get Stock for Issue Update**: Retrieves stock before update (Approved).\n- **Deduct Issued Stock**: Reduces stock by `Approved Quantity` (Approved).\n- **Update Stock After Issue**: Updates stock in Google Sheets (Approved).\n- **Retrieve Stock After Issue**: Retrieves updated stock for low stock check.\n- **Detect Low Stock After Issue**: Flags low stock after issuance.\n- **Trigger Low Stock Alert After Issue**: Triggers email if stock is low.\n- **Send Low Stock Email After Issue**: Sends low stock alert via Gmail.\n- **Update Issue Request Status**: Updates request status (Approved/Rejected).\n- **Combine Stock Lookup Results**: Merges stock lookup branches.\n- **Create Record Issue**: Inserts issue request into Supabase.\n- **Search Stock by Product ID**: Retrieves Supabase stock records.\n- **Issues Table Update**: Updates Supabase `Materials Issued` table.\n- **Update Current Stock**: Updates Supabase stock after issuance.\n- **Combine Issue Lookup Branches**: Merges issue lookup branches.\n- **Search Issue by Submission ID**: Retrieves Supabase issue records.\n\n## Customization Tips\n- **Expand Storage Options **: Add nodes to store data in other databases (e.g., Airtable) alongside Google Sheets and Supabase.\n- **Modify Approval Email **: Update the Send Approval Request node to customize the HTML email template (e.g., adjust styling or add branding).\n- **Alternative Notifications **: Add nodes to send low stock alerts via other platforms (e.g., Slack or Telegram).\n- **Adjust Low Stock Threshold **: Modify the Detect Low Stock Level node to change the `Minimum Stock Level` (default: 50).!",
  "createdAt": "2025-05-11T13:15:27.989Z",
  "nodes": [
    {
      "id": 18,
      "icon": "file:googleSheets.svg",
      "name": "n8n-nodes-base.googleSheets",
      "codex": {
        "data": {
          "alias": [
            "CSV",
            "Sheet",
            "Spreadsheet",
            "GS"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/love-at-first-sight-ricardos-n8n-journey/",
                "icon": "‚ù§Ô∏è",
                "label": "Love at first sight: Ricardo‚Äôs n8n journey"
              },
              {
                "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                "icon": "üß¨",
                "label": "Why business process automation with n8n can change your daily life"
              },
              {
                "url": "https://n8n.io/blog/automatically-adding-expense-receipts-to-google-sheets-with-telegram-mindee-twilio-and-n8n/",
                "icon": "üßæ",
                "label": "Automatically Adding Expense Receipts to Google Sheets with Telegram, Mindee, Twilio, and n8n"
              },
              {
                "url": "https://n8n.io/blog/supercharging-your-conference-registration-process-with-n8n/",
                "icon": "üé´",
                "label": "Supercharging your conference registration process with n8n"
              },
              {
                "url": "https://n8n.io/blog/creating-triggers-for-n8n-workflows-using-polling/",
                "icon": "‚è≤",
                "label": "Creating triggers for n8n workflows using polling"
              },
              {
                "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                "icon": "store",
                "label": "6 e-commerce workflows to power up your Shopify s"
              },
              {
                "url": "https://n8n.io/blog/migrating-community-metrics-to-orbit-using-n8n/",
                "icon": "üìà",
                "label": "Migrating Community Metrics to Orbit using n8n"
              },
              {
                "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                "icon": "üí°",
                "label": "15 Google apps you can combine and automate to increase productivity"
              },
              {
                "url": "https://n8n.io/blog/your-business-doesnt-need-you-to-operate/",
                "icon": " üñ•Ô∏è",
                "label": "Hey founders! Your business doesn't need you to operate"
              },
              {
                "url": "https://n8n.io/blog/how-honest-burgers-use-automation-to-save-100k-per-year/",
                "icon": "üçî",
                "label": "How Honest Burgers Use Automation to Save $100k per year"
              },
              {
                "url": "https://n8n.io/blog/how-a-digital-strategist-uses-n8n-for-online-marketing/",
                "icon": "üíª",
                "label": "How a digital strategist uses n8n for online marketing"
              },
              {
                "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                "icon": "üß†",
                "label": "Why this Product Manager loves workflow automation with n8n"
              },
              {
                "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                "icon": "üôå",
                "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
              },
              {
                "url": "https://n8n.io/blog/how-a-membership-development-manager-automates-his-work-and-investments/",
                "icon": "üìà",
                "label": "How a Membership Development Manager automates his work and investments"
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.googlesheets/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/google/oauth-single-service/"
              }
            ]
          },
          "categories": [
            "Data & Storage",
            "Productivity"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"input\",\"output\"]",
      "defaults": {
        "name": "Google Sheets"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiPjxwYXRoIGZpbGw9IiMyOEI0NDYiIGQ9Ik0zNS42OSAxIDUyIDE3LjIyNXYzOS4wODdhMy42NyAzLjY3IDAgMCAxLTEuMDg0IDIuNjFBMy43IDMuNyAwIDAgMSA0OC4yOTMgNjBIMTIuNzA3YTMuNyAzLjcgMCAwIDEtMi42MjMtMS4wNzhBMy42NyAzLjY3IDAgMCAxIDkgNTYuMzEyVjQuNjg4YTMuNjcgMy42NyAwIDAgMSAxLjA4NC0yLjYxQTMuNyAzLjcgMCAwIDEgMTIuNzA3IDF6Ii8+PHBhdGggZmlsbD0iIzZBQ0U3QyIgZD0iTTM1LjY5IDEgNTIgMTcuMjI1SDM5LjM5N2MtMi4wNTQgMC0zLjcwNy0xLjgyOS0zLjcwNy0zLjg3MnoiLz48cGF0aCBmaWxsPSIjMjE5QjM4IiBkPSJNMzkuMjExIDE3LjIyNSA1MiAyMi40OHYtNS4yNTV6Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTIwLjEyIDMxLjk3NWMwLS44MTcuNjYyLTEuNDc1IDEuNDgzLTEuNDc1aDE3Ljc5NGMuODIxIDAgMS40ODIuNjU4IDEuNDgyIDEuNDc1djE1LjQ4N2MwIC44MTgtLjY2MSAxLjQ3NS0xLjQ4MiAxLjQ3NUgyMS42MDNhMS40NzYgMS40NzYgMCAwIDEtMS40ODItMS40NzRWMzEuOTc0em0yLjIyNSAxLjQ3NWg2LjY3MnYyLjIxMmgtNi42NzJ6bTAgNS4xNjJoNi42NzJ2Mi4yMTNoLTYuNjcyem0wIDUuMTYzaDYuNjcydjIuMjEyaC02LjY3MnptOS42MzgtMTAuMzI1aDYuNjcydjIuMjEyaC02LjY3MnptMCA1LjE2Mmg2LjY3MnYyLjIxM2gtNi42NzJ6bTAgNS4xNjNoNi42NzJ2Mi4yMTJoLTYuNjcyeiIvPjxwYXRoIGZpbGw9IiMyOEI0NDYiIGQ9Ik0zNC42OSAwIDUxIDE2LjIyNXYzOS4wODdhMy42NyAzLjY3IDAgMCAxLTEuMDg0IDIuNjFBMy43IDMuNyAwIDAgMSA0Ny4yOTMgNTlIMTEuNzA3YTMuNyAzLjcgMCAwIDEtMi42MjMtMS4wNzhBMy42NyAzLjY3IDAgMCAxIDggNTUuMzEyVjMuNjg4YTMuNjcgMy42NyAwIDAgMSAxLjA4NC0yLjYxQTMuNyAzLjcgMCAwIDEgMTEuNzA3IDB6Ii8+PHBhdGggZmlsbD0iIzZBQ0U3QyIgZD0iTTM0LjY5IDAgNTEgMTYuMjI1SDM4LjM5N2MtMi4wNTQgMC0zLjcwNy0xLjgyOS0zLjcwNy0zLjg3MnoiLz48cGF0aCBmaWxsPSIjMjE5QjM4IiBkPSJNMzguMjExIDE2LjIyNSA1MSAyMS40OHYtNS4yNTV6Ii8+PHBhdGggZmlsbD0iI0ZGRiIgZD0iTTE5LjEyIDMwLjk3NWMwLS44MTcuNjYyLTEuNDc1IDEuNDgzLTEuNDc1aDE3Ljc5NGMuODIxIDAgMS40ODIuNjU4IDEuNDgyIDEuNDc1djE1LjQ4N2MwIC44MTgtLjY2MSAxLjQ3NS0xLjQ4MiAxLjQ3NUgyMC42MDNhMS40NzYgMS40NzYgMCAwIDEtMS40ODItMS40NzRWMzAuOTc0em0yLjIyNSAxLjQ3NWg2LjY3MnYyLjIxMmgtNi42NzJ6bTAgNS4xNjJoNi42NzJ2Mi4yMTNoLTYuNjcyem0wIDUuMTYzaDYuNjcydjIuMjEyaC02LjY3MnptOS42MzgtMTAuMzI1aDYuNjcydjIuMjEyaC02LjY3MnptMCA1LjE2Mmg2LjY3MnYyLjIxM2gtNi42NzJ6bTAgNS4xNjNoNi42NzJ2Mi4yMTJoLTYuNjcyeiIvPjwvZz48L3N2Zz4="
      },
      "displayName": "Google Sheets",
      "typeVersion": 5,
      "nodeCategories": [
        {
          "id": 3,
          "name": "Data & Storage"
        },
        {
          "id": 4,
          "name": "Productivity"
        }
      ]
    },
    {
      "id": 20,
      "icon": "fa:map-signs",
      "name": "n8n-nodes-base.if",
      "codex": {
        "data": {
          "alias": [
            "Router",
            "Filter",
            "Condition",
            "Logic",
            "Boolean",
            "Branch"
          ],
          "details": "The IF node can be used to implement binary conditional logic in your workflow. You can set up one-to-many conditions to evaluate each item of data being inputted into the node. That data will either evaluate to TRUE or FALSE and route out of the node accordingly.\n\nThis node has multiple types of conditions: Bool, String, Number, and Date & Time.",
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                "icon": "üè≠",
                "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
              },
              {
                "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                "icon": "‚òÄÔ∏è",
                "label": "2021: The Year to Automate the New You with n8n"
              },
              {
                "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                "icon": "üß¨",
                "label": "Why business process automation with n8n can change your daily life"
              },
              {
                "url": "https://n8n.io/blog/create-a-toxic-language-detector-for-telegram/",
                "icon": "ü§¨",
                "label": "Create a toxic language detector for Telegram in 4 step"
              },
              {
                "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                "icon": "store",
                "label": "6 e-commerce workflows to power up your Shopify s"
              },
              {
                "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                "icon": "üîó",
                "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
              },
              {
                "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                "icon": "‚öôÔ∏è",
                "label": "Automate your data processing pipeline in 9 steps"
              },
              {
                "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                "icon": "üë•",
                "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
              },
              {
                "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                "icon": "‚ö°Ô∏è",
                "label": "5 tasks you can automate with the new Notion API "
              },
              {
                "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                "icon": "üí°",
                "label": "15 Google apps you can combine and automate to increase productivity"
              },
              {
                "url": "https://n8n.io/blog/automation-for-maintainers-of-open-source-projects/",
                "icon": "üè∑Ô∏è",
                "label": "How to automatically manage contributions to open-source projects"
              },
              {
                "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                "icon": " üï∏Ô∏è",
                "label": "How uProc scraped a multi-page website with a low-code workflow"
              },
              {
                "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                "icon": "ü§ñ",
                "label": "5 workflow automations for Mattermost that we love at n8n"
              },
              {
                "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                "icon": "üß†",
                "label": "Why this Product Manager loves workflow automation with n8n"
              },
              {
                "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                "icon": "üôå",
                "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
              },
              {
                "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                "icon": "üé°",
                "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
              },
              {
                "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                "icon": "üéñ",
                "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.if/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Flow"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "If",
        "color": "#408000"
      },
      "iconData": {
        "icon": "map-signs",
        "type": "icon"
      },
      "displayName": "If",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 24,
      "icon": "file:merge.svg",
      "name": "n8n-nodes-base.merge",
      "codex": {
        "data": {
          "alias": [
            "Join",
            "Concatenate",
            "Wait"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/how-to-sync-data-between-two-systems/",
                "icon": "üè¨",
                "label": "How to synchronize data between two systems (one-way vs. two-way sync"
              },
              {
                "url": "https://n8n.io/blog/supercharging-your-conference-registration-process-with-n8n/",
                "icon": "üé´",
                "label": "Supercharging your conference registration process with n8n"
              },
              {
                "url": "https://n8n.io/blog/migrating-community-metrics-to-orbit-using-n8n/",
                "icon": "üìà",
                "label": "Migrating Community Metrics to Orbit using n8n"
              },
              {
                "url": "https://n8n.io/blog/build-your-own-virtual-assistant-with-n8n-a-step-by-step-guide/",
                "icon": "üë¶",
                "label": "Build your own virtual assistant with n8n: A step by step guide"
              },
              {
                "url": "https://n8n.io/blog/sending-automated-congratulations-with-google-sheets-twilio-and-n8n/",
                "icon": "üôå",
                "label": "Sending Automated Congratulations with Google Sheets, Twilio, and n8n "
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.merge/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Flow",
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Merge"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTc3XzUxOCkiPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTAgNDhDMCAyMS40OTAzIDIxLjQ5MDMgMCA0OCAwSDExMkMxMzguNTEgMCAxNjAgMjEuNDkwMyAxNjAgNDhWNTZIMTk2LjI1MkMyNDAuNDM1IDU2IDI3Ni4yNTIgOTEuODE3MiAyNzYuMjUyIDEzNlYxOTJDMjc2LjI1MiAyMTQuMDkxIDI5NC4xNjEgMjMyIDMxNi4yNTIgMjMySDM1MlYyMjRDMzUyIDE5Ny40OSAzNzMuNDkgMTc2IDQwMCAxNzZINDY0QzQ5MC41MSAxNzYgNTEyIDE5Ny40OSA1MTIgMjI0VjI4OEM1MTIgMzE0LjUxIDQ5MC41MSAzMzYgNDY0IDMzNkg0MDBDMzczLjQ5IDMzNiAzNTIgMzE0LjUxIDM1MiAyODhWMjgwSDMxNi4yNTJDMjk0LjE2MSAyODAgMjc2LjI1MiAyOTcuOTA5IDI3Ni4yNTIgMzIwVjM3NkMyNzYuMjUyIDQyMC4xODMgMjQwLjQzNSA0NTYgMTk2LjI1MiA0NTZIMTYwVjQ2NEMxNjAgNDkwLjUxIDEzOC41MSA1MTIgMTEyIDUxMkg0OEMyMS40OTAzIDUxMiAwIDQ5MC41MSAwIDQ2NFY0MDBDMCAzNzMuNDkgMjEuNDkwMyAzNTIgNDggMzUySDExMkMxMzguNTEgMzUyIDE2MCAzNzMuNDkgMTYwIDQwMFY0MDhIMTk2LjI1MkMyMTMuOTI1IDQwOCAyMjguMjUyIDM5My42NzMgMjI4LjI1MiAzNzZWMzIwQzIyOC4yNTIgMjk0Ljc4NCAyMzguODU5IDI3Mi4wNDQgMjU1Ljg1MyAyNTZDMjM4Ljg1OSAyMzkuOTU2IDIyOC4yNTIgMjE3LjIxNiAyMjguMjUyIDE5MlYxMzZDMjI4LjI1MiAxMTguMzI3IDIxMy45MjUgMTA0IDE5Ni4yNTIgMTA0SDE2MFYxMTJDMTYwIDEzOC41MSAxMzguNTEgMTYwIDExMiAxNjBINDhDMjEuNDkwMyAxNjAgMCAxMzguNTEgMCAxMTJWNDhaTTEwNCA0OEMxMDguNDE4IDQ4IDExMiA1MS41ODE3IDExMiA1NlYxMDRDMTEyIDEwOC40MTggMTA4LjQxOCAxMTIgMTA0IDExMkg1NkM1MS41ODE3IDExMiA0OCAxMDguNDE4IDQ4IDEwNFY1NkM0OCA1MS41ODE3IDUxLjU4MTcgNDggNTYgNDhIMTA0Wk00NTYgMjI0QzQ2MC40MTggMjI0IDQ2NCAyMjcuNTgyIDQ2NCAyMzJWMjgwQzQ2NCAyODQuNDE4IDQ2MC40MTggMjg4IDQ1NiAyODhINDA4QzQwMy41ODIgMjg4IDQwMCAyODQuNDE4IDQwMCAyODBWMjMyQzQwMCAyMjcuNTgyIDQwMy41ODIgMjI0IDQwOCAyMjRINDU2Wk0xMTIgNDA4QzExMiA0MDMuNTgyIDEwOC40MTggNDAwIDEwNCA0MDBINTZDNTEuNTgxNyA0MDAgNDggNDAzLjU4MiA0OCA0MDhWNDU2QzQ4IDQ2MC40MTggNTEuNTgxNyA0NjQgNTYgNDY0SDEwNEMxMDguNDE4IDQ2NCAxMTIgNDYwLjQxOCAxMTIgNDU2VjQwOFoiIGZpbGw9IiM1NEI4QzkiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTc3XzUxOCI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
      },
      "displayName": "Merge",
      "typeVersion": 3,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 38,
      "icon": "fa:pen",
      "name": "n8n-nodes-base.set",
      "codex": {
        "data": {
          "alias": [
            "Set",
            "JS",
            "JSON",
            "Filter",
            "Transform",
            "Map"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/learn-to-automate-your-factorys-incident-reporting-a-step-by-step-guide/",
                "icon": "üè≠",
                "label": "Learn to Automate Your Factory's Incident Reporting: A Step by Step Guide"
              },
              {
                "url": "https://n8n.io/blog/2021-the-year-to-automate-the-new-you-with-n8n/",
                "icon": "‚òÄÔ∏è",
                "label": "2021: The Year to Automate the New You with n8n"
              },
              {
                "url": "https://n8n.io/blog/automatically-pulling-and-visualizing-data-with-n8n/",
                "icon": "üìà",
                "label": "Automatically pulling and visualizing data with n8n"
              },
              {
                "url": "https://n8n.io/blog/database-monitoring-and-alerting-with-n8n/",
                "icon": "üì°",
                "label": "Database Monitoring and Alerting with n8n"
              },
              {
                "url": "https://n8n.io/blog/automatically-adding-expense-receipts-to-google-sheets-with-telegram-mindee-twilio-and-n8n/",
                "icon": "üßæ",
                "label": "Automatically Adding Expense Receipts to Google Sheets with Telegram, Mindee, Twilio, and n8n"
              },
              {
                "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                "icon": "store",
                "label": "6 e-commerce workflows to power up your Shopify s"
              },
              {
                "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                "icon": "üîó",
                "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
              },
              {
                "url": "https://n8n.io/blog/automate-your-data-processing-pipeline-in-9-steps-with-n8n/",
                "icon": "‚öôÔ∏è",
                "label": "Automate your data processing pipeline in 9 steps"
              },
              {
                "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                "icon": "üë•",
                "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
              },
              {
                "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                "icon": "‚ö°Ô∏è",
                "label": "5 tasks you can automate with the new Notion API "
              },
              {
                "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                "icon": "üí°",
                "label": "15 Google apps you can combine and automate to increase productivity"
              },
              {
                "url": "https://n8n.io/blog/how-uproc-scraped-a-multi-page-website-with-a-low-code-workflow/",
                "icon": " üï∏Ô∏è",
                "label": "How uProc scraped a multi-page website with a low-code workflow"
              },
              {
                "url": "https://n8n.io/blog/building-an-expense-tracking-app-in-10-minutes/",
                "icon": "üì±",
                "label": "Building an expense tracking app in 10 minutes"
              },
              {
                "url": "https://n8n.io/blog/the-ultimate-guide-to-automate-your-video-collaboration-with-whereby-mattermost-and-n8n/",
                "icon": "üìπ",
                "label": "The ultimate guide to automate your video collaboration with Whereby, Mattermost, and n8n"
              },
              {
                "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                "icon": "ü§ñ",
                "label": "5 workflow automations for Mattermost that we love at n8n"
              },
              {
                "url": "https://n8n.io/blog/learn-to-build-powerful-api-endpoints-using-webhooks/",
                "icon": "üß∞",
                "label": "Learn to Build Powerful API Endpoints Using Webhooks"
              },
              {
                "url": "https://n8n.io/blog/how-a-membership-development-manager-automates-his-work-and-investments/",
                "icon": "üìà",
                "label": "How a Membership Development Manager automates his work and investments"
              },
              {
                "url": "https://n8n.io/blog/a-low-code-bitcoin-ticker-built-with-questdb-and-n8n-io/",
                "icon": "üìà",
                "label": "A low-code bitcoin ticker built with QuestDB and n8n.io"
              },
              {
                "url": "https://n8n.io/blog/how-to-set-up-a-ci-cd-pipeline-with-no-code/",
                "icon": "üé°",
                "label": "How to set up a no-code CI/CD pipeline with GitHub and TravisCI"
              },
              {
                "url": "https://n8n.io/blog/benefits-of-automation-and-n8n-an-interview-with-hubspots-hugh-durkin/",
                "icon": "üéñ",
                "label": "Benefits of automation and n8n: An interview with HubSpot's Hugh Durkin"
              },
              {
                "url": "https://n8n.io/blog/how-goomer-automated-their-operations-with-over-200-n8n-workflows/",
                "icon": "üõµ",
                "label": "How Goomer automated their operations with over 200 n8n workflows"
              },
              {
                "url": "https://n8n.io/blog/aws-workflow-automation/",
                "label": "7 no-code workflow automations for Amazon Web Services"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.set/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Edit Fields"
      },
      "iconData": {
        "icon": "pen",
        "type": "icon"
      },
      "displayName": "Edit Fields (Set)",
      "typeVersion": 3,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 47,
      "icon": "file:webhook.svg",
      "name": "n8n-nodes-base.webhook",
      "codex": {
        "data": {
          "alias": [
            "HTTP",
            "API",
            "Build",
            "WH"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/learn-how-to-automatically-cross-post-your-content-with-n8n/",
                "icon": "‚úçÔ∏è",
                "label": "Learn how to automatically cross-post your content with n8n"
              },
              {
                "url": "https://n8n.io/blog/running-n8n-on-ships-an-interview-with-maranics/",
                "icon": "üõ≥",
                "label": "Running n8n on ships: An interview with Maranics"
              },
              {
                "url": "https://n8n.io/blog/how-to-build-a-low-code-self-hosted-url-shortener/",
                "icon": "üîó",
                "label": "How to build a low-code, self-hosted URL shortener in 3 steps"
              },
              {
                "url": "https://n8n.io/blog/what-are-apis-how-to-use-them-with-no-code/",
                "icon": " ü™¢",
                "label": "What are APIs and how to use them with no code"
              },
              {
                "url": "https://n8n.io/blog/5-tasks-you-can-automate-with-notion-api/",
                "icon": "‚ö°Ô∏è",
                "label": "5 tasks you can automate with the new Notion API "
              },
              {
                "url": "https://n8n.io/blog/how-a-digital-strategist-uses-n8n-for-online-marketing/",
                "icon": "üíª",
                "label": "How a digital strategist uses n8n for online marketing"
              },
              {
                "url": "https://n8n.io/blog/the-ultimate-guide-to-automate-your-video-collaboration-with-whereby-mattermost-and-n8n/",
                "icon": "üìπ",
                "label": "The ultimate guide to automate your video collaboration with Whereby, Mattermost, and n8n"
              },
              {
                "url": "https://n8n.io/blog/how-to-automatically-give-kudos-to-contributors-with-github-slack-and-n8n/",
                "icon": "üëè",
                "label": "How to automatically give kudos to contributors with GitHub, Slack, and n8n"
              },
              {
                "url": "https://n8n.io/blog/5-workflow-automations-for-mattermost-that-we-love-at-n8n/",
                "icon": "ü§ñ",
                "label": "5 workflow automations for Mattermost that we love at n8n"
              },
              {
                "url": "https://n8n.io/blog/why-this-product-manager-loves-workflow-automation-with-n8n/",
                "icon": "üß†",
                "label": "Why this Product Manager loves workflow automation with n8n"
              },
              {
                "url": "https://n8n.io/blog/creating-custom-incident-response-workflows-with-n8n/",
                "label": "How to automate every step of an incident response workflow"
              },
              {
                "url": "https://n8n.io/blog/learn-to-build-powerful-api-endpoints-using-webhooks/",
                "icon": "üß∞",
                "label": "Learn to Build Powerful API Endpoints Using Webhooks"
              },
              {
                "url": "https://n8n.io/blog/learn-how-to-use-webhooks-with-mattermost-slash-commands/",
                "icon": "ü¶Ñ",
                "label": "Learn how to use webhooks with Mattermost slash commands"
              },
              {
                "url": "https://n8n.io/blog/how-goomer-automated-their-operations-with-over-200-n8n-workflows/",
                "icon": "üõµ",
                "label": "How Goomer automated their operations with over 200 n8n workflows"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.webhook/"
              }
            ]
          },
          "categories": [
            "Development",
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"trigger\"]",
      "defaults": {
        "name": "Webhook"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCI+PHBhdGggZmlsbD0iIzM3NDc0ZiIgZD0iTTM1IDM3Yy0yLjIgMC00LTEuOC00LTRzMS44LTQgNC00IDQgMS44IDQgNC0xLjggNC00IDQiLz48cGF0aCBmaWxsPSIjMzc0NzRmIiBkPSJNMzUgNDNjLTMgMC01LjktMS40LTcuOC0zLjdsMy4xLTIuNWMxLjEgMS40IDIuOSAyLjMgNC43IDIuMyAzLjMgMCA2LTIuNyA2LTZzLTIuNy02LTYtNmMtMSAwLTIgLjMtMi45LjdsLTEuNyAxTDIzLjMgMTZsMy41LTEuOSA1LjMgOS40YzEtLjMgMi0uNSAzLS41IDUuNSAwIDEwIDQuNSAxMCAxMFM0MC41IDQzIDM1IDQzIi8+PHBhdGggZmlsbD0iIzM3NDc0ZiIgZD0iTTE0IDQzQzguNSA0MyA0IDM4LjUgNCAzM2MwLTQuNiAzLjEtOC41IDcuNS05LjdsMSAzLjlDOS45IDI3LjkgOCAzMC4zIDggMzNjMCAzLjMgMi43IDYgNiA2czYtMi43IDYtNnYtMmgxNXY0SDIzLjhjLS45IDQuNi01IDgtOS44IDgiLz48cGF0aCBmaWxsPSIjZTkxZTYzIiBkPSJNMTQgMzdjLTIuMiAwLTQtMS44LTQtNHMxLjgtNCA0LTQgNCAxLjggNCA0LTEuOCA0LTQgNCIvPjxwYXRoIGZpbGw9IiMzNzQ3NGYiIGQ9Ik0yNSAxOWMtMi4yIDAtNC0xLjgtNC00czEuOC00IDQtNCA0IDEuOCA0IDQtMS44IDQtNCA0Ii8+PHBhdGggZmlsbD0iI2U5MWU2MyIgZD0ibTE1LjcgMzQtMy40LTIgNS45LTkuN2MtMi0xLjktMy4yLTQuNS0zLjItNy4zIDAtNS41IDQuNS0xMCAxMC0xMHMxMCA0LjUgMTAgMTBjMCAuOS0uMSAxLjctLjMgMi41bC0zLjktMWMuMS0uNS4yLTEgLjItMS41IDAtMy4zLTIuNy02LTYtNnMtNiAyLjctNiA2YzAgMi4xIDEuMSA0IDIuOSA1LjFsMS43IDF6Ii8+PC9zdmc+"
      },
      "displayName": "Webhook",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 5,
          "name": "Development"
        },
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 356,
      "icon": "file:gmail.svg",
      "name": "n8n-nodes-base.gmail",
      "codex": {
        "data": {
          "alias": [
            "email",
            "human",
            "form",
            "wait",
            "hitl",
            "approval"
          ],
          "resources": {
            "generic": [
              {
                "url": "https://n8n.io/blog/why-business-process-automation-with-n8n-can-change-your-daily-life/",
                "icon": "üß¨",
                "label": "Why business process automation with n8n can change your daily life"
              },
              {
                "url": "https://n8n.io/blog/supercharging-your-conference-registration-process-with-n8n/",
                "icon": "üé´",
                "label": "Supercharging your conference registration process with n8n"
              },
              {
                "url": "https://n8n.io/blog/no-code-ecommerce-workflow-automations/",
                "icon": "store",
                "label": "6 e-commerce workflows to power up your Shopify s"
              },
              {
                "url": "https://n8n.io/blog/how-to-get-started-with-crm-automation-and-no-code-workflow-ideas/",
                "icon": "üë•",
                "label": "How to get started with CRM automation (with 3 no-code workflow ideas"
              },
              {
                "url": "https://n8n.io/blog/automate-google-apps-for-productivity/",
                "icon": "üí°",
                "label": "15 Google apps you can combine and automate to increase productivity"
              },
              {
                "url": "https://n8n.io/blog/your-business-doesnt-need-you-to-operate/",
                "icon": " üñ•Ô∏è",
                "label": "Hey founders! Your business doesn't need you to operate"
              },
              {
                "url": "https://n8n.io/blog/using-automation-to-boost-productivity-in-the-workplace/",
                "icon": "üí™",
                "label": "Using Automation to Boost Productivity in the Workplace"
              }
            ],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.gmail/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/google/oauth-single-service/"
              }
            ]
          },
          "categories": [
            "Communication",
            "HITL"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "HITL": [
              "Human in the Loop"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Gmail"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNTYiIGhlaWdodD0iMTkzIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PHBhdGggZmlsbD0iIzQyODVGNCIgZD0iTTU4LjE4MiAxOTIuMDVWOTMuMTRMMjcuNTA3IDY1LjA3NyAwIDQ5LjUwNHYxMjUuMDkxYzAgOS42NTggNy44MjUgMTcuNDU1IDE3LjQ1NSAxNy40NTV6Ii8+PHBhdGggZmlsbD0iIzM0QTg1MyIgZD0iTTE5Ny44MTggMTkyLjA1aDQwLjcyN2M5LjY1OSAwIDE3LjQ1NS03LjgyNiAxNy40NTUtMTcuNDU1VjQ5LjUwNWwtMzEuMTU2IDE3LjgzNy0yNy4wMjYgMjUuNzk4eiIvPjxwYXRoIGZpbGw9IiNFQTQzMzUiIGQ9Im01OC4xODIgOTMuMTQtNC4xNzQtMzguNjQ3IDQuMTc0LTM2Ljk4OUwxMjggNjkuODY4bDY5LjgxOC01Mi4zNjQgNC42NyAzNC45OTItNC42NyA0MC42NDRMMTI4IDE0NS41MDR6Ii8+PHBhdGggZmlsbD0iI0ZCQkMwNCIgZD0iTTE5Ny44MTggMTcuNTA0VjkzLjE0TDI1NiA0OS41MDRWMjYuMjMxYzAtMjEuNTg1LTI0LjY0LTMzLjg5LTQxLjg5LTIwLjk0NXoiLz48cGF0aCBmaWxsPSIjQzUyMjFGIiBkPSJtMCA0OS41MDQgMjYuNzU5IDIwLjA3TDU4LjE4MiA5My4xNFYxNy41MDRMNDEuODkgNS4yODZDMjQuNjEtNy42NiAwIDQuNjQ2IDAgMjYuMjN6Ii8+PC9zdmc+"
      },
      "displayName": "Gmail",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 6,
          "name": "Communication"
        },
        {
          "id": 28,
          "name": "HITL"
        }
      ]
    },
    {
      "id": 516,
      "icon": "file:itemLists.svg",
      "name": "n8n-nodes-base.itemLists",
      "codex": {
        "data": {
          "alias": [
            "Aggregate",
            "Dedupe",
            "Deduplicate",
            "Duplicates",
            "Limit",
            "Remove",
            "Slice",
            "Sort",
            "Split",
            "Unique",
            "JSON",
            "Transform",
            "Array",
            "List",
            "Object",
            "Item",
            "Map",
            "Format",
            "Nested",
            "Iterate",
            "Summarise",
            "Summarize",
            "Group",
            "Pivot",
            "Sum",
            "Count",
            "Min",
            "Max"
          ],
          "details": "",
          "resources": {
            "generic": [],
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.itemlists/"
              }
            ]
          },
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers",
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Item Lists"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgdmlld0JveD0iMCAwIDIxMCAyMTAiPjxwYXRoIGQ9Ik0xOC44IDE4LjhDOC40IDE4LjggMCAyNy4xIDAgMzcuNXM4LjQgMTguOCAxOC44IDE4LjggMTguOC04LjQgMTguOC0xOC44LTguNS0xOC43LTE4LjgtMTguN20wIDYyLjRDOC40IDgxLjIgMCA4OS42IDAgMTAwczguNCAxOC44IDE4LjggMTguOCAxOC44LTguNCAxOC44LTE4LjgtOC41LTE4LjgtMTguOC0xOC44bTAgNjIuNkM4LjQgMTQzLjggMCAxNTIuMSAwIDE2Mi41czguNCAxOC44IDE4LjggMTguOCAxOC44LTguNCAxOC44LTE4LjgtOC41LTE4LjctMTguOC0xOC43bTE3NSA2LjJoLTEyNWMtMy41IDAtNi4yIDIuOC02LjIgNi4ydjEyLjVjMCAzLjUgMi44IDYuMiA2LjIgNi4yaDEyNWMzLjUgMCA2LjItMi44IDYuMi02LjJ2LTEyLjVjMC0zLjQtMi44LTYuMi02LjItNi4ybTAtMTI1aC0xMjVjLTMuNSAwLTYuMiAyLjgtNi4yIDYuMnYxMi41YzAgMy41IDIuOCA2LjIgNi4yIDYuMmgxMjVjMy41IDAgNi4yLTIuOCA2LjItNi4yVjMxLjJjMC0zLjQtMi44LTYuMi02LjItNi4ybTAgNjIuNWgtMTI1Yy0zLjUgMC02LjIgMi44LTYuMiA2LjJ2MTIuNWMwIDMuNSAyLjggNi4yIDYuMiA2LjJoMTI1YzMuNSAwIDYuMi0yLjggNi4yLTYuMlY5My44YzAtMy41LTIuOC02LjMtNi4yLTYuMyIgc3R5bGU9ImZpbGw6I2ZmNmQ1YSIvPjwvc3ZnPg=="
      },
      "displayName": "Item Lists",
      "typeVersion": 3,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 545,
      "icon": "file:supabase.svg",
      "name": "n8n-nodes-base.supabase",
      "codex": {
        "data": {
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/app-nodes/n8n-nodes-base.supabase/"
              }
            ],
            "credentialDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/credentials/supabase/"
              }
            ]
          },
          "categories": [
            "Data & Storage"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0"
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Supabase"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDkiIGhlaWdodD0iMTEzIiBmaWxsPSJub25lIj48cGF0aCBmaWxsPSJ1cmwoI2EpIiBkPSJNNjMuNzA4IDExMC4yODRjLTIuODYgMy42MDEtOC42NTggMS42MjgtOC43MjctMi45N2wtMS4wMDctNjcuMjUxaDQ1LjIyYzguMTkgMCAxMi43NTggOS40NiA3LjY2NSAxNS44NzR6Ii8+PHBhdGggZmlsbD0idXJsKCNiKSIgZmlsbC1vcGFjaXR5PSIuMiIgZD0iTTYzLjcwOCAxMTAuMjg0Yy0yLjg2IDMuNjAxLTguNjU4IDEuNjI4LTguNzI3LTIuOTdsLTEuMDA3LTY3LjI1MWg0NS4yMmM4LjE5IDAgMTIuNzU4IDkuNDYgNy42NjUgMTUuODc0eiIvPjxwYXRoIGZpbGw9IiMzRUNGOEUiIGQ9Ik00NS4zMTcgMi4wNzFjMi44Ni0zLjYwMSA4LjY1Ny0xLjYyOCA4LjcyNiAyLjk3bC40NDIgNjcuMjUxSDkuODNjLTguMTkgMC0xMi43NTktOS40Ni03LjY2NS0xNS44NzV6Ii8+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4MT0iNTMuOTc0IiB4Mj0iOTQuMTYzIiB5MT0iNTQuOTc0IiB5Mj0iNzEuODI5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agc3RvcC1jb2xvcj0iIzI0OTM2MSIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iIzNFQ0Y4RSIvPjwvbGluZWFyR3JhZGllbnQ+PGxpbmVhckdyYWRpZW50IGlkPSJiIiB4MT0iMzYuMTU2IiB4Mj0iNTQuNDg0IiB5MT0iMzAuNTc4IiB5Mj0iNjUuMDgxIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3AvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1vcGFjaXR5PSIwIi8+PC9saW5lYXJHcmFkaWVudD48L2RlZnM+PC9zdmc+"
      },
      "displayName": "Supabase",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 3,
          "name": "Data & Storage"
        }
      ]
    },
    {
      "id": 565,
      "icon": "fa:sticky-note",
      "name": "n8n-nodes-base.stickyNote",
      "codex": {
        "data": {
          "alias": [
            "Comments",
            "Notes",
            "Sticky"
          ],
          "categories": [
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers"
            ]
          }
        }
      },
      "group": "[\"input\"]",
      "defaults": {
        "name": "Sticky Note",
        "color": "#FFD233"
      },
      "iconData": {
        "icon": "sticky-note",
        "type": "icon"
      },
      "displayName": "Sticky Note",
      "typeVersion": 1,
      "nodeCategories": [
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    },
    {
      "id": 834,
      "icon": "file:code.svg",
      "name": "n8n-nodes-base.code",
      "codex": {
        "data": {
          "alias": [
            "cpde",
            "Javascript",
            "JS",
            "Python",
            "Script",
            "Custom Code",
            "Function"
          ],
          "details": "The Code node allows you to execute JavaScript in your workflow.",
          "resources": {
            "primaryDocumentation": [
              {
                "url": "https://docs.n8n.io/integrations/builtin/core-nodes/n8n-nodes-base.code/"
              }
            ]
          },
          "categories": [
            "Development",
            "Core Nodes"
          ],
          "nodeVersion": "1.0",
          "codexVersion": "1.0",
          "subcategories": {
            "Core Nodes": [
              "Helpers",
              "Data Transformation"
            ]
          }
        }
      },
      "group": "[\"transform\"]",
      "defaults": {
        "name": "Code"
      },
      "iconData": {
        "type": "file",
        "fileBuffer": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8xMTcxXzQ0MSkiPgo8cGF0aCBkPSJNMTcwLjI4MyA0OEgxOTYuNUMyMDMuMTI3IDQ4IDIwOC41IDQyLjYyNzQgMjA4LjUgMzZWMTJDMjA4LjUgNS4zNzI1OCAyMDMuMTI3IDAgMTk2LjUgMEgxNzAuMjgzQzEyNi4xIDAgOTAuMjgzIDM1LjgxNzIgOTAuMjgzIDgwVjE3NkM5MC4yODMgMjA2LjkyOCA2NS4yMTA5IDIzMiAzNC4yODMgMjMySDIzQzE2LjM3MjYgMjMyIDExIDIzNy4zNzIgMTEgMjQ0VjI2OEMxMSAyNzQuNjI3IDE2LjM3MjQgMjgwIDIyLjk5OTYgMjgwTDM0LjI4MyAyODBDNjUuMjEwOSAyODAgOTAuMjgzIDMwNS4wNzIgOTAuMjgzIDMzNlY0NDBDOTAuMjgzIDQ3OS43NjQgMTIyLjUxOCA1MTIgMTYyLjI4MyA1MTJIMTk2LjVDMjAzLjEyNyA1MTIgMjA4LjUgNTA2LjYyNyAyMDguNSA1MDBWNDc2QzIwOC41IDQ2OS4zNzMgMjAzLjEyNyA0NjQgMTk2LjUgNDY0SDE2Mi4yODNDMTQ5LjAyOCA0NjQgMTM4LjI4MyA0NTMuMjU1IDEzOC4yODMgNDQwVjMzNkMxMzguMjgzIDMwOS4wMjIgMTI4LjAxMSAyODQuNDQzIDExMS4xNjQgMjY1Ljk2MUMxMDYuMTA5IDI2MC40MTYgMTA2LjEwOSAyNTEuNTg0IDExMS4xNjQgMjQ2LjAzOUMxMjguMDExIDIyNy41NTcgMTM4LjI4MyAyMDIuOTc4IDEzOC4yODMgMTc2VjgwQzEzOC4yODMgNjIuMzI2OSAxNTIuNjEgNDggMTcwLjI4MyA0OFoiIGZpbGw9IiNGRjk5MjIiLz4KPHBhdGggZD0iTTMwNSAzNkMzMDUgNDIuNjI3NCAzMTAuMzczIDQ4IDMxNyA0OEgzNDIuOTc5QzM2MC42NTIgNDggMzc0Ljk3OCA2Mi4zMjY5IDM3NC45NzggODBWMTc2QzM3NC45NzggMjAyLjk3OCAzODUuMjUxIDIyNy41NTcgNDAyLjA5OCAyNDYuMDM5QzQwNy4xNTMgMjUxLjU4NCA0MDcuMTUzIDI2MC40MTYgNDAyLjA5OCAyNjUuOTYxQzM4NS4yNTEgMjg0LjQ0MyAzNzQuOTc4IDMwOS4wMjIgMzc0Ljk3OCAzMzZWNDMyQzM3NC45NzggNDQ5LjY3MyAzNjAuNjUyIDQ2NCAzNDIuOTc5IDQ2NEgzMTdDMzEwLjM3MyA0NjQgMzA1IDQ2OS4zNzMgMzA1IDQ3NlY1MDBDMzA1IDUwNi42MjcgMzEwLjM3MyA1MTIgMzE3IDUxMkgzNDIuOTc5QzM4Ny4xNjEgNTEyIDQyMi45NzggNDc2LjE4MyA0MjIuOTc4IDQzMlYzMzZDNDIyLjk3OCAzMDUuMDcyIDQ0OC4wNTEgMjgwIDQ3OC45NzkgMjgwSDQ5MEM0OTYuNjI3IDI4MCA1MDIgMjc0LjYyOCA1MDIgMjY4VjI0NEM1MDIgMjM3LjM3MyA0OTYuNjI4IDIzMiA0OTAgMjMyTDQ3OC45NzkgMjMyQzQ0OC4wNTEgMjMyIDQyMi45NzggMjA2LjkyOCA0MjIuOTc4IDE3NlY4MEM0MjIuOTc4IDM1LjgxNzIgMzg3LjE2MSAwIDM0Mi45NzkgMEgzMTdDMzEwLjM3MyAwIDMwNSA1LjM3MjU4IDMwNSAxMlYzNloiIGZpbGw9IiNGRjk5MjIiLz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xMTcxXzQ0MSI+CjxyZWN0IHdpZHRoPSI1MTIiIGhlaWdodD0iNTEyIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo="
      },
      "displayName": "Code",
      "typeVersion": 2,
      "nodeCategories": [
        {
          "id": 5,
          "name": "Development"
        },
        {
          "id": 9,
          "name": "Core Nodes"
        }
      ]
    }
  ],
  "views": 2908,
  "recentViews": 2,
  "workflow": {
    "meta": {
      "instanceId": "3da9aa1165fccd6e57ad278dd59febaa1dfaafc31e0e52a95d11801200f09024",
      "templateCredsSetupCompleted": true
    },
    "nodes": [
      {
        "id": "c983fae5-a779-4a56-ace0-304aaefe0433",
        "name": "Append Material Request",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          6780,
          3240
        ],
        "parameters": {
          "columns": {
            "value": {},
            "schema": [
              {
                "id": "Timestamp",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Timestamp",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Product ID",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Product ID",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Quantity Requested",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Quantity Requested",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Measurement Unit",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Measurement Unit",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Requested By",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Requested By",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Issue Date",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Issue Date",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Description",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Description",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Submission ID",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Submission ID",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Status",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Status",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Approval Link",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Approval Link",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Request Date",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Request Date",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              }
            ],
            "mappingMode": "autoMapInputData",
            "matchingColumns": [],
            "attemptToConvertTypes": false,
            "convertFieldsToString": false
          },
          "options": {},
          "operation": "append",
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 328307238,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=328307238",
            "cachedResultName": "Materials Issued"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "25d745c1-8167-4c55-9f88-461f94843286",
        "name": "Get Approvals",
        "type": "n8n-nodes-base.webhook",
        "position": [
          5900,
          4060
        ],
        "webhookId": "33876465-33a7-4cc1-bbb5-bc8c630edd9f",
        "parameters": {
          "path": "/approve-issue",
          "options": {}
        },
        "typeVersion": 2
      },
      {
        "id": "c4d96a9c-b70b-4e40-bf9d-5e8f9426ee22",
        "name": "Standardize Data",
        "type": "n8n-nodes-base.set",
        "position": [
          6120,
          3400
        ],
        "parameters": {
          "options": {},
          "assignments": {
            "assignments": [
              {
                "id": "77dc2acf-9657-4013-9675-99311d299abe",
                "name": "Timestamp",
                "type": "string",
                "value": "={{ $json[\"Timestamp\"] || new Date().toISOString() }}"
              },
              {
                "id": "a5706f57-d7ba-4ffa-a8c6-030bdb2e3d55",
                "name": "Product ID",
                "type": "string",
                "value": "={{ $json.body['Product ID'] }}"
              },
              {
                "id": "53e04ca2-88cb-49a6-b878-4d7abde8806d",
                "name": "Quantity Requested",
                "type": "number",
                "value": "={{ $json.body['Quantity Requested'] }}"
              },
              {
                "id": "9612c7a7-1f76-4168-9c89-d89421cc7c5a",
                "name": "Requested By",
                "type": "string",
                "value": "={{ $json.body['Requested By'] }}"
              },
              {
                "id": "4b0f98cc-3e9f-42a4-81e7-c4c8c0a904eb",
                "name": "Description",
                "type": "string",
                "value": "={{ $json.body.Description }}"
              },
              {
                "id": "a6a134ac-280c-4ef2-bbd6-e121376f9bbf",
                "name": "Submission ID",
                "type": "string",
                "value": "={{ $json.body['Submission ID'] }}"
              },
              {
                "id": "e3a62912-773f-43f2-bf35-5b5e757c345d",
                "name": "Approval Link",
                "type": "string",
                "value": "=https://test.app.n8n.cloud/webhook/approve-issue?submissionId={{ $json.body['Submission ID'] }}\n\n"
              },
              {
                "id": "22fb6d08-5f7e-42dc-a3ea-015f1f4f890c",
                "name": "Status",
                "type": "string",
                "value": "Pending"
              },
              {
                "id": "2c3340dc-b995-4342-9e51-fff09d3d4ca6",
                "name": "Measurement Unit",
                "type": "string",
                "value": "={{ $json.body['Measurement Unit'] }}"
              }
            ]
          },
          "includeOtherFields": "="
        },
        "typeVersion": 3.4
      },
      {
        "id": "47d2bb01-99e6-4ab1-b19d-bc9912243150",
        "name": "Update Stock",
        "type": "n8n-nodes-base.code",
        "position": [
          7440,
          3860
        ],
        "parameters": {
          "jsCode": "const currentStock = parseFloat($input.first().json['Current Stock']\n );\nconst approvedQuantity = parseFloat(\n $('Verify Approval Data').first().json['Approved Quantity']);\nconst newStock = currentStock - approvedQuantity;\n\nif (newStock < 0) throw new Error(`Insufficient stock for ${\n  $('Retrieve Issue Request Details').first().json['Product ID']}`);\n\nreturn {\n  json: {\n    ...$json,\n    \"Updated Current Stock\": newStock,\n\"Material Name\":$input.first().json['Material Name'],\"Measurement Unit\":$input.first().json['Measurement Unit'],\n\"Minimum Stock Level\": \n  $input.first().json['Minimum Stock Level'],\n  \"Issue Date\":\n    $('Retrieve Issue Request Details').first().json['Issue Date'],\n\"Product ID\": \n  $('Retrieve Issue Request Details').first().json['Product ID']\n \n  }\n};"
        },
        "typeVersion": 2
      },
      {
        "id": "dcbb196f-1ecf-4137-af29-e511c4b7b9d9",
        "name": "Receive Issue Request",
        "type": "n8n-nodes-base.webhook",
        "position": [
          5900,
          3400
        ],
        "webhookId": "73d4bdfc-2d8b-42f4-85d5-43ecae0953c1",
        "parameters": {
          "path": "raw-materials-issue",
          "options": {},
          "httpMethod": "POST"
        },
        "typeVersion": 2
      },
      {
        "id": "430599b6-3758-4eb7-a924-8530a7c5dc7e",
        "name": "Send Approval Request",
        "type": "n8n-nodes-base.gmail",
        "position": [
          7660,
          3400
        ],
        "webhookId": "db24c5e3-8113-4d8a-b562-9c248f47fa3c",
        "parameters": {
          "sendTo": "example@gmail.com",
          "message": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Material Issue Request Approval</title>\n  <style>\n    /* Reset and Base Styles */\n    body {\n      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n      line-height: 1.5;\n      color: #444;\n      background-color: #f0f4f8;\n      margin: 0;\n      padding: 0;\n    }\n    .container {\n      width: 90%;\n      max-width: 550px;\n      margin: 15px auto;\n      background-color: #ffffff;\n      border-radius: 8px;\n      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\n      overflow: hidden;\n      border: 1px solid #e0e6ed;\n    }\n    /* Header with Gradient */\n    .header {\n      background: linear-gradient(135deg, #3498db 0%, #2ecc71 100%);\n      padding: 15px;\n      text-align: center;\n      border-top-left-radius: 8px;\n      border-top-right-radius: 8px;\n    }\n    h2 {\n      color: #ffffff;\n      font-size: 20px;\n      margin: 0;\n      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);\n    }\n    /* Content Area */\n    .content {\n      padding: 15px;\n    }\n    p {\n      margin: 5px 0;\n      font-size: 14px;\n    }\n    p.greeting {\n      font-size: 16px;\n      font-weight: 500;\n      color: #2c3e50;\n    }\n    /* Details List */\n    ul {\n      list-style-type: none;\n      padding: 0;\n      margin: 10px 0;\n      background-color: #f8fafc;\n      padding: 10px;\n      border-radius: 6px;\n      border-left: 4px solid #3498db;\n      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);\n    }\n    ul li {\n      margin: 6px 0;\n      font-size: 13px;\n      display: flex;\n      align-items: center;\n    }\n    ul li strong {\n      display: inline-block;\n      width: 130px;\n      color: #2c3e50;\n      font-weight: 600;\n    }\n    /* Action Buttons */\n    .actions {\n      text-align: center;\n      margin: 10px 0;\n      display: flex;\n      justify-content: center;\n      gap: 10px;\n    }\n    .btn {\n      display: inline-block;\n      padding: 8px 20px;\n      text-decoration: none;\n      color: #ffffff;\n      font-size: 13px;\n      font-weight: 600;\n      border-radius: 20px;\n      transition: transform 0.2s ease, box-shadow 0.3s ease;\n      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n    }\n    .btn:hover {\n      transform: translateY(-2px);\n      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);\n    }\n    .btn-approve {\n      background: linear-gradient(90deg, #2ecc71, #27ae60);\n    }\n    .btn-reject {\n      background: linear-gradient(90deg, #e74c3c, #c0392b);\n    }\n    /* Footer */\n    .footer {\n      text-align: center;\n      padding: 10px;\n      background-color: #f8fafc;\n      border-bottom-left-radius: 8px;\n      border-bottom-right-radius: 8px;\n      font-size: 12px;\n      color: #777;\n      border-top: 1px solid #e0e6ed;\n    }\n    .footer p {\n      margin: 0;\n    }\n    /* Responsive Adjustments */\n    @media (max-width: 600px) {\n      .container {\n        width: 95%;\n        margin: 10px auto;\n      }\n      .header {\n        padding: 10px;\n      }\n      h2 {\n        font-size: 18px;\n      }\n      .content {\n        padding: 10px;\n      }\n      ul li {\n        flex-direction: column;\n        align-items: flex-start;\n      }\n      ul li strong {\n        width: auto;\n        margin-bottom: 3px;\n      }\n      .actions {\n        flex-direction: column;\n        gap: 8px;\n      }\n      .btn {\n        width: 80%;\n      }\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <!-- Header -->\n    <div class=\"header\">\n      <h2>Material Issue Request Approval</h2>\n    </div>\n\n    <!-- Content -->\n    <div class=\"content\">\n      <p class=\"greeting\">Dear XXX,</p>\n      <p>Please review the following material issue request:</p>\n\n      <ul>\n        <li><strong>Product ID:</strong> {{ $('Append Material Request').item.json['Product ID'] }}</li>\n        <li><strong>Material:</strong> {{ $json[\"Material Name\"] }}</li>\n        <li><strong>Quantity Requested:</strong> {{ $('Append Material Request').item.json['Quantity Requested'] }} {{ $json[\"Measurement Unit\"] }}</li>\n        <li><strong>Current Stock:</strong> {{ $json[\"Current Stock\"] }} {{ $json[\"Measurement Unit\"] }}</li>\n        <li><strong>Requested By:</strong> {{ $('Append Material Request').item.json['Requested By'] }}</li>\n       \n        <li><strong>Description:</strong> {{ $('Append Material Request').item.json['Description'] }}</li>\n        <li><strong>Submission ID:</strong> {{ $('Append Material Request').item.json['Submission ID'] }}</li>\n        <li><strong>Stock Available:</strong> {{ $json[\"Is Enough\"] ? \"Yes\" : \"No\" }}</li>\n      </ul>\n\n      <div class=\"actions\">\n        <p><strong>To approve:</strong></p>\n        <a href=\"{{ $('Append Material Request').item.json['Approval Link'] }}&action=approve&quantity={{ $('Append Material Request').item.json['Quantity Requested'] }}&approvedBy=PB\" class=\"btn btn-approve\">Approve Request</a>\n        <p><strong>To reject:</strong></p>\n        <a href=\"{{ $('Append Material Request').item.json['Approval Link'] }}&action=reject&approvedBy=PB\" class=\"btn btn-reject\">Reject Request</a>\n      </div>\n    </div>\n\n    <!-- Footer -->\n    <div class=\"footer\">\n      <p>Regards,<br>Your Company<</p>\n    </div>\n  </div>\n</body>\n</html>",
          "options": {},
          "subject": "=Approval Required: Material Issue Request - {{ $json['Product ID'] }}"
        },
        "typeVersion": 2.1
      },
      {
        "id": "7c68ef5d-5518-4236-803c-157fe8c581dd",
        "name": "Prepare Approval",
        "type": "n8n-nodes-base.code",
        "position": [
          7440,
          3400
        ],
        "parameters": {
          "jsCode": "const currentStock = parseFloat(\n  $input.first().json['Current Stock']|| 0);\nconst quantityRequested = parseFloat(\n$('Append Material Request').first().json['Quantity Requested']);\nconst isEnough = currentStock >= quantityRequested;\n\nreturn {\n  json: {\n  ...$json,\n    \"Current Stock\": currentStock,\n    \"Is Enough\": isEnough,\n    \"Material Name\":$input.first().json['Material Name'],\n\"Unit\":$input.first().json['Measurement Unit'],\n\"Minimum Stock Level\": $input.first().json['Minimum Stock Level']\n  }\n};"
        },
        "typeVersion": 2
      },
      {
        "id": "bf6487d1-dd4e-4bc1-9447-c3aaeffd5df0",
        "name": "Create Record Issue",
        "type": "n8n-nodes-base.supabase",
        "position": [
          6780,
          3560
        ],
        "parameters": {
          "tableId": "Materials Issued",
          "dataToSend": "autoMapInputData"
        },
        "typeVersion": 1
      },
      {
        "id": "86899f38-6412-447f-9b6d-a402f6c39fcd",
        "name": "Search Product ID",
        "type": "n8n-nodes-base.supabase",
        "position": [
          7000,
          3560
        ],
        "parameters": {
          "filters": {
            "conditions": [
              {
                "keyName": "Product ID",
                "keyValue": "={{ $json[\"Product ID\"] }}",
                "condition": "eq"
              }
            ]
          },
          "tableId": "Current Stock",
          "operation": "getAll"
        },
        "typeVersion": 1
      },
      {
        "id": "6bb9053b-9a46-4e9e-9097-d5e2ae99e259",
        "name": "Searck Issues",
        "type": "n8n-nodes-base.supabase",
        "position": [
          6560,
          4220
        ],
        "parameters": {
          "filters": {
            "conditions": [
              {
                "keyName": "Submission ID",
                "keyValue": "={{ $json[\"Submission ID\"] }}",
                "condition": "eq"
              }
            ]
          },
          "tableId": "Materials Issued",
          "operation": "getAll"
        },
        "typeVersion": 1
      },
      {
        "id": "420d242b-6a17-4538-bca1-09283a49742f",
        "name": "Update Current Stck",
        "type": "n8n-nodes-base.supabase",
        "position": [
          7680,
          3740
        ],
        "parameters": {
          "filters": {
            "conditions": [
              {
                "keyName": "Product ID",
                "keyValue": "={{ $json['Product ID'] }}",
                "condition": "eq"
              }
            ]
          },
          "tableId": "Current Stock",
          "fieldsUi": {
            "fieldValues": [
              {
                "fieldId": "Material Name",
                "fieldValue": "={{ $json['Material Name'] }}"
              },
              {
                "fieldId": "Previous Stock",
                "fieldValue": "={{ $json['Current Stock'] }}"
              },
              {
                "fieldId": "Current Stock",
                "fieldValue": "={{ $json['Updated Current Stock'] }}"
              },
              {
                "fieldId": "Last Updated",
                "fieldValue": "={{ $json['Last Updated'] }}"
              },
              {
                "fieldId": "Minimum Stock Level",
                "fieldValue": "={{ $json['Minimum Stock Level'] }}"
              }
            ]
          },
          "operation": "update"
        },
        "typeVersion": 1
      },
      {
        "id": "f4c8cb13-acd9-4d7e-ac73-fb528c1700e1",
        "name": "Merge Lookups",
        "type": "n8n-nodes-base.merge",
        "position": [
          7220,
          3400
        ],
        "parameters": {
          "mode": "chooseBranch"
        },
        "typeVersion": 3.1,
        "alwaysOutputData": true
      },
      {
        "id": "0cc01e7c-aa88-4783-af20-5b98f8795935",
        "name": "Update Current Stock1",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          7660,
          3960
        ],
        "parameters": {
          "columns": {
            "value": {
              "Product ID": "={{ $json['Product ID'] }}",
              "Last Updated": "={{ $json['Last Updated'] }}",
              "Current Stock": "={{ $json['Updated Current Stock'] }}",
              "Material Name": "={{ $json['Material Name'] }}",
              "Previous Stock": "={{ $json['Current Stock'] }}",
              "Minimum Stock Level": "={{ $json['Minimum Stock Level'] }}"
            },
            "schema": [
              {
                "id": "Product ID",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Product ID",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Material Name",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Material Name",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Previous Stock",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Previous Stock",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Current Stock",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Current Stock",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Measurement Unit",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Measurement Unit",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Last Updated",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Last Updated",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Minimum Stock Level",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Minimum Stock Level",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "row_number",
                "type": "string",
                "display": true,
                "removed": true,
                "readOnly": true,
                "required": false,
                "displayName": "row_number",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              }
            ],
            "mappingMode": "defineBelow",
            "matchingColumns": [
              "Product ID"
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": false
          },
          "options": {},
          "operation": "update",
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 1019183415,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=1019183415",
            "cachedResultName": "Current Stock"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "67cf6b2c-7166-4075-904b-67c82d94df70",
        "name": "LookUp Current stock1",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          7880,
          3960
        ],
        "parameters": {
          "options": {},
          "filtersUI": {
            "values": [
              {
                "lookupValue": "={{ $json['Product ID'] }}",
                "lookupColumn": "Product ID"
              }
            ]
          },
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 1019183415,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=1019183415",
            "cachedResultName": "Current Stock"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "bb65a800-e307-46a9-a668-b3e7afa32792",
        "name": "Low stock Detection1",
        "type": "n8n-nodes-base.code",
        "position": [
          8100,
          3960
        ],
        "parameters": {
          "mode": "runOnceForEachItem",
          "jsCode": "const currentStock = parseFloat($input.item.json[\"Current Stock\"]);\nconst minStock = parseFloat($input.item.json[\"Minimum Stock Level\"]);\n\n// Check if stock is below minimum\nconst isLow = currentStock < minStock;\n\nreturn {\n  json: {\n    ...$input.item.json,\n    \"Is Low\": isLow,\n    \"Alert Message\": isLow ? \n      `Low stock alert: ${$input.item.json[\"Material Name\"]} (ID: ${$input.item.json[\"Product ID\"]}) - Current Stock: ${currentStock} ${$input.item.json[\"Measurement Unit\"]}, Minimum: ${minStock}` \n      : null\n  }\n};"
        },
        "typeVersion": 2
      },
      {
        "id": "02bd1da9-ecdf-4d05-aa1f-9974f00849b7",
        "name": "Merge1",
        "type": "n8n-nodes-base.merge",
        "position": [
          6780,
          4060
        ],
        "parameters": {
          "mode": "chooseBranch"
        },
        "typeVersion": 3.1,
        "alwaysOutputData": true
      },
      {
        "id": "1e06a4e7-243a-40cd-8aef-1a06a373778a",
        "name": "Sticky Note",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          5840,
          3060
        ],
        "parameters": {
          "width": 2820,
          "height": 1400,
          "content": "# Material Issue Request and Approval"
        },
        "typeVersion": 1
      },
      {
        "id": "ee7270e1-83ff-4d91-8ba8-db4f13c63a57",
        "name": "Append Raw Materials",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          6660,
          1820
        ],
        "parameters": {
          "columns": {
            "value": {},
            "schema": [
              {
                "id": "Timestamp",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Timestamp",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Product ID",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Product ID",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Supplier Name",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Supplier Name",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Material Name",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Material Name",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Quantity Received",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Quantity Received",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Description",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Description",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Measurement Unit",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Measurement Unit",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Unit Price",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Unit Price",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Date of Delivery",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Date of Delivery",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Received By",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Received By",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Total Price",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Total Price",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Submission ID",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Submission ID",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              }
            ],
            "mappingMode": "autoMapInputData",
            "matchingColumns": [],
            "attemptToConvertTypes": false,
            "convertFieldsToString": false
          },
          "options": {},
          "operation": "append",
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 1680576943,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=1680576943",
            "cachedResultName": "Raw Materials"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "21c17077-9f9a-489a-b6a5-ea7a70a85cee",
        "name": "Calculate Total Price",
        "type": "n8n-nodes-base.code",
        "position": [
          6340,
          2040
        ],
        "parameters": {
          "jsCode": "// Get the input data\nconst input = $input.all()[0].json;\n\n// Debug: Log the entire input to see all available fields\nconsole.log(\"Complete Input Data:\", JSON.stringify(input, null, 2));\n\n// Improved number parser that handles different formats\nconst getNumber = (value) => {\n  if (value === undefined || value === null || value === \"\") return null;\n  \n  // Remove any currency symbols, commas, or extra spaces\n  const cleaned = String(value)\n    .replace(/[^\\d.-]/g, '')\n    .trim();\n    \n  const num = parseFloat(cleaned);\n  return isNaN(num) ? null : num;\n};\n\n// Use EXACT field names from your webhook payload\nconst quantity = getNumber(input[\"Quantity Received\"]);  // Not \"Quantity Received\"\nconst unitPrice = getNumber(input[\"Unit Price\"]);    // Not \"Unit Price\"\n\n// Validate\nif (quantity === null) throw new Error(`Invalid quantity: ${input[\"Quantity Received\"]}`);\nif (unitPrice === null) throw new Error(`Invalid price: ${input[\"Unit Price\"]}`);\n\n// Calculate total\nconst totalPrice = quantity * unitPrice;\n\n// Return results\n// Return clean output without debug info\nreturn {\n  json: {\n    \"Timestamp\": new Date().toISOString(),\n    \"Product ID\": input[\"Product ID\"],\n    \"Supplier Name\": input[\"Supplier Name\"],\n    \"Material Name\": input[\"Material Name\"],\n    \"Quantity Received\": quantity,\n    \"Description\": input[\"Description\"] || \"\",\n    \"Measurement Unit\": input[\"Measurement Unit\"],\n    \"Unit Price\": unitPrice,\n    \"Total Price\": totalPrice.toFixed(2),\n    \"Date of Delivery\": input[\"Date of Delivery\"],\n    \"Received By\": input[\"Received By\"],\n    \"Submission ID\": input[\"Submission ID\"]\n  }\n};"
        },
        "typeVersion": 2
      },
      {
        "id": "4ce817b0-2283-438f-82c7-6f4901fffdd3",
        "name": "Calculate Updated Current Stock",
        "type": "n8n-nodes-base.code",
        "position": [
          7640,
          1840
        ],
        "parameters": {
          "mode": "runOnceForEachItem",
          "jsCode": "const existingStock = parseFloat(\n$('Lookup Existing Stock').first().json['Current Stock']\n|| 0);\nconst newQuantity = parseFloat(\n  $('Validate Quantity Received').first().json['Quantity Received']);\nconst updatedStock = existingStock + newQuantity;\n\n\n  \nreturn {\n  json: {\n    ...$json,\n    \"Updated Current Stock\": updatedStock\n  }\n};"
        },
        "typeVersion": 2
      },
      {
        "id": "79fa9b6a-45c7-43bd-b5ba-bc2526a87d1e",
        "name": "Validate Quantity Received",
        "type": "n8n-nodes-base.code",
        "position": [
          6840,
          1820
        ],
        "parameters": {
          "jsCode": "const input = $input.all()[0].json;\n\nconst getNumber = (value) => {\n  if (!value) return 0; // Default to 0 if null/undefined\n  const cleaned = String(value).replace(/[^\\d.-]/g, '').trim();\n  const num = parseFloat(cleaned);\n  return isNaN(num) ? 0 : num;\n};\n\n\n// Use EXACT field names from your webhook payload\nconst quantity = getNumber(input[\"Quantity Received\"]);  // Not \"Quantity Received\"\nif (quantity === 0) throw new Error(`Invalid quantity: ${input[\"Quantity Received\"]}`);\n\nreturn {\n  json: {\n    ...input,\n    \"Quantity Received\": quantity // Ensure it‚Äôs a number\n  }\n};"
        },
        "typeVersion": 2
      },
      {
        "id": "298cee40-074c-4888-af10-05b0be136a75",
        "name": "Initialize New Product stock",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          7860,
          2200
        ],
        "parameters": {
          "columns": {
            "value": {
              "Product ID": "={{ $('Validate Quantity Received').item.json['Product ID'] }}",
              "Last Updated": "={{ $('Validate Quantity Received').item.json['Date of Delivery'] }}",
              "Current Stock": "={{ $('Validate Quantity Received').item.json['Quantity Received'] }}",
              "Material Name": "={{ $('Validate Quantity Received').item.json['Material Name'] }}",
              "Previous Stock": "=0",
              "Measurement Unit": "={{ $('Validate Quantity Received').item.json['Measurement Unit'] }}",
              "Minimum Stock Level": "50"
            },
            "schema": [
              {
                "id": "Product ID",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Product ID",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Material Name",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Material Name",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Previous Stock",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Previous Stock",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Current Stock",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Current Stock",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Measurement Unit",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Measurement Unit",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Last Updated",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Last Updated",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Minimum Stock Level",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Minimum Stock Level",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              }
            ],
            "mappingMode": "defineBelow",
            "matchingColumns": [],
            "attemptToConvertTypes": false,
            "convertFieldsToString": false
          },
          "options": {},
          "operation": "append",
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 1019183415,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=1019183415",
            "cachedResultName": "Current Stock"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "4f102052-db49-4767-b856-41d5e4a6cf33",
        "name": "Update Current Stock",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          7860,
          1940
        ],
        "parameters": {
          "columns": {
            "value": {
              "Product ID": "={{ $json[\"Product ID\"] }}",
              "Last Updated": "={{ $json['Last Updated'] }}",
              "Current Stock": "={{ $json['Updated Current Stock'] }}",
              "Material Name": "={{ $json['Material Name'] }}",
              "Measurement Unit": "={{ $json['Measurement Unit'] }}",
              "Minimum Stock Level": "50"
            },
            "schema": [
              {
                "id": "Product ID",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Product ID",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Material Name",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Material Name",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Previous Stock",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Previous Stock",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Current Stock",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Current Stock",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Measurement Unit",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Measurement Unit",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Last Updated",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Last Updated",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Minimum Stock Level",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Minimum Stock Level",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "row_number",
                "type": "string",
                "display": true,
                "removed": true,
                "readOnly": true,
                "required": false,
                "displayName": "row_number",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              }
            ],
            "mappingMode": "defineBelow",
            "matchingColumns": [
              "Product ID"
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": false
          },
          "options": {},
          "operation": "update",
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 1019183415,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=1019183415",
            "cachedResultName": "Current Stock"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "33d107ac-960e-44aa-b643-993ef4973beb",
        "name": "LookUp Current stock",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          8080,
          1940
        ],
        "parameters": {
          "options": {},
          "filtersUI": {
            "values": [
              {
                "lookupValue": "={{ $json['Product ID'] }}",
                "lookupColumn": "Product ID"
              }
            ]
          },
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 1019183415,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=1019183415",
            "cachedResultName": "Current Stock"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "e0c03d90-f580-43f4-b794-2d278d123b08",
        "name": "New Row Current Stock",
        "type": "n8n-nodes-base.supabase",
        "position": [
          7860,
          2520
        ],
        "parameters": {
          "tableId": "Current Stock",
          "fieldsUi": {
            "fieldValues": [
              {
                "fieldId": "Product ID",
                "fieldValue": "={{ $('Validate Quantity Received').item.json['Product ID'] }}"
              },
              {
                "fieldId": "Material Name",
                "fieldValue": "={{ $('Validate Quantity Received').item.json['Material Name'] }}"
              },
              {
                "fieldId": "Previous Stock",
                "fieldValue": "0"
              },
              {
                "fieldId": "Current Stock",
                "fieldValue": "={{ $('Validate Quantity Received').item.json['Quantity Received'] }}"
              },
              {
                "fieldId": "Measurement Unit",
                "fieldValue": "={{ $('Validate Quantity Received').item.json['Measurement Unit'] }}"
              },
              {
                "fieldId": "Last Updated",
                "fieldValue": "={{ $('Validate Quantity Received').item.json['Date of Delivery'] }}"
              },
              {
                "fieldId": "Minimum Stock Level",
                "fieldValue": "50"
              }
            ]
          }
        },
        "typeVersion": 1
      },
      {
        "id": "f9e1fae8-ce0a-4ab7-9dbb-f2eaccdf0ac9",
        "name": "Current Stock Update",
        "type": "n8n-nodes-base.supabase",
        "position": [
          7860,
          1720
        ],
        "parameters": {
          "filters": {
            "conditions": [
              {
                "keyName": "Product ID",
                "keyValue": "={{ $json['Product ID'] }}",
                "condition": "eq"
              }
            ]
          },
          "tableId": "Current Stock",
          "fieldsUi": {
            "fieldValues": [
              {
                "fieldId": "Product ID",
                "fieldValue": "={{ $json['Product ID'] }}"
              },
              {
                "fieldId": "Material Name",
                "fieldValue": "={{ $json['Material Name'] }}"
              },
              {
                "fieldId": "Current Stock",
                "fieldValue": "={{ $json['Updated Current Stock'] }}"
              },
              {
                "fieldId": "Measurement Unit",
                "fieldValue": "={{ $json['Measurement Unit'] }}"
              },
              {
                "fieldId": "Last Updated",
                "fieldValue": "={{ $json['Last Updated'] }}"
              },
              {
                "fieldId": "Minimum Stock Level",
                "fieldValue": "50"
              }
            ]
          },
          "operation": "update"
        },
        "typeVersion": 1
      },
      {
        "id": "ef8ac9f6-a26e-4e74-b0f6-59066991a343",
        "name": "Search Current Stock",
        "type": "n8n-nodes-base.supabase",
        "position": [
          6960,
          2260
        ],
        "parameters": {
          "filters": {
            "conditions": [
              {
                "keyName": "Product ID",
                "keyValue": "={{ $json[\"Product ID\"] }}",
                "condition": "eq"
              }
            ]
          },
          "tableId": "Current Stock",
          "operation": "getAll",
          "returnAll": true
        },
        "typeVersion": 1,
        "alwaysOutputData": true
      },
      {
        "id": "3e519621-e955-4033-8197-249c5e153dea",
        "name": "Format response",
        "type": "n8n-nodes-base.itemLists",
        "position": [
          7620,
          2220
        ],
        "parameters": {
          "operation": "removeDuplicates"
        },
        "typeVersion": 3
      },
      {
        "id": "16b0aefb-b295-47ef-b818-ab133ac8190f",
        "name": "Merge",
        "type": "n8n-nodes-base.merge",
        "position": [
          7200,
          2040
        ],
        "parameters": {
          "mode": "chooseBranch"
        },
        "typeVersion": 3.1,
        "alwaysOutputData": true
      },
      {
        "id": "d7f06346-91fc-427a-ad23-e1547180f3e3",
        "name": "Low stock Detection2",
        "type": "n8n-nodes-base.code",
        "position": [
          8380,
          1940
        ],
        "parameters": {
          "mode": "runOnceForEachItem",
          "jsCode": "const currentStock = parseFloat($input.item.json[\"Current Stock\"]);\nconst minStock = parseFloat($input.item.json[\"Minimum Stock Level\"]);\n\n// Check if stock is below minimum\nconst isLow = currentStock < minStock;\n\nreturn {\n  json: {\n    ...$input.item.json,\n    \"Is Low\": isLow,\n    \"Alert Message\": isLow ? \n      `Low stock alert: ${$input.item.json[\"Material Name\"]} (ID: ${$input.item.json[\"Product ID\"]}) - Current Stock: ${currentStock} ${$input.item.json[\"Measurement Unit\"]}, Minimum: ${minStock}` \n      : null\n  }\n};"
        },
        "typeVersion": 2
      },
      {
        "id": "1c054902-eb01-4f22-9e0b-31077a0ea978",
        "name": "Sticky Note4",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          5820,
          1620
        ],
        "parameters": {
          "color": 3,
          "width": 2840,
          "height": 1380,
          "content": "# Raw Materials Receiving and Stock Update"
        },
        "typeVersion": 1
      },
      {
        "id": "e0003f1e-1ab5-4b7e-a241-02eeed000c51",
        "name": "Sticky Note2",
        "type": "n8n-nodes-base.stickyNote",
        "position": [
          8720,
          1620
        ],
        "parameters": {
          "width": 2700,
          "height": 2840,
          "content": "![INVENTORY AUTOMATION SYSTEM.png](1)\n# Raw Materials Inventory Management with Google Sheets and Supabase using n8n Webhooks\n\n\n## Introduction\nThis n8n automation streamlines raw materials inventory management by automating the receipt of materials, issuing materials upon approval, updating stock levels, and sending low stock alerts. It integrates webhooks, Google Sheets, Supabase, and Gmail to ensure efficient inventory tracking and communication.\n\n## Problem Statement\nManual inventory management is time-consuming and error-prone, often leading to stock discrepancies, delayed approvals for material issuance, and missed low stock alerts. This automation addresses these issues by providing a seamless workflow for receiving raw materials, processing issue requests, and monitoring stock levels in real time.\n\n## Target Audience\nThis template is designed for:\n- Small to medium-sized businesses managing raw materials inventory.\n- Inventory managers seeking to automate stock updates and approvals.\n- n8n users familiar with Google Sheets, Supabase, and Gmail integrations.\n\n## Description\n\n### Flow 1: Raw Materials Receiving and Stock Update\n**Purpose**: Automates the receipt of raw materials, calculates costs, updates stock, and sends low stock alerts.\n\n- **Receive Raw Materials Webhook**\n  - **Purpose**: Receives raw material data via HTTP POST at a webhook URL from a form submission.\n  - **Input**: JSON with fields like `product_id`, `quantity_received`, `unit_price`, submitted via a form (e.g., Google Form or custom form).\n  - **Output**: Raw webhook data.\n  - **Notes**: Expects `Content-Type: application/json`.\n\n- **Standardize Raw Material Data**\n  - **Purpose**: Maps webhook data into a consistent format.\n  - **Input**: Webhook JSON from form submission.\n  - **Output**: JSON with fields like `Timestamp`, `Product ID`, `Quantity Received`.\n  - **Notes**: Aligns field names for downstream nodes.\n\n- **Calculate Total Price**\n  - **Purpose**: Computes total cost and validates numeric inputs.\n  - **Input**: Standardized JSON.\n  - **Output**: JSON with `Total Price` (Quantity Received * Unit Price).\n  - **Notes**: Uses a custom function to handle invalid numbers.\n\n- **Append Raw Materials**\n  - **Purpose**: Records the receipt in Google Sheets.\n  - **Input**: Calculated JSON.\n  - **Output**: Updated \"Raw Materials\" sheet with new record.\n  - **Notes**: Requires Google Sheets credentials (to be configured by the user).\n\n- **Check Quantity Received Validity**\n  - **Purpose**: Ensures `Quantity Received` is a positive number.\n  - **Input**: JSON from Append Raw Materials.\n  - **Output**: Validated JSON with numeric `Quantity Received`.\n  - **Notes**: Throws error if invalid.\n\n- **Lookup Existing Stock**\n  - **Purpose**: Retrieves existing stock for the `Product ID`.\n  - **Input**: Validated JSON.\n  - **Output**: JSON with `Current Stock` from \"Current Stock\" sheet.\n  - **Notes**: Google Sheets lookup by `Product ID`.\n\n- **Check If Product Exists**\n  - **Purpose**: Branches based on whether the `Product ID` exists in stock.\n  - **Input**: JSON from Lookup Existing Stock.\n  - **Output**: True/False branch.\n  - **Notes**: Condition checks for `Product ID` existence.\n\n- **Calculate Updated Current Stock** (True Branch)\n  - **Purpose**: Updates stock by adding `Quantity Received`.\n  - **Input**: JSON with existing stock.\n  - **Output**: JSON with `Updated Current Stock`.\n  - **Notes**: Ensures numeric accuracy.\n\n- **Update Current Stock** (True Branch)\n  - **Purpose**: Updates the \"Current Stock\" sheet with new stock.\n  - **Input**: Updated stock JSON.\n  - **Output**: Updated \"Current Stock\" sheet.\n  - **Notes**: Matches by `Product ID`.\n\n- **Retrieve Updated Stock for Check** (True Branch)\n  - **Purpose**: Retrieves updated stock for low stock check.\n  - **Input**: Updated stock JSON.\n  - **Output**: JSON with current stock data.\n  - **Notes**: Google Sheets lookup.\n\n- **Detect Low Stock Level** (True Branch)\n  - **Purpose**: Flags if stock falls below the minimum level.\n  - **Input**: Retrieved stock data.\n  - **Output**: JSON with `Is Low` flag and `Alert Message`.\n  - **Notes**: Compares with `Minimum Stock Level` (default: 50).\n\n- **Trigger Low Stock Alert** (True Branch)\n  - **Purpose**: Triggers notification if stock is low.\n  - **Input**: Low stock detection JSON.\n  - **Output**: True branch sends email.\n  - **Notes**: Condition: `{{ $json['Is Low'] }}`.\n\n- **Send Low Stock Email Alert** (True Branch, Low)\n  - **Purpose**: Sends low stock alert email to the stock manager.\n  - **Input**: JSON with alert details.\n  - **Output**: HTML email to a user-configured email address.\n  - **Notes**: Includes product info and reorder link; email address must be set by the user.\n\n- **Add New Product to Stock** (False Branch)\n  - **Purpose**: Adds new product to \"Current Stock\" sheet.\n  - **Input**: Validated JSON.\n  - **Output**: New row with initial stock (Quantity Received).\n  - **Notes**: Sets `Minimum Stock Level` to 50.\n\n- **Current Stock Update** (True Branch, Supabase)\n  - **Purpose**: Updates Supabase `Current Stock` table.\n  - **Input**: Updated stock JSON.\n  - **Output**: Updated Supabase record.\n  - **Notes**: Matches by `Product ID`; requires user-configured Supabase credentials.\n\n- **New Row Current Stock** (False Branch, Supabase)\n  - **Purpose**: Inserts new product into Supabase `Current Stock` table.\n  - **Input**: Validated JSON.\n  - **Output**: New Supabase record.\n  - **Notes**: Sets initial stock; requires Supabase credentials.\n\n- **Search Current Stock** (Supabase)\n  - **Purpose**: Retrieves `Current Stock` records for `Product ID`.\n  - **Input**: JSON with `Product ID`.\n  - **Output**: JSON array of matching records.\n  - **Notes**: Uses `returnAll: true`.\n\n- **New Record Raw** (Supabase)\n  - **Purpose**: Inserts raw material record into Supabase `Raw Materials` table.\n  - **Input**: Calculated JSON.\n  - **Output**: New Supabase record.\n  - **Notes**: Auto-maps input data.\n\n- **Format Response**\n  - **Purpose**: Removes duplicates from response.\n  - **Input**: Search Current Stock data.\n  - **Output**: Cleaned JSON array.\n  - **Notes**: Ensures unique records.\n\n- **Combine Stock Update Branches**\n  - **Purpose**: Combines branches (existing/new product).\n  - **Input**: Outputs from Check If Product Exists branches.\n  - **Output**: Merged JSON.\n  - **Notes**: Ensures data continuity.\n\n**Impact**: Automates raw material receipt, ensures accurate stock updates, and provides timely low stock notifications.\n\n### Flow 2: Material Issue Request and Approval\n**Purpose**: Automates material issue requests, processes approvals/rejections, updates stock, and sends low stock alerts.\n\n- **Receive Material Issue Webhook**\n  - **Purpose**: Receives material issue request via HTTP POST at a webhook URL from a form submission.\n  - **Input**: JSON with `Product ID`, `Quantity Requested`, etc., submitted via a form (e.g., Google Form or custom form).\n  - **Output**: Raw webhook data.\n  - **Notes**: Webhook trigger for issue requests.\n\n- **Standardize Data**\n  - **Purpose**: Normalizes request data and generates approval link.\n  - **Input**: Webhook JSON from form submission.\n  - **Output**: JSON with `Status` \"Pending,\" `Approval Link`.\n  - **Notes**: Maps form fields for consistency.\n\n- **Validate Issue Request Data**\n  - **Purpose**: Ensures `Quantity Requested` is a positive number.\n  - **Input**: Standardized JSON.\n  - **Output**: Validated JSON or error.\n  - **Notes**: JavaScript validation.\n\n- **Verify Requested Quantity**\n  - **Purpose**: Validates additional fields like `Product ID` and `Submission ID`.\n  - **Input**: Validated JSON.\n  - **Output**: Further validated JSON or error.\n  - **Notes**: Ensures data integrity.\n\n- **Append Material Request**\n  - **Purpose**: Records request in \"Materials Issued\" sheet.\n  - **Input**: Verified JSON.\n  - **Output**: Updated \"Materials Issued\" sheet.\n  - **Notes**: Google Sheets append operation.\n\n- **Check Available Stock for Issue**\n  - **Purpose**: Retrieves `Current Stock` for `Product ID`.\n  - **Input**: Appended JSON.\n  - **Output**: JSON with stock data.\n  - **Notes**: Google Sheets lookup.\n\n#### Approval Process\nThe following steps handle the approval of material issue requests, ensuring that requests are reviewed and either approved or rejected before stock is updated.\n\n- **Prepare Approval**\n  - **Purpose**: Checks if stock is sufficient to fulfill the request.\n  - **Input**: Stock data from Check Available Stock for Issue.\n  - **Output**: JSON with `Is Enough` flag (true if `Current Stock` >= `Quantity Requested`).\n  - **Notes**: Prepares data for the approval email.\n\n- **Send Approval Request**\n  - **Purpose**: Sends an email to the approver with clickable Approve/Reject buttons.\n  - **Input**: JSON with `Is Enough`, `Product ID`, `Quantity Requested`, and `Approval Link`.\n  - **Output**: HTML email to a user-configured email address.\n  - **Notes**: Email contains buttons linking to the Receive Approval Response webhook; email address must be set by the user.\n\n- **Receive Approval Response**\n  - **Purpose**: Captures the approver‚Äôs decision via a webhook triggered by clicking Approve/Reject.\n  - **Input**: Webhook parameters like `submissionId`, `action` (\"approve\" or \"reject\"), `quantity`.\n  - **Output**: Raw webhook data with approval details.\n  - **Notes**: Webhook URL must be configured to match the links in the approval email.\n\n- **Format Approval Response**\n  - **Purpose**: Processes the approval response and adds metadata.\n  - **Input**: Webhook JSON from Receive Approval Response.\n  - **Output**: JSON with `Action`, `Approved Quantity`, `Approval Date`.\n  - **Notes**: Sets `Approval Date` to the current timestamp.\n\n- **Verify Approval Data**\n  - **Purpose**: Validates the approval response to ensure it‚Äôs complete and correct.\n  - **Input**: Formatted JSON.\n  - **Output**: Validated JSON or error.\n  - **Notes**: Checks for valid `Submission ID`, `Action`, and `Approved Quantity` (> 0).\n\n- **Retrieve Issue Request Details**\n  - **Purpose**: Retrieves the original issue request for updating.\n  - **Input**: Validated JSON with `Submission ID`.\n  - **Output**: JSON with request data from \"Materials Issued\" sheet.\n  - **Notes**: Google Sheets lookup by `Submission ID`.\n\n- **Process Approval Decision**\n  - **Purpose**: Branches the flow based on the approver‚Äôs decision.\n  - **Input**: JSON with `Action` (\"approve\" or \"reject\").\n  - **Output**: True branch (approved) or False branch (rejected).\n  - **Notes**: Condition: `{{ $json['Action'] === \"approve\" }}`.\n\n#### Post-Approval Steps\n- **Get Stock for Issue Update** (True Branch, Approved)\n  - **Purpose**: Retrieves the latest `Current Stock` before updating.\n  - **Input**: Approved JSON.\n  - **Output**: JSON with stock data.\n  - **Notes**: Google Sheets lookup.\n\n- **Deduct Issued Stock** (True Branch, Approved)\n  - **Purpose**: Reduces stock by `Approved Quantity`.\n  - **Input**: Stock and approval data.\n  - **Output**: JSON with `Updated Current Stock`.\n  - **Notes**: Errors if stock is insufficient.\n\n- **Update Stock After Issue** (True Branch, Approved)\n  - **Purpose**: Updates \"Current Stock\" sheet with new stock.\n  - **Input**: Updated stock JSON.\n  - **Output**: Updated \"Current Stock\" sheet.\n  - **Notes**: Matches by `Product ID`.\n\n- **Retrieve Stock After Issue** (True Branch, Approved)\n  - **Purpose**: Retrieves updated stock for low stock check.\n  - **Input**: Updated stock JSON.\n  - **Output**: JSON with stock data.\n  - **Notes**: Google Sheets lookup.\n\n- **Detect Low Stock After Issue** (True Branch, Approved)\n  - **Purpose**: Flags if stock is low after issuance.\n  - **Input**: Retrieved stock data.\n  - **Output**: JSON with `Is Low` flag and `Alert Message`.\n  - **Notes**: Compares with `Minimum Stock Level`.\n\n- **Trigger Low Stock Alert After Issue** (True Branch, Approved)\n  - **Purpose**: Triggers notification if stock is low.\n  - **Input**: Low stock detection JSON.\n  - **Output**: True branch sends email.\n  - **Notes**: Condition: `{{ $json['Is Low'] }}`.\n\n- **Send Low Stock Email After Issue** (True Branch, Low)\n  - **Purpose**: Sends low stock alert email.\n  - **Input**: JSON with alert details.\n  - **Output**: HTML email to a user-configured email address.\n  - **Notes**: Includes product info; email address must be set by the user.\n\n- **Update Issue Request Status** (True/False Branch)\n  - **Purpose**: Updates request status in \"Materials Issued\" sheet.\n  - **Input**: Approval action JSON.\n  - **Output**: Updated sheet with `Status` \"Approved\" or \"Rejected.\"\n  - **Notes**: Google Sheets update; includes `Approved By` and `Approval Date` if approved.\n\n- **Combine Stock Lookup Results**\n  - **Purpose**: Combines stock lookup branches.\n  - **Input**: Outputs from Check Available Stock for Issue and Search Stock by Product ID.\n  - **Output**: Merged JSON.\n  - **Notes**: Ensures data continuity.\n\n- **Create Record Issue** (Supabase)\n  - **Purpose**: Inserts issue request into Supabase `Materials Issued` table.\n  - **Input**: Verified JSON.\n  - **Output**: New Supabase record.\n  - **Notes**: Auto-maps data; requires user-configured credentials.\n\n- **Search Stock by Product ID** (Supabase)\n  - **Purpose**: Retrieves `Current Stock` records.\n  - **Input**: JSON with `Product ID`.\n  - **Output**: JSON array of records.\n  - **Notes**: Filters by `Product ID`.\n\n- **Issues Table Update** (Supabase, True/False Branch)\n  - **Purpose**: Updates Supabase `Materials Issued` table.\n  - **Input**: Approval action JSON.\n  - **Output**: Updated Supabase record.\n  - **Notes**: Matches by `Submission ID`.\n\n- **Update Current Stock** (Supabase, True Branch)\n  - **Purpose**: Updates Supabase `Current Stock` table.\n  - **Input**: Updated stock JSON.\n  - **Output**: Updated Supabase record.\n  - **Notes**: Matches by `Product ID`.\n\n- **Combine Issue Lookup Branches**\n  - **Purpose**: Combines issue lookup branches.\n  - **Input**: Outputs from Retrieve Issue Request Details and Search Issue by Submission ID.\n  - **Output**: Merged JSON.\n  - **Notes**: Ensures data continuity.\n\n- **Search Issue by Submission ID** (Supabase)\n  - **Purpose**: Retrieves issue records by `Submission ID`.\n  - **Input**: Validated JSON.\n  - **Output**: JSON array of records.\n  - **Notes**: Filters by `Submission ID`.\n\n**Impact**: Streamlines material issuance, ensures accurate stock updates, and provides proactive low stock alerts.\n\n## Conclusion\nThis automation enhances inventory management by integrating n8n with Google Sheets, Supabase, and Gmail. It reduces manual effort, ensures data accuracy, and keeps teams informed with timely alerts. Community feedback and contributions are welcome!"
        },
        "typeVersion": 1
      },
      {
        "id": "8b6ee379-d020-44d7-892f-7b5479fa6944",
        "name": "Receive Raw Materials Webhook",
        "type": "n8n-nodes-base.webhook",
        "position": [
          5940,
          2040
        ],
        "webhookId": "be8290c0-bdd9-489e-938a-ba7a3dd5745e",
        "parameters": {
          "path": "Pb-raw-materials",
          "options": {
            "responseHeaders": {
              "entries": [
                {
                  "name": "Content-Type",
                  "value": "application/json"
                }
              ]
            }
          },
          "httpMethod": "POST"
        },
        "typeVersion": 2
      },
      {
        "id": "087a3182-2a5d-47a0-a3ac-33f1f3eb6a31",
        "name": "Standardize Raw Material Data",
        "type": "n8n-nodes-base.set",
        "position": [
          6160,
          2040
        ],
        "parameters": {
          "options": {},
          "assignments": {
            "assignments": [
              {
                "id": "f3b4487d-ab8e-4b5d-9bea-19ec7195a76c",
                "name": "Timestamp",
                "type": "string",
                "value": "={{ $json.body.timestamp }}"
              },
              {
                "id": "f2f15ff8-d8f6-4bd6-b892-ec2fc1f92c29",
                "name": "Product ID",
                "type": "string",
                "value": "={{ $json.body.product_id }}"
              },
              {
                "id": "9e48b196-6176-4077-bac9-32bef81dd1c0",
                "name": "Supplier Name",
                "type": "string",
                "value": "={{ $json.body.supplier_name }}"
              },
              {
                "id": "4b79875e-f4ee-4452-8507-5c7f2d85786e",
                "name": "Quantity Received",
                "type": "number",
                "value": "={{ $json.body.quantity_received }}"
              },
              {
                "id": "d223e0fa-f80a-4cdb-9d34-60f453feecc0",
                "name": "Description",
                "type": "string",
                "value": "={{ $json.body.description }}"
              },
              {
                "id": "f87b4c22-d8db-470b-9c65-14a3e07ba31a",
                "name": "Measurement Unit",
                "type": "string",
                "value": "={{ $json.body.measurement_unit }}"
              },
              {
                "id": "0a0be214-59b7-4cb6-9d0e-0c3e06bba070",
                "name": "Unit Price",
                "type": "number",
                "value": "={{ $json.body.unit_price }}"
              },
              {
                "id": "0bbac1f8-c89b-4af8-a82e-3f937014bbce",
                "name": "Date of Delivery",
                "type": "string",
                "value": "={{ $json.body.date_of_delivery }}"
              },
              {
                "id": "02cd7f92-cd88-48ed-9f9d-8a64a5d1c95e",
                "name": "Received By",
                "type": "string",
                "value": "={{ $json.body.received_by }}"
              },
              {
                "id": "5a484f8b-a3f7-48bf-a34c-78e1f5e22af5",
                "name": "Total Price",
                "type": "string",
                "value": "={{ $json.body.total_price }}"
              },
              {
                "id": "2bbf891b-372c-4f81-9176-bc50a94a543a",
                "name": "Material Name",
                "type": "string",
                "value": "={{ $json.body.material_name }}"
              },
              {
                "id": "f5ce72d9-a704-4410-ae5b-2c0b1a3b907b",
                "name": "Submission ID",
                "type": "string",
                "value": "={{ $json.body.submissionId }}"
              }
            ]
          },
          "includeOtherFields": "="
        },
        "typeVersion": 3.4
      },
      {
        "id": "ff7d279b-2447-4423-a0ff-4512e4a8a913",
        "name": "Lookup Existing Stock",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          7000,
          1820
        ],
        "parameters": {
          "options": {},
          "filtersUI": {
            "values": [
              {
                "lookupValue": "={{ $json[\"Product ID\"] }}",
                "lookupColumn": "Product ID"
              }
            ]
          },
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 1019183415,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=1019183415",
            "cachedResultName": "Current Stock"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5,
        "alwaysOutputData": true
      },
      {
        "id": "52698913-69d6-4473-9e77-7ef4530bf81a",
        "name": "Check If Product ID Exists",
        "type": "n8n-nodes-base.if",
        "position": [
          7420,
          2040
        ],
        "parameters": {
          "options": {},
          "conditions": {
            "options": {
              "version": 2,
              "leftValue": "",
              "caseSensitive": true,
              "typeValidation": "loose"
            },
            "combinator": "and",
            "conditions": [
              {
                "id": "bcff2100-54d5-4480-87ab-1d7ce23bd007",
                "operator": {
                  "type": "string",
                  "operation": "exists",
                  "singleValue": true
                },
                "leftValue": "={{ $json[\"Product ID\"] }}",
                "rightValue": ""
              }
            ]
          },
          "looseTypeValidation": true
        },
        "typeVersion": 2.2
      },
      {
        "id": "ecc30bd0-206e-448f-952a-7a2c4ea98bc5",
        "name": "New Record Row",
        "type": "n8n-nodes-base.supabase",
        "position": [
          6700,
          2260
        ],
        "parameters": {
          "tableId": "Raw Materials",
          "dataToSend": "autoMapInputData"
        },
        "typeVersion": 1
      },
      {
        "id": "9ffaeb38-b6fc-47f7-8611-c7da61c9cd08",
        "name": "Trigger Low Stock Alert",
        "type": "n8n-nodes-base.if",
        "position": [
          8200,
          2280
        ],
        "parameters": {
          "options": {},
          "conditions": {
            "options": {
              "version": 2,
              "leftValue": "",
              "caseSensitive": true,
              "typeValidation": "strict"
            },
            "combinator": "and",
            "conditions": [
              {
                "id": "e0493b94-1e9c-4f68-ba66-4abd2bd5b569",
                "operator": {
                  "type": "boolean",
                  "operation": "true",
                  "singleValue": true
                },
                "leftValue": "={{ $json['Is Low'] }}",
                "rightValue": "="
              }
            ]
          }
        },
        "typeVersion": 2.2
      },
      {
        "id": "469bb7fe-5595-4503-9034-8df0c974cbc2",
        "name": "Send Low Stock Email Alert",
        "type": "n8n-nodes-base.gmail",
        "position": [
          8440,
          2260
        ],
        "webhookId": "fd7aff46-cf63-4ca3-9406-0b90c2f8aa8b",
        "parameters": {
          "sendTo": "example@gmail.com",
          "message": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Low Stock Alert</title>\n  <style>\n    body {\n      font-family: Arial, sans-serif;\n      line-height: 1.6;\n      color: #333;\n      background-color: #f4f4f4;\n      margin: 0;\n      padding: 0;\n    }\n    .container {\n      width: 80%;\n      max-width: 600px;\n      margin: 20px auto;\n      background-color: #fff;\n      padding: 20px;\n      border-radius: 8px;\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n    }\n    h2 {\n      color: #e74c3c;\n      text-align: center;\n    }\n    p {\n      margin: 10px 0;\n    }\n    .alert-message {\n      background-color: #ffe6e6;\n      padding: 15px;\n      border-left: 4px solid #e74c3c;\n      margin: 20px 0;\n      font-weight: bold;\n    }\n    ul {\n      list-style-type: none;\n      padding: 0;\n      margin: 20px 0;\n      background-color: #f9f9f9;\n      padding: 15px;\n      border-left: 4px solid #3498db;\n    }\n    ul li {\n      margin: 8px 0;\n    }\n    ul li strong {\n      display: inline-block;\n      width: 150px;\n    }\n    .action {\n      text-align: center;\n      margin: 20px 0;\n    }\n    .btn {\n      display: inline-block;\n      padding: 10px 20px;\n      text-decoration: none;\n      color: #fff;\n      background-color: #3498db;\n      border-radius: 5px;\n      font-weight: bold;\n    }\n    .footer {\n      text-align: center;\n      margin-top: 20px;\n      font-size: 0.9em;\n      color: #777;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h2>Low Stock Alert</h2>\n    <p>Dear Stock Manager,</p>\n\n    <p>We have detected a low stock level for the following material:</p>\n\n    <div class=\"alert-message\">\n      {{ $json[\"Alert Message\"] }}\n    </div>\n\n    <ul>\n      <li><strong>Product ID:</strong> {{ $json[\"Product ID\"] }}</li>\n      <li><strong>Material:</strong> {{ $json[\"Material Name\"] }}</li>\n      <li><strong>Current Stock:</strong> {{ $json[\"Current Stock\"] }} {{ $json[\"Measurement Unit\"] }}</li>\n      <li><strong>Minimum Stock:</strong> {{ $json[\"Minimum Stock Level\"] }} {{ $json[\"Measurement Unit\"] }}</li>\n    </ul>\n\n    <div class=\"action\">\n      <p>Please take action to reorder this material.</p>\n      <a href=\"https://forms.gle/reorder-form\" class=\"btn\">Reorder Now</a>\n    </div>\n\n    <div class=\"footer\">\n      <p>Regards,<br>Your Company</p>\n    </div>\n  </div>\n</body>\n</html>",
          "options": {},
          "subject": "Low Stock Alert: Immediate Action Required"
        },
        "typeVersion": 2.1
      },
      {
        "id": "24fb479d-6f25-4d69-bc5a-925645ae4837",
        "name": "Low Stock Email Alert",
        "type": "n8n-nodes-base.gmail",
        "position": [
          8540,
          3940
        ],
        "webhookId": "fd7aff46-cf63-4ca3-9406-0b90c2f8aa8b",
        "parameters": {
          "sendTo": "example@gmail.com",
          "message": "=<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>Low Stock Alert</title>\n  <style>\n    body {\n      font-family: Arial, sans-serif;\n      line-height: 1.6;\n      color: #333;\n      background-color: #f4f4f4;\n      margin: 0;\n      padding: 0;\n    }\n    .container {\n      width: 80%;\n      max-width: 600px;\n      margin: 20px auto;\n      background-color: #fff;\n      padding: 20px;\n      border-radius: 8px;\n      box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\n    }\n    h2 {\n      color: #e74c3c;\n      text-align: center;\n    }\n    p {\n      margin: 10px 0;\n    }\n    .alert-message {\n      background-color: #ffe6e6;\n      padding: 15px;\n      border-left: 4px solid #e74c3c;\n      margin: 20px 0;\n      font-weight: bold;\n    }\n    ul {\n      list-style-type: none;\n      padding: 0;\n      margin: 20px 0;\n      background-color: #f9f9f9;\n      padding: 15px;\n      border-left: 4px solid #3498db;\n    }\n    ul li {\n      margin: 8px 0;\n    }\n    ul li strong {\n      display: inline-block;\n      width: 150px;\n    }\n    .action {\n      text-align: center;\n      margin: 20px 0;\n    }\n    .btn {\n      display: inline-block;\n      padding: 10px 20px;\n      text-decoration: none;\n      color: #fff;\n      background-color: #3498db;\n      border-radius: 5px;\n      font-weight: bold;\n    }\n    .footer {\n      text-align: center;\n      margin-top: 20px;\n      font-size: 0.9em;\n      color: #777;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <h2>Low Stock Alert</h2>\n    <p>Dear Stock Manager,</p>\n\n    <p>We have detected a low stock level for the following material:</p>\n\n    <div class=\"alert-message\">\n      {{ $json[\"Alert Message\"] }}\n    </div>\n\n    <ul>\n      <li><strong>Product ID:</strong> {{ $json[\"Product ID\"] }}</li>\n      <li><strong>Material:</strong> {{ $json[\"Material Name\"] }}</li>\n      <li><strong>Current Stock:</strong> {{ $json[\"Current Stock\"] }} {{ $json[\"Measurement Unit\"] }}</li>\n      <li><strong>Minimum Stock:</strong> {{ $json[\"Minimum Stock Level\"] }} {{ $json[\"Measurement Unit\"] }}</li>\n    </ul>\n\n    <div class=\"action\">\n      <p>Please take action to reorder this material.</p>\n      <a href=\"https://forms.gle/reorder-form\" class=\"btn\">Reorder Now</a>\n    </div>\n\n    <div class=\"footer\">\n      <p>Regards,<br>Your Company</p>\n    </div>\n  </div>\n</body>\n</html>",
          "options": {},
          "subject": "Low Stock Alert: Immediate Action Required"
        },
        "typeVersion": 2.1
      },
      {
        "id": "ac8781e9-f694-467d-b40b-95bdbab98880",
        "name": "Validate Issue Request Data",
        "type": "n8n-nodes-base.code",
        "position": [
          6340,
          3400
        ],
        "parameters": {
          "jsCode": "const input = $input.all()[0].json;\nconst quantityRequested= input[\"Quantity Requested\"];\n\nif (quantityRequested <= 0) throw new Error(`Invalid quantity Requested: ${quantityRequested}. Must be greater than 0`);\n\nreturn { json: input };"
        },
        "typeVersion": 2
      },
      {
        "id": "6d88db70-6b4f-47c5-8093-ab339762edbe",
        "name": "Verify Requested Quantity",
        "type": "n8n-nodes-base.code",
        "position": [
          6560,
          3400
        ],
        "parameters": {
          "jsCode": "const input = $input.all()[0].json;\nconst quantityRequested = input[\"Quantity Requested\"];\nif (!input[\"Product ID\"]) throw new Error(\"Product ID is missing\");\nif (quantityRequested <= 0) throw new Error(`Invalid quantity requested: ${quantityRequested}`);\nif (!input[\"Submission ID\"]) throw new Error(\"Submission ID is missing\");\nreturn { json: input };"
        },
        "typeVersion": 2
      },
      {
        "id": "bd2313cc-e3c9-4405-a1ed-8f64969e5bca",
        "name": "Check Available Stock for Issue",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          7000,
          3240
        ],
        "parameters": {
          "options": {},
          "filtersUI": {
            "values": [
              {
                "lookupValue": "={{ $json[\"Product ID\"] }}",
                "lookupColumn": "Product ID"
              }
            ]
          },
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 1019183415,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=1019183415",
            "cachedResultName": "Current Stock"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "8cd87b7d-8dc8-41c7-b76e-b5ebe35278b0",
        "name": "Format Approval Response",
        "type": "n8n-nodes-base.set",
        "position": [
          6120,
          4060
        ],
        "parameters": {
          "options": {},
          "assignments": {
            "assignments": [
              {
                "id": "1b3dd2ac-a54f-49ea-8302-f3e490de5d00",
                "name": "Submission ID",
                "type": "string",
                "value": "={{ $json.query.submissionId }}"
              },
              {
                "id": "007d727d-09f1-4414-a114-6f526afe877a",
                "name": "Action",
                "type": "string",
                "value": "={{ $json.query.action }}"
              },
              {
                "id": "dbb729e9-feac-48de-add1-ba1f810fafde",
                "name": "Approved Quantity",
                "type": "number",
                "value": "={{ $json.query.quantity }}"
              },
              {
                "id": "8b516a0b-9ca1-4c12-90b3-7b442fef0f17",
                "name": "Approved By",
                "type": "string",
                "value": "={{ $json.query.approvedBy }}"
              },
              {
                "id": "b5a2e71a-038d-4bf7-9edc-2ea606bec091",
                "name": "Approval Date",
                "type": "string",
                "value": "={{ new Date().toISOString() }}"
              }
            ]
          }
        },
        "typeVersion": 3.4
      },
      {
        "id": "6749923b-1032-4adb-b805-eda6efd5ee1c",
        "name": "Verify Approval Data",
        "type": "n8n-nodes-base.code",
        "position": [
          6340,
          4060
        ],
        "parameters": {
          "jsCode": "const input = $input.all()[0].json;\nif (!input[\"Submission ID\"]) throw new Error(\"Submission ID is missing\");\nif (![\"approve\", \"reject\"].includes(input[\"Action\"])) throw new Error(\"Invalid action\");\nif (input[\"Action\"] === \"approve\" && input[\"Approved Quantity\"] <= 0) throw new Error(\"Approved quantity must be greater than 0\");\nreturn { json: input };"
        },
        "typeVersion": 2
      },
      {
        "id": "c5e34da4-81ec-47dc-aacf-4d6e0cf4256c",
        "name": "Retrieve Issue Request Details",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          6560,
          3840
        ],
        "parameters": {
          "options": {},
          "filtersUI": {
            "values": [
              {
                "lookupValue": "={{ $json[\"Submission ID\"] }}",
                "lookupColumn": "Submission ID"
              }
            ]
          },
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 328307238,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=328307238",
            "cachedResultName": "Materials Issued"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "e3c9b60b-fa41-4ec2-9f8f-789ac4fc6323",
        "name": "Process Approval Decision",
        "type": "n8n-nodes-base.if",
        "position": [
          6980,
          4060
        ],
        "parameters": {
          "options": {},
          "conditions": {
            "options": {
              "version": 2,
              "leftValue": "",
              "caseSensitive": true,
              "typeValidation": "loose"
            },
            "combinator": "and",
            "conditions": [
              {
                "id": "c5734b4b-e63a-4ec4-866f-8c1dace02ef1",
                "operator": {
                  "type": "boolean",
                  "operation": "true",
                  "singleValue": true
                },
                "leftValue": "={{ $('Verify Approval Data').item.json.Action === \"approve\" }}",
                "rightValue": ""
              }
            ]
          },
          "looseTypeValidation": true
        },
        "typeVersion": 2.2
      },
      {
        "id": "406226c7-89b3-4a09-ba05-4b640a619ae1",
        "name": "Get Stock for Issue Update from Current",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          7220,
          3780
        ],
        "parameters": {
          "options": {},
          "filtersUI": {
            "values": [
              {
                "lookupValue": "={{ $json['Product ID'] }}",
                "lookupColumn": "Product ID"
              }
            ]
          },
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 1019183415,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=1019183415",
            "cachedResultName": "Current Stock"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "75046f2a-7949-4280-b6a8-500848e41357",
        "name": "Update Stock After Issue",
        "type": "n8n-nodes-base.googleSheets",
        "position": [
          7240,
          4040
        ],
        "parameters": {
          "columns": {
            "value": {
              "Status": "={{ $('Verify Approval Data').item.json.Action === \"approve\" ? \"Approved\" : $('Verify Approval Data').item.json.Action === \"reject\" ? \"Rejected\" : $json[\"action\"] }}\n\n",
              "Timestamp": "={{ $json.Timestamp }}",
              "Issue Date": "={{ $('Verify Approval Data').item.json['Approval Date'] }}",
              "Product ID": "={{ $json['Product ID'] }}",
              "Description": "={{ $json.Description }}",
              "Requested By": "={{ $json['Requested By'] }}",
              "Approval Link": "={{ $json['Approval Link'] }}",
              "Submission ID": "={{ $json['Submission ID'] }}",
              "Measurement Unit": "={{ $json['Measurement Unit'] }}",
              "Quantity Requested": "={{ $json['Quantity Requested'] }}"
            },
            "schema": [
              {
                "id": "Timestamp",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Timestamp",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Product ID",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Product ID",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Quantity Requested",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Quantity Requested",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Measurement Unit",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Measurement Unit",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Requested By",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Requested By",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Issue Date",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Issue Date",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Description",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Description",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Submission ID",
                "type": "string",
                "display": true,
                "removed": false,
                "required": false,
                "displayName": "Submission ID",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Status",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Status",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "Approval Link",
                "type": "string",
                "display": true,
                "required": false,
                "displayName": "Approval Link",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              },
              {
                "id": "row_number",
                "type": "string",
                "display": true,
                "removed": true,
                "readOnly": true,
                "required": false,
                "displayName": "row_number",
                "defaultMatch": false,
                "canBeUsedToMatch": true
              }
            ],
            "mappingMode": "defineBelow",
            "matchingColumns": [
              "Submission ID"
            ],
            "attemptToConvertTypes": false,
            "convertFieldsToString": false
          },
          "options": {},
          "operation": "update",
          "sheetName": {
            "__rl": true,
            "mode": "list",
            "value": 328307238,
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit#gid=328307238",
            "cachedResultName": "Materials Issued"
          },
          "documentId": {
            "__rl": true,
            "mode": "list",
            "value": "1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw",
            "cachedResultUrl": "https://docs.google.com/spreadsheets/d/1q0S6AVK7uxZG8sUQkpcZr01KToHPjOZ0gG3zKHLR6lw/edit?usp=drivesdk",
            "cachedResultName": "Plumbee Raw Material Delivery  (Responses)"
          }
        },
        "typeVersion": 4.5
      },
      {
        "id": "3005f241-e0c3-4acd-9998-9b3f2cdece0c",
        "name": "Materials Issue Table Update",
        "type": "n8n-nodes-base.supabase",
        "position": [
          7220,
          4260
        ],
        "parameters": {
          "filters": {
            "conditions": [
              {
                "keyName": "Submission ID",
                "keyValue": "={{ $json[\"Submission ID\"] }}",
                "condition": "eq"
              }
            ]
          },
          "tableId": "Materials Issued",
          "fieldsUi": {
            "fieldValues": [
              {
                "fieldId": "Timestamp",
                "fieldValue": "={{ $json.Timestamp }}"
              },
              {
                "fieldId": "Product ID",
                "fieldValue": "={{ $json['Product ID'] }}"
              },
              {
                "fieldId": "Quantity Requested",
                "fieldValue": "={{ $json['Quantity Requested'] }}"
              },
              {
                "fieldId": "Measurement Unit",
                "fieldValue": "={{ $json['Measurement Unit'] }}"
              },
              {
                "fieldId": "Requested By",
                "fieldValue": "={{ $json['Requested By'] }}"
              },
              {
                "fieldId": "Description",
                "fieldValue": "={{ $json.Description }}"
              },
              {
                "fieldId": "Status",
                "fieldValue": "={{ $('Verify Approval Data').item.json.Action === \"approve\" ? \"Approved\" : $('Verify Approval Data').item.json.Action === \"reject\" ? \"Rejected\" : $json[\"action\"] }}"
              },
              {
                "fieldId": "Approval Link",
                "fieldValue": "={{ $json['Approval Link'] }}"
              },
              {
                "fieldId": "Submission ID",
                "fieldValue": "={{ $json['Submission ID'] }}"
              },
              {
                "fieldId": "Issue Date",
                "fieldValue": "={{ $('Verify Approval Data').item.json['Approval Date'] }}"
              }
            ]
          },
          "operation": "update"
        },
        "typeVersion": 1
      },
      {
        "id": "808ce6c2-6620-40ae-8c6d-518cf28dce26",
        "name": "Is Stock is Low",
        "type": "n8n-nodes-base.if",
        "position": [
          8300,
          3960
        ],
        "parameters": {
          "options": {},
          "conditions": {
            "options": {
              "version": 2,
              "leftValue": "",
              "caseSensitive": true,
              "typeValidation": "strict"
            },
            "combinator": "and",
            "conditions": [
              {
                "id": "e0493b94-1e9c-4f68-ba66-4abd2bd5b569",
                "operator": {
                  "type": "boolean",
                  "operation": "true",
                  "singleValue": true
                },
                "leftValue": "={{ $json['Is Low'] }}",
                "rightValue": "="
              }
            ]
          }
        },
        "typeVersion": 2.2
      }
    ],
    "pinData": {},
    "connections": {
      "Merge": {
        "main": [
          [
            {
              "node": "Check If Product ID Exists",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Merge1": {
        "main": [
          [
            {
              "node": "Process Approval Decision",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Update Stock": {
        "main": [
          [
            {
              "node": "Update Current Stock1",
              "type": "main",
              "index": 0
            },
            {
              "node": "Update Current Stck",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Get Approvals": {
        "main": [
          [
            {
              "node": "Format Approval Response",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Merge Lookups": {
        "main": [
          [
            {
              "node": "Prepare Approval",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Searck Issues": {
        "main": [
          [
            {
              "node": "Merge1",
              "type": "main",
              "index": 1
            }
          ]
        ]
      },
      "New Record Row": {
        "main": [
          [
            {
              "node": "Search Current Stock",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Format response": {
        "main": [
          [
            {
              "node": "Initialize New Product stock",
              "type": "main",
              "index": 0
            },
            {
              "node": "New Row Current Stock",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Is Stock is Low": {
        "main": [
          [
            {
              "node": "Low Stock Email Alert",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Prepare Approval": {
        "main": [
          [
            {
              "node": "Send Approval Request",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Standardize Data": {
        "main": [
          [
            {
              "node": "Validate Issue Request Data",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Search Product ID": {
        "main": [
          [
            {
              "node": "Merge Lookups",
              "type": "main",
              "index": 1
            }
          ]
        ]
      },
      "Create Record Issue": {
        "main": [
          [
            {
              "node": "Search Product ID",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Append Raw Materials": {
        "main": [
          [
            {
              "node": "Validate Quantity Received",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "LookUp Current stock": {
        "main": [
          [
            {
              "node": "Low stock Detection2",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Low stock Detection1": {
        "main": [
          [
            {
              "node": "Is Stock is Low",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Low stock Detection2": {
        "main": [
          [
            {
              "node": "Trigger Low Stock Alert",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Search Current Stock": {
        "main": [
          [
            {
              "node": "Merge",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Update Current Stock": {
        "main": [
          [
            {
              "node": "LookUp Current stock",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Verify Approval Data": {
        "main": [
          [
            {
              "node": "Retrieve Issue Request Details",
              "type": "main",
              "index": 0
            },
            {
              "node": "Searck Issues",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Calculate Total Price": {
        "main": [
          [
            {
              "node": "Append Raw Materials",
              "type": "main",
              "index": 0
            },
            {
              "node": "New Record Row",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "LookUp Current stock1": {
        "main": [
          [
            {
              "node": "Low stock Detection1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Lookup Existing Stock": {
        "main": [
          [
            {
              "node": "Merge",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Receive Issue Request": {
        "main": [
          [
            {
              "node": "Standardize Data",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Update Current Stock1": {
        "main": [
          [
            {
              "node": "LookUp Current stock1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Append Material Request": {
        "main": [
          [
            {
              "node": "Check Available Stock for Issue",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Trigger Low Stock Alert": {
        "main": [
          [
            {
              "node": "Send Low Stock Email Alert",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Format Approval Response": {
        "main": [
          [
            {
              "node": "Verify Approval Data",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Process Approval Decision": {
        "main": [
          [
            {
              "node": "Update Stock After Issue",
              "type": "main",
              "index": 0
            },
            {
              "node": "Materials Issue Table Update",
              "type": "main",
              "index": 0
            },
            {
              "node": "Get Stock for Issue Update from Current",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Verify Requested Quantity": {
        "main": [
          [
            {
              "node": "Append Material Request",
              "type": "main",
              "index": 0
            },
            {
              "node": "Create Record Issue",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Check If Product ID Exists": {
        "main": [
          [
            {
              "node": "Calculate Updated Current Stock",
              "type": "main",
              "index": 0
            }
          ],
          [
            {
              "node": "Format response",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Validate Quantity Received": {
        "main": [
          [
            {
              "node": "Lookup Existing Stock",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Validate Issue Request Data": {
        "main": [
          [
            {
              "node": "Verify Requested Quantity",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Receive Raw Materials Webhook": {
        "main": [
          [
            {
              "node": "Standardize Raw Material Data",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Standardize Raw Material Data": {
        "main": [
          [
            {
              "node": "Calculate Total Price",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Retrieve Issue Request Details": {
        "main": [
          [
            {
              "node": "Merge1",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Calculate Updated Current Stock": {
        "main": [
          [
            {
              "node": "Update Current Stock",
              "type": "main",
              "index": 0
            },
            {
              "node": "Current Stock Update",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Check Available Stock for Issue": {
        "main": [
          [
            {
              "node": "Merge Lookups",
              "type": "main",
              "index": 0
            }
          ]
        ]
      },
      "Get Stock for Issue Update from Current": {
        "main": [
          [
            {
              "node": "Update Stock",
              "type": "main",
              "index": 0
            }
          ]
        ]
      }
    }
  },
  "lastUpdatedBy": 29,
  "workflowInfo": {
    "nodeCount": 51,
    "nodeTypes": {
      "n8n-nodes-base.if": {
        "count": 4
      },
      "n8n-nodes-base.set": {
        "count": 3
      },
      "n8n-nodes-base.code": {
        "count": 10
      },
      "n8n-nodes-base.gmail": {
        "count": 3
      },
      "n8n-nodes-base.merge": {
        "count": 3
      },
      "n8n-nodes-base.webhook": {
        "count": 3
      },
      "n8n-nodes-base.supabase": {
        "count": 9
      },
      "n8n-nodes-base.itemLists": {
        "count": 1
      },
      "n8n-nodes-base.stickyNote": {
        "count": 3
      },
      "n8n-nodes-base.googleSheets": {
        "count": 12
      }
    }
  },
  "categories": [
    {
      "id": 45,
      "name": "Miscellaneous"
    }
  ],
  "image": [
    {
      "id": 1312,
      "url": "https://n8niostorageaccount.blob.core.windows.net/n8nio-strapi-blobs-prod/assets/Screenshot_2025_05_14_at_14_02_15_7c603d3371.png"
    }
  ]
}